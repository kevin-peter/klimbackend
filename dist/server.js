/*! For license information please see server.js.LICENSE.txt */
(()=>{var e={20:(e,n,t)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach(function(n){i(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function i(e,n,t){return(n=function(e){var n=function(e){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!=r(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(){var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",a=t.toStringTag||"@@toStringTag";function u(t,r,a,u){var s=r&&r.prototype instanceof c?r:c,d=Object.create(s.prototype);return o(d,"_invoke",function(t,r,a){var u,s,o,c=0,d=a||[],p=!1,l={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(n,t){return u=n,s=0,o=e,l.n=t,i}};function f(t,r){for(s=t,o=r,n=0;!p&&c&&!a&&n<d.length;n++){var a,u=d[n],f=l.p,_=u[2];t>3?(a=_===r)&&(o=u[(s=u[4])?5:(s=3,3)],u[4]=u[5]=e):u[0]<=f&&((a=t<2&&f<u[1])?(s=0,l.v=r,l.n=u[1]):f<_&&(a=t<3||u[0]>r||r>_)&&(u[4]=t,u[5]=r,l.n=_,s=0))}if(a||t>1)return i;throw p=!0,r}return function(a,d,_){if(c>1)throw TypeError("Generator is already running");for(p&&1===d&&f(d,_),s=d,o=_;(n=s<2?e:o)||!p;){u||(s?s<3?(s>1&&(l.n=-1),f(s,o)):l.n=o:l.v=o);try{if(c=2,u){if(s||(a="next"),n=u[a]){if(!(n=n.call(u,o)))throw TypeError("iterator result is not an object");if(!n.done)return n;o=n.value,s<2&&(s=0)}else 1===s&&(n=u.return)&&n.call(u),s<2&&(o=TypeError("The iterator does not provide a '"+a+"' method"),s=1);u=e}else if((n=(p=l.n<0)?o:t.call(r,l))!==i)break}catch(n){u=e,s=1,o=n}finally{c=1}}return{value:n,done:p}}}(t,a,u),!0),d}var i={};function c(){}function d(){}function p(){}n=Object.getPrototypeOf;var l=[][r]?n(n([][r]())):(o(n={},r,function(){return this}),n),f=p.prototype=c.prototype=Object.create(l);function _(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,o(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return d.prototype=p,o(f,"constructor",p),o(p,"constructor",d),d.displayName="GeneratorFunction",o(p,a,"GeneratorFunction"),o(f),o(f,a,"Generator"),o(f,r,function(){return this}),o(f,"toString",function(){return"[object Generator]"}),(s=function(){return{w:u,m:_}})()}function o(e,n,t,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}o=function(e,n,t,r){if(n)a?a(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t;else{var u=function(n,t){o(e,n,function(e){return this._invoke(n,t,e)})};u("next",0),u("throw",1),u("return",2)}},o(e,n,t,r)}function c(e,n,t,r,a,u,i){try{var s=e[u](i),o=s.value}catch(e){return void t(e)}s.done?n(o):Promise.resolve(o).then(r,a)}function d(e){return function(){var n=this,t=arguments;return new Promise(function(r,a){var u=e.apply(n,t);function i(e){c(u,r,a,i,s,"next",e)}function s(e){c(u,r,a,i,s,"throw",e)}i(void 0)})}}var p=t(967),l=t(299),f=(t(229),t(456).parseJwt),_=t(693).InputError,b=(t(511),t(376)),y=t(252).Router(),v=t(928),m=(v.join(__dirname,"assets"),(0,t(928).dirname)(t.c[t.s].path)),h=(t(128),t(896)),k=function(){var e=d(s().m(function e(n,t,r){var a,u;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,p.getTitle();case 1:a=e.v,t.status(200).json({success:!0,data:a}),e.n=3;break;case 2:e.p=2,u=e.v,r(u);case 3:return e.a(2)}},e,null,[[0,2]])}));return function(n,t,r){return e.apply(this,arguments)}}(),E=function(){var e=d(s().m(function e(n,t,r){var a,u;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,p.getSetting();case 1:a=e.v,t.status(200).json({success:!0,data:a}),e.n=3;break;case 2:e.p=2,u=e.v,r(u);case 3:return e.a(2)}},e,null,[[0,2]])}));return function(n,t,r){return e.apply(this,arguments)}}(),g=function(){var e=d(s().m(function e(n,t,r){var a;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,b(),console.log(n.body),e.a(2,!0);case 1:e.p=1,a=e.v,r(a);case 2:return e.a(2)}},e,null,[[0,1]])}));return function(n,t,r){return e.apply(this,arguments)}}(),w=function(){var e=d(s().m(function e(n,t,r){var a,i,o,c,d,l,h;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:if(y.use(b()),e.p=1,[2,3,6].includes(f(n).role)){e.n=2;break}throw new _("Un Authorise.");case 2:if(a=process.env.BASE_URL,n.body.title){e.n=3;break}throw new _("Title Required");case 3:if(n.body.link){e.n=4;break}throw new _("Link URL Required");case 4:if(n.body.whatsapp){e.n=5;break}throw new _("Whatsapp Number Required");case 5:return i=u({},n.body),o=new Date,i.last_updated=o,e.n=6,p.addTitle(i);case 6:if(!(c=e.v).insertId){e.n=8;break}if(console.log(c.insertId),d=c.insertId,!n.files){e.n=8;break}return(l=n.files.avatar).mv(v.join(m+"/public/images",l.name)),i.img=a+"images/"+l.name,i.id=d,e.n=7,p.updateImage(i);case 7:e.v;case 8:t.status(200).json({success:!!c.insertId,data:[],message:c.insertId?"Ads Created":"Faild Create Ads"}),e.n=10;break;case 9:e.p=9,h=e.v,r(h);case 10:return e.a(2)}},e,null,[[1,9]])}));return function(n,t,r){return e.apply(this,arguments)}}(),O=function(){var e=d(s().m(function e(n,t,r){var a,i,o,c,d,l,h;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:if(y.use(b()),e.p=1,[2,3,6].includes(f(n).role)){e.n=2;break}throw new _("Un Authorise.");case 2:if(a=process.env.BASE_URL,n.body.id){e.n=3;break}throw new _("Id Required");case 3:if(n.body.title){e.n=4;break}throw new _("Title Required");case 4:if(n.body.link){e.n=5;break}throw new _("Link URL Required");case 5:if(n.body.whatsapp){e.n=6;break}throw new _("Whatsapp Number Required");case 6:return i=u({},n.body),o=new Date,i.last_updated=o,e.n=7,p.updateTitle(i);case 7:if(c=e.v,!i.id){e.n=9;break}if(console.log(i.id),d=i.id,!n.files){e.n=9;break}return(l=n.files.avatar).mv(v.join(m+"/public/images",l.name)),i.img=a+"images/"+l.name,i.id=d,e.n=8,p.updateImage(i);case 8:e.v;case 9:t.status(200).json({success:!!c.insertId,data:[],message:c.insertId?"Title Updated":"Faild Update Title"}),e.n=11;break;case 10:e.p=10,h=e.v,r(h);case 11:return e.a(2)}},e,null,[[1,10]])}));return function(n,t,r){return e.apply(this,arguments)}}(),R=function(){var e=d(s().m(function e(n,t,r){var a,u,i;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,l.getProfile(f(n).email);case 1:return 6===(a=e.v)[0].u_role?a[0].parent_id:a[0].id,e.n=2,p.getTitle();case 2:u=e.v,t.status(200).json({success:!0,data:u}),e.n=4;break;case 3:e.p=3,i=e.v,r(i);case 4:return e.a(2)}},e,null,[[0,3]])}));return function(n,t,r){return e.apply(this,arguments)}}(),S=function(){var e=d(s().m(function e(n,t,r){var a,u,i;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,l.getProfile(f(n).email);case 1:return(a=e.v)[0].id,3!==a[0].u_role&&a[0].parent_id,e.n=2,p.delAds(n.body.id);case 2:u=e.v,t.status(200).json({success:!0,data:u}),e.n=4;break;case 3:e.p=3,i=e.v,r(i);case 4:return e.a(2)}},e,null,[[0,3]])}));return function(n,t,r){return e.apply(this,arguments)}}(),T=function(){var e=d(s().m(function e(n,t,r){var a,u,i;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,l.getProfile(f(n).email);case 1:return 6===(a=e.v)[0].u_role?a[0].parent_id:a[0].id,e.n=2,p.getSetting();case 2:u=e.v,t.status(200).json({success:!0,data:u}),e.n=4;break;case 3:e.p=3,i=e.v,r(i);case 4:return e.a(2)}},e,null,[[0,3]])}));return function(n,t,r){return e.apply(this,arguments)}}(),N=function(){var e=d(s().m(function e(n,t,r){var a,i,o,c,d,l;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:if(y.use(b()),e.p=1,[2,3,6].includes(f(n).role)){e.n=2;break}throw new _("Un Authorise.");case 2:if(a=process.env.BASE_URL,n.body.title){e.n=3;break}throw new _("Title Required");case 3:if(n.body.whatsapp){e.n=4;break}throw new _("Whatsapp Number Required");case 4:return i=u({},n.body),o=new Date,i.last_updated=o,e.n=5,p.updateSetting(i);case 5:if(c=e.v,!n.files){e.n=7;break}return console.log(n.files),(d=n.files.logo).mv(v.join(m+"/public/logo",d.name)),i.img=a+"logo/"+d.name,e.n=6,p.updateLogo(i);case 6:e.v;case 7:t.status(200).json({success:!0,data:[],message:c.insertId?"Ads Created":"Faild Create Ads"}),e.n=9;break;case 8:e.p=8,l=e.v,r(l);case 9:return e.a(2)}},e,null,[[1,8]])}));return function(n,t,r){return e.apply(this,arguments)}}(),I=function(){var e=d(s().m(function e(n,t,r){var a,u,i;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,l.getProfile(f(n).email);case 1:return 6===(a=e.v)[0].u_role?a[0].parent_id:a[0].id,e.n=2,p.getImageList();case 2:u=e.v,t.status(200).json({success:!0,data:u}),e.n=4;break;case 3:e.p=3,i=e.v,r(i);case 4:return e.a(2)}},e,null,[[0,3]])}));return function(n,t,r){return e.apply(this,arguments)}}(),A=function(){var e=d(s().m(function e(n,t,r){var a,i,o,c,d,l,h,k,E;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:if(y.use(b()),e.p=1,[2,3,6].includes(f(n).role)){e.n=2;break}throw new _("Un Authorise.");case 2:if(a=process.env.BASE_URL,n.files){e.n=3;break}throw new _("Image Required");case 3:if(i=u({},n.body),o=new Date,i.last_updated=o,c=!1,d=Math.floor(10*Math.random()),console.log(d),!n.files){e.n=5;break}return l=n.files.avatar,h="img_"+d+"_"+l.name,l.mv(v.join(m+"/public/slider",h)),i.image_url=a+"slider/"+h,e.n=4,p.addImage(i);case 4:k=e.v,c=!!k.insertId;case 5:t.status(200).json({success:!!c,data:[],message:c?"Image Created":"Faild Create Image"}),e.n=7;break;case 6:e.p=6,E=e.v,r(E);case 7:return e.a(2)}},e,null,[[1,6]])}));return function(n,t,r){return e.apply(this,arguments)}}(),P=function(){var e=d(s().m(function e(n,t,r){var a,u,i,o,c,d,_;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,l.getProfile(f(n).email);case 1:return(a=e.v)[0].id,3!==a[0].u_role&&a[0].parent_id,e.n=2,p.getImageById(n.body.id);case 2:return u=e.v,i=process.env.BASE_URL,o=u[0].image_url.split(i+"slider/"),c=m+"/public/slider/"+o[1],h.existsSync(c)&&h.unlink(m+"/public/slider/"+o[1],function(e){if(e)throw e;console.log("Delete File successfully.")}),e.n=3,p.delImg(n.body.id);case 3:d=e.v,t.status(200).json({success:!0,data:d}),e.n=5;break;case 4:e.p=4,_=e.v,r(_);case 5:return e.a(2)}},e,null,[[0,4]])}));return function(n,t,r){return e.apply(this,arguments)}}(),U=function(){var e=d(s().m(function e(n,t,r){var a,u;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,p.getSlides();case 1:a=e.v,t.status(200).json({success:!0,data:a}),e.n=3;break;case 2:e.p=2,u=e.v,r(u);case 3:return e.a(2)}},e,null,[[0,2]])}));return function(n,t,r){return e.apply(this,arguments)}}();e.exports={list:k,uploads:g,addTitle:w,updateTitle:O,getTitle:R,delAds:S,getSetting:T,updateSetting:N,getImageList:I,addImage:A,delImg:P,getData:E,getSlides:U}},22:(e,n,t)=>{var r=t(252).Router(),a=t(456),u=a.authenticateToken,i=(a.authenticateIP,t(416).errorHandlerMiddleware),s=t(624),o=s.getEventRunners,c=s.updateRuns,d=s.updateWickets,p=s.updateToss,l=s.getResults,f=s.getBalance,_=s.resultVerify;r.post("/getEventRunners",u,o),r.post("/updateRuns",u,c),r.post("/getResults",u,l),r.post("/updateWickets",u,d),r.post("/resultVerify",u,_),r.post("/getBalance",u,f),r.post("/updateToss",u,p),r.use(i),e.exports=r},96:e=>{"use strict";e.exports=require("morgan")},111:(e,n,t)=>{function r(){var e,n,t="function"==typeof Symbol?Symbol:{},u=t.iterator||"@@iterator",i=t.toStringTag||"@@toStringTag";function s(t,r,u,i){var s=r&&r.prototype instanceof c?r:c,d=Object.create(s.prototype);return a(d,"_invoke",function(t,r,a){var u,i,s,c=0,d=a||[],p=!1,l={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(n,t){return u=n,i=0,s=e,l.n=t,o}};function f(t,r){for(i=t,s=r,n=0;!p&&c&&!a&&n<d.length;n++){var a,u=d[n],f=l.p,_=u[2];t>3?(a=_===r)&&(s=u[(i=u[4])?5:(i=3,3)],u[4]=u[5]=e):u[0]<=f&&((a=t<2&&f<u[1])?(i=0,l.v=r,l.n=u[1]):f<_&&(a=t<3||u[0]>r||r>_)&&(u[4]=t,u[5]=r,l.n=_,i=0))}if(a||t>1)return o;throw p=!0,r}return function(a,d,_){if(c>1)throw TypeError("Generator is already running");for(p&&1===d&&f(d,_),i=d,s=_;(n=i<2?e:s)||!p;){u||(i?i<3?(i>1&&(l.n=-1),f(i,s)):l.n=s:l.v=s);try{if(c=2,u){if(i||(a="next"),n=u[a]){if(!(n=n.call(u,s)))throw TypeError("iterator result is not an object");if(!n.done)return n;s=n.value,i<2&&(i=0)}else 1===i&&(n=u.return)&&n.call(u),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);u=e}else if((n=(p=l.n<0)?s:t.call(r,l))!==o)break}catch(n){u=e,i=1,s=n}finally{c=1}}return{value:n,done:p}}}(t,u,i),!0),d}var o={};function c(){}function d(){}function p(){}n=Object.getPrototypeOf;var l=[][u]?n(n([][u]())):(a(n={},u,function(){return this}),n),f=p.prototype=c.prototype=Object.create(l);function _(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,a(e,i,"GeneratorFunction")),e.prototype=Object.create(f),e}return d.prototype=p,a(f,"constructor",p),a(p,"constructor",d),d.displayName="GeneratorFunction",a(p,i,"GeneratorFunction"),a(f),a(f,i,"Generator"),a(f,u,function(){return this}),a(f,"toString",function(){return"[object Generator]"}),(r=function(){return{w:s,m:_}})()}function a(e,n,t,r){var u=Object.defineProperty;try{u({},"",{})}catch(e){u=0}a=function(e,n,t,r){if(n)u?u(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t;else{var i=function(n,t){a(e,n,function(e){return this._invoke(n,t,e)})};i("next",0),i("throw",1),i("return",2)}},a(e,n,t,r)}function u(e,n,t,r,a,u,i){try{var s=e[u](i),o=s.value}catch(e){return void t(e)}s.done?n(o):Promise.resolve(o).then(r,a)}function i(e){return function(){var n=this,t=arguments;return new Promise(function(r,a){var i=e.apply(n,t);function s(e){u(i,r,a,s,o,"next",e)}function o(e){u(i,r,a,s,o,"throw",e)}s(void 0)})}}var s=t(697),o=(t(229),function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT id, event_id, market_id, event_name, team1, team2, opendate, closedate, status, bet_lock, locked, type, runnerName1, runnerName2 FROM tbl_events ORDER BY id desc",[n]))},e)}));return function(n){return e.apply(this,arguments)}}()),c=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("INSERT INTO `tbl_events`(`event_id`,`market_id`, `event_name`, `team1`, `team2`, `opendate`, `closedate`, `weak_team`, `parent_id`, `runnerName1`, `runnerName2`, `type`) VALUES (?,?,?,?,?,?,?,?,?,?,?,?)  ON DUPLICATE KEY UPDATE last_updated = VALUES(last_updated)",[n.event_id,n.market_id,n.event_name,n.team1,n.team2,n.opendate,n.closedate,n.weak_team,n.parent_id,n.runnerName1,n.runnerName2,n.m_type]))},e)}));return function(n){return e.apply(this,arguments)}}(),d=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return console.log(n),e.a(2,s.query("UPDATE `tbl_events` SET event_name = ?, team1 = ?, team2 = ?, opendate = ?, closedate = ? WHERE event_id = ?",[n.event_name,n.team1,n.team2,n.opendate,n.closedate,n.event_id]))},e)}));return function(n){return e.apply(this,arguments)}}(),p=function(){var e=i(r().m(function e(n,t){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("DELETE FROM `tbl_events` where event_id = ? and parent_id = ?",[n,t]))},e)}));return function(n,t){return e.apply(this,arguments)}}(),l=function(){var e=i(r().m(function e(n,t){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("DELETE FROM `tbl_markets` where event_id = ?",[n]))},e)}));return function(n,t){return e.apply(this,arguments)}}(),f=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("DELETE FROM `tbl_runners` where event_id = ?",[n]))},e)}));return function(n){return e.apply(this,arguments)}}(),_=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("DELETE FROM ` tbl_runners_users` where event_id = ?",[n]))},e)}));return function(n){return e.apply(this,arguments)}}(),b=function(){var e=i(r().m(function e(n){var t,a;return r().w(function(e){for(;;)if(0===e.n)return t=[],a="UPDATE `tbl_events` SET ","status"in n&&(t.push(n.status),a+=" tbl_events.status=?"),"lock"in n&&(t.push(n.lock),a+=" tbl_events.lock=?"),"bet_lock"in n&&(t.push(n.bet_lock),a+=" tbl_events.bet_lock=?"),a+=" WHERE tbl_events.event_id=?",t.push(n.event_id),e.a(2,s.query(a,t))},e)}));return function(n){return e.apply(this,arguments)}}(),y=function(){var e=i(r().m(function e(n){var t,a;return r().w(function(e){for(;;)if(0===e.n)return t=[],a="UPDATE `tbl_default_markets` SET ","status"in n&&(t.push(n.status),a+=" tbl_default_markets.status=?"),"visible"in n&&(t.push(n.visible),a+=" tbl_default_markets.visible=?"),"locked"in n&&(t.push(n.locked),a+=" tbl_default_markets.locked=?"),"display_order"in n&&(t.push(n.display_order),a+=" tbl_default_markets.display_order=?"),"runner_count"in n&&(t.push(n.runner_count),a+=" tbl_default_markets.runner_count=?"),a+=" WHERE tbl_default_markets.id=?",t.push(n.market_id),console.log(a,t),e.a(2,s.query(a,t))},e)}));return function(n){return e.apply(this,arguments)}}(),v=function(){var e=i(r().m(function e(){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT id, name, runner_count, runner_type, display_order, status, visible, locked FROM tbl_default_markets ORDER BY display_order asc",[]))},e)}));return function(){return e.apply(this,arguments)}}(),m=function(){var e=i(r().m(function e(){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT id, name, runner_count, runner_type, display_order, status, visible, locked FROM tbl_default_markets WHERE status = 1 ORDER BY display_order asc",[]))},e)}));return function(){return e.apply(this,arguments)}}(),h=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("INSERT INTO `tbl_default_markets`(`name`) VALUES (?) ",[n.name]))},e)}));return function(n){return e.apply(this,arguments)}}(),k=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("DELETE FROM `tbl_default_markets` where id = ?",[n]))},e)}));return function(n){return e.apply(this,arguments)}}(),E=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("INSERT INTO `tbl_markets`(`event_id`, `main_market_id`, `market_name`, `runner_count`) VALUES (?,?,?,?)  ON DUPLICATE KEY UPDATE updated_at = VALUES(updated_at)",[n.event_id,n.main_market_id,n.market_name,n.runner_count]))},e)}));return function(n){return e.apply(this,arguments)}}();e.exports={getEventsAll:o,addEvent:c,updateEvent:d,delEvent:p,delMarkets:l,delRunners:f,lockEvent:b,lockMarket:y,getDefaultMarketsAll:v,getDefaultMarkets:m,createMarket:h,delMarket:k,delRunnersUsers:_,addMarket:E}},128:(e,n,t)=>{var r=t(140),a=t(174),u=t(252),i=t(577),s=t(928),o=t(898),c=(t(96),t(703)),d=(t(229),t(697),t(622)),p=u();p.use(a()),p.use(i()),c.schedule("0 0 0 * * *",function(){console.log("closed events deleted successfully")}),p.set("views",s.join(__dirname,"views")),p.set("view engine","ejs"),p.use(u.json()),p.use(u.urlencoded({extended:!1})),p.use(o()),(0,t(955).routerV1)(p),p.use("/",d),p.use(u.static(s.join(__dirname,"public"))),p.use("/images",u.static("images")),p.use(function(e,n,t){t(r(404))}),p.use(function(e,n,t,r){t.locals.message=e.message,t.locals.error="development"===n.app.get("env")?e:{},t.status(e.status||500),t.render("error")}),e.exports=p},140:e=>{"use strict";e.exports=require("http-errors")},144:(e,n,t)=>{function r(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return a(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?a(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function u(){var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",a=t.toStringTag||"@@toStringTag";function s(t,r,a,u){var s=r&&r.prototype instanceof c?r:c,d=Object.create(s.prototype);return i(d,"_invoke",function(t,r,a){var u,i,s,c=0,d=a||[],p=!1,l={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(n,t){return u=n,i=0,s=e,l.n=t,o}};function f(t,r){for(i=t,s=r,n=0;!p&&c&&!a&&n<d.length;n++){var a,u=d[n],f=l.p,_=u[2];t>3?(a=_===r)&&(s=u[(i=u[4])?5:(i=3,3)],u[4]=u[5]=e):u[0]<=f&&((a=t<2&&f<u[1])?(i=0,l.v=r,l.n=u[1]):f<_&&(a=t<3||u[0]>r||r>_)&&(u[4]=t,u[5]=r,l.n=_,i=0))}if(a||t>1)return o;throw p=!0,r}return function(a,d,_){if(c>1)throw TypeError("Generator is already running");for(p&&1===d&&f(d,_),i=d,s=_;(n=i<2?e:s)||!p;){u||(i?i<3?(i>1&&(l.n=-1),f(i,s)):l.n=s:l.v=s);try{if(c=2,u){if(i||(a="next"),n=u[a]){if(!(n=n.call(u,s)))throw TypeError("iterator result is not an object");if(!n.done)return n;s=n.value,i<2&&(i=0)}else 1===i&&(n=u.return)&&n.call(u),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);u=e}else if((n=(p=l.n<0)?s:t.call(r,l))!==o)break}catch(n){u=e,i=1,s=n}finally{c=1}}return{value:n,done:p}}}(t,a,u),!0),d}var o={};function c(){}function d(){}function p(){}n=Object.getPrototypeOf;var l=[][r]?n(n([][r]())):(i(n={},r,function(){return this}),n),f=p.prototype=c.prototype=Object.create(l);function _(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return d.prototype=p,i(f,"constructor",p),i(p,"constructor",d),d.displayName="GeneratorFunction",i(p,a,"GeneratorFunction"),i(f),i(f,a,"Generator"),i(f,r,function(){return this}),i(f,"toString",function(){return"[object Generator]"}),(u=function(){return{w:s,m:_}})()}function i(e,n,t,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}i=function(e,n,t,r){if(n)a?a(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t;else{var u=function(n,t){i(e,n,function(e){return this._invoke(n,t,e)})};u("next",0),u("throw",1),u("return",2)}},i(e,n,t,r)}function s(e,n,t,r,a,u,i){try{var s=e[u](i),o=s.value}catch(e){return void t(e)}s.done?n(o):Promise.resolve(o).then(r,a)}function o(e){return function(){var n=this,t=arguments;return new Promise(function(r,a){var u=e.apply(n,t);function i(e){s(u,r,a,i,o,"next",e)}function o(e){s(u,r,a,i,o,"throw",e)}i(void 0)})}}var c=t(263),d=t(299),p=(t(229),t(456).parseJwt),l=t(693).InputError,f=(t(511),t(128),t(692),t(236).Console,t(252).json,t(716)),_=function(){var e=o(u().m(function e(n,t,r){var a,i,s,o,f,_,b,y,v,m,h;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1,2,3,4,5,6].includes(p(n).role)){e.n=1;break}throw new l("Un Authorise.");case 1:return e.n=2,d.getProfile(p(n).email);case 2:return a=e.v,i=a[0].parent_id,e.n=3,c.getPartnerships(a[0].id);case 3:if(s=e.v,o=[],s.length>0)for(f=0;f<s.length;f++)o.push(s[f].id);return e.n=4,c.getEvents(i);case 4:return _=e.v,b=[],e.n=5,c.getEventDefaultParent(o);case 5:for(b=e.v,y=0;y<_.length;y++)if(b.length>0)for(v=0;v<b.length;v++)if(b[v].event_id==_[y].event_id)for(a[0].id==b[v].user_id&&(_[y].status=b[v].status,_[y].bet_lock=b[v].bet_lock),m=0;m<o.length;m++)a[0].id!=o[m]&&o[m]==b[v].user_id&&(1==b[v].bet_lock&&(_[y].parent_bet_lock=b[v].bet_lock),0==b[v].status&&(_[y].parent_status=b[v].status));t.status(200).json({success:!0,data:_,event_default:b}),e.n=7;break;case 6:e.p=6,h=e.v,r(h);case 7:return e.a(2)}},e,null,[[0,6]])}));return function(n,t,r){return e.apply(this,arguments)}}(),b=function(){var e=o(u().m(function e(n,t,r){var a,i;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1,2,3,4,5,6].includes(p(n).role)){e.n=1;break}throw new l("Un Authorise.");case 1:if(n.body.event_id){e.n=2;break}throw new l("Event Id Required");case 2:return e.n=3,c.getEventByEventID(n.body.event_id);case 3:a=e.v,t.status(200).json({success:!0,data:a}),e.n=5;break;case 4:e.p=4,i=e.v,r(i);case 5:return e.a(2)}},e,null,[[0,4]])}));return function(n,t,r){return e.apply(this,arguments)}}(),y=function(){var e=o(u().m(function e(n,t,r){var a,i,s,o,f,_,b,y,v,m,h,k;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1,2,3,4,5].includes(p(n).role)){e.n=1;break}throw new l("Un Authorise.");case 1:if(n.body.event_id){e.n=2;break}throw new l("Event Id Required");case 2:return e.n=3,d.getProfile(p(n).email);case 3:return a=e.v,e.n=4,c.getPartnerships(a[0].id);case 4:if(i=e.v,s=[],i.length>0)for(o=0;o<i.length;o++)s.push(i[o].id);return e.n=5,c.getMarkets(n.body.event_id);case 5:return f=e.v,e.n=6,c.getMarketsType(n.body.event_id,s);case 6:for(_=e.v,b=[],y=0;y<f.length;y++)if(b.push(f[y].id),_.length>0)for(v=0;v<_.length;v++)if(_[v].market_id==f[y].id)for(a[0].id==_[v].user_id&&(f[y].visible=_[v].visible,f[y].locked=_[v].locked),m=0;m<s.length;m++)a[0].id!=s[m]&&s[m]==_[v].user_id&&(1==_[v].locked&&(f[y].parent_locked=_[v].locked),0==_[v].visible&&(f[y].parent_visible=_[v].visible));return e.n=7,c.getPlayers(n.body.event_id,b);case 7:h=e.v,t.status(200).json({success:!0,data:f,players:h}),e.n=9;break;case 8:e.p=8,k=e.v,r(k);case 9:return e.a(2)}},e,null,[[0,8]])}));return function(n,t,r){return e.apply(this,arguments)}}(),v=function(){var e=o(u().m(function e(n,t,r){var a,i,s,o,f,_;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1,2,3,4,5].includes(p(n).role)){e.n=1;break}throw new l("Un Authorise.");case 1:if(n.body.event_id){e.n=2;break}throw new l("Event Id Required");case 2:return e.n=3,d.getProfile(p(n).email);case 3:return a=e.v,e.n=4,c.getPartnerships(a[0].id);case 4:if(i=e.v,s=[],i.length>0)for(o=0;o<i.length;o++)s.push(i[o].id);return e.n=5,c.getMarkets(n.body.event_id);case 5:return f=e.v,e.n=6,c.getMarketsType(n.body.event_id,s);case 6:e.v,t.status(200).json({success:!0,data:f}),e.n=8;break;case 7:e.p=7,_=e.v,r(_);case 8:return e.a(2)}},e,null,[[0,7]])}));return function(n,t,r){return e.apply(this,arguments)}}(),m=function(){var e=o(u().m(function e(n,t,r){var a,i,s,o,f,_,b,y,v,m,h,k;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1,2,3,4,5].includes(p(n).role)){e.n=1;break}throw new l("Un Authorise.");case 1:if(n.body.event_id){e.n=2;break}throw new l("Event Id Required");case 2:return e.n=3,d.getProfile(p(n).email);case 3:return a=e.v,e.n=4,c.getPartnerships(a[0].id);case 4:if(i=e.v,s=[],i.length>0)for(o=0;o<i.length;o++)s.push(i[o].id);return e.n=5,c.getMarketsC(n.body.event_id,n.body.main_market_id);case 5:return f=e.v,e.n=6,c.getMarketsType(n.body.event_id,s);case 6:for(_=e.v,b=[],y=0;y<f.length;y++)if(b.push(f[y].id),_.length>0)for(v=0;v<_.length;v++)if(_[v].market_id==f[y].id)for(a[0].id==_[v].user_id&&(f[y].visible=_[v].visible,f[y].locked=_[v].locked),m=0;m<s.length;m++)a[0].id!=s[m]&&s[m]==_[v].user_id&&(1==_[v].locked&&(f[y].parent_locked=_[v].locked),0==_[v].visible&&(f[y].parent_visible=_[v].visible));return e.n=7,c.getPlayers(n.body.event_id,b);case 7:h=e.v,t.status(200).json({success:!0,data:f,players:h}),e.n=9;break;case 8:e.p=8,k=e.v,r(k);case 9:return e.a(2)}},e,null,[[0,8]])}));return function(n,t,r){return e.apply(this,arguments)}}(),h=function(){var e=o(u().m(function e(n,t,r){var a,i;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1,2,3,4,5,6].includes(p(n).role)){e.n=1;break}throw new l("Un Authorise.");case 1:if(n.body.event_id){e.n=2;break}throw new l("Event Id Required");case 2:return e.n=3,d.getProfile(p(n).email);case 3:return e.v,e.n=4,c.getPlayers(n.body.event_id);case 4:a=e.v,t.status(200).json({success:!0,data:a}),e.n=6;break;case 5:e.p=5,i=e.v,r(i);case 6:return e.a(2)}},e,null,[[0,5]])}));return function(n,t,r){return e.apply(this,arguments)}}(),k=function(){var e=o(u().m(function e(n,t,r){var a,i,s,o;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1,2].includes(p(n).role)){e.n=1;break}throw new l("Un Authorise.");case 1:if(n.body.event_id){e.n=2;break}throw new l("Event Id Required");case 2:return e.n=3,d.getProfile(p(n).email);case 3:return a=e.v,n.body.parent_id=a[0].parent_id,(i={}).hometeam=n.body.hometeam,i.awayteam=n.body.awayteam,n.body.player=JSON.stringify(i),e.n=4,c.addPlayer(n.body);case 4:s=e.v,t.status(200).json({success:!!s.insertId,data:[],message:s.insertId?"Event Created":"Faild Create Event"}),e.n=6;break;case 5:e.p=5,o=e.v,r(o);case 6:return e.a(2)}},e,null,[[0,5]])}));return function(n,t,r){return e.apply(this,arguments)}}(),E=function(){var e=o(u().m(function e(n,t,r){var a,i,s,o,f,_,b,y,v,m,h,k,E,g,w,O,R,S,T,N,I,P,U,D,M;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[5].includes(p(n).role)){e.n=1;break}throw new l("Un Authorise.");case 1:if(n.body.event_id){e.n=2;break}throw new l("Event Id Required");case 2:if(n.body.market_id){e.n=3;break}throw new l("Market Id Required");case 3:if(n.body.runnerId){e.n=4;break}throw new l("Runner Id Required");case 4:if(n.body.runner_name){e.n=5;break}throw new l("Runner Name Required");case 5:if(n.body.eventType){e.n=6;break}throw new l("Event Type Required");case 6:if(n.body.main_market_id){e.n=7;break}throw new l("Default Market Id Required");case 7:if(n.body.eventStatus||!("weak_team"in n.body.eventStatus)){e.n=8;break}throw new l("Event Status with all parameters Required");case 8:return e.n=9,d.getProfile(p(n).email);case 9:return a=e.v,e.n=10,d.getallPart(a[0].id);case 10:return i=e.v,e.n=11,A(i,a);case 11:return s=e.v,n.body.user_id=a[0].id,n.body.parent_id=a[0].parent_id,n.body.type="user",n.body.part_chain=JSON.stringify(s),o=n.body.eventStatus.weak_team,e.n=12,c.updatePartChain(n.body.user_id,n.body.part_chain);case 12:return e.v,"OneDay"==n.body.eventType?n.body.exp="-300":"Twenty"==n.body.eventType?n.body.exp="-200":n.body.exp="0",e.n=13,c.addRunner(n.body);case 13:return f=e.v,n.body.parent_id=0,n.body.part_chain="",e.n=14,c.getSelRunners(n.body);case 14:for(_=e.v,b=[],y=[],v=[],m=[],h=0;h<_.length;h++)1==_[h].team&&y.push(_[h].sequence),2==_[h].team&&v.push(_[h].sequence),b.push({seq:_[h].sequence,team:_[h].team}),m.push(parseInt(_[h].runnerId));return n.body.selectedIds=m,e.n=15,c.getUnSelRunnersAll(n.body);case 15:for(k=e.v,E=[],g=[],w=[],O=0;O<k.length;O++)0==o?(1==k[O].team&&E.push(k[O].id),2==k[O].team&&g.push(k[O].id)):1==o?2==k[O].team&&g.push(k[O].id):(R=k.find(function(e){return"1"===e.team}),1==k[O].team&&E.push(k[O].id),void 0===R&&g.push(k[O].id));return w[0]=0!=E.length?Math.min.apply(Math,E):0,w[1]=0!=g.length?Math.min.apply(Math,g):0,n.body.unSelIds=w,e.n=16,c.getUnSelRunners(n.body);case 16:return S=e.v,(T={}).event_id=n.body.event_id,T.market_id=n.body.market_id,T.main_market_id=n.body.main_market_id,T.user_id=n.body.user_id,T.parent_id=n.body.user_id,T.runnerId=S[0].id,T.runner_name=S[0].name,T.sequence=S[0].sequence,T.team=S[0].team,T.type="system",T.exp=Math.abs(n.body.exp),T.eventType=n.body.eventType,e.n=17,c.addRunner(T);case 17:return e.v,e.n=18,c.getSelRunners(n.body);case 18:for(N=e.v,I=0,P=0,U=N[0].market_id,D=0;D<N.length;D++)"user"==N[D].type?I=parseInt(I)+parseInt(N[D].exp):P=parseInt(P)+parseInt(N[D].exp);t.status(200).json({success:!!f.insertId,data:N,runner:S,user_exp:I,system_exp:P,mkId:U,user_player:n.body.runner_name,system_player:T.runner_name,message:f.insertId?"Player Selected! ["+n.body.runner_name+"] VS ["+T.runner_name+"]":"Faild to Select Player"}),e.n=20;break;case 19:e.p=19,M=e.v,r(M);case 20:return e.a(2)}},e,null,[[0,19]])}));return function(n,t,r){return e.apply(this,arguments)}}(),g=function(){var e=o(u().m(function e(n,t,r){var a,i,s,o,f;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[5].includes(p(n).role)){e.n=1;break}throw new l("Un Authorise.");case 1:if(n.body.event_id){e.n=2;break}throw new l("Event Id Required");case 2:if(n.body.market_id){e.n=3;break}throw new l("Market Id Required");case 3:if(n.body.runnerId){e.n=4;break}throw new l("Runner Id Required");case 4:if(n.body.runner_name){e.n=5;break}throw new l("Runner Name Required");case 5:if(n.body.eventType){e.n=6;break}throw new l("Event Type Required");case 6:if(n.body.main_market_id){e.n=7;break}throw new l("Default Market Id Required");case 7:if(n.body.eventStatus||!("weak_team"in n.body.eventStatus)){e.n=8;break}throw new l("Event Status with all parameters Required");case 8:return e.n=9,d.getProfile(p(n).email);case 9:return a=e.v,e.n=10,d.getallPart(a[0].id);case 10:return i=e.v,e.n=11,A(i,a);case 11:return s=e.v,n.body.user_id=a[0].id,n.body.parent_id=a[0].parent_id,n.body.type="user",n.body.part_chain=JSON.stringify(s),n.body.eventStatus.weak_team,e.n=12,c.updatePartChain(n.body.user_id,n.body.part_chain);case 12:return e.v,"OneDay"==n.body.eventType?n.body.exp="-300":"Twenty"==n.body.eventType?n.body.exp="-200":n.body.exp="0",e.n=13,c.addRunner(n.body);case 13:o=e.v,t.status(200).json({success:!!o.insertId,data:n.body.runner_name,user_player:n.body.runner_name,message:o.insertId?"Player Selected! ["+n.body.runner_name+"]":"Faild to Select Player"}),e.n=15;break;case 14:e.p=14,f=e.v,r(f);case 15:return e.a(2)}},e,null,[[0,14]])}));return function(n,t,r){return e.apply(this,arguments)}}(),w=function(){var e=o(u().m(function e(n,t,r){var a,i,s,o,f;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[5].includes(p(n).role)){e.n=1;break}throw new l("Un Authorise.");case 1:if(n.body.event_id){e.n=2;break}throw new l("Event Id Required");case 2:if(n.body.market_id){e.n=3;break}throw new l("Market Id Required");case 3:if(n.body.runnerId){e.n=4;break}throw new l("Runner Id Required");case 4:if(n.body.runner_name){e.n=5;break}throw new l("Runner Name Required");case 5:if(n.body.eventType){e.n=6;break}throw new l("Event Type Required");case 6:if(n.body.odd_even){e.n=7;break}throw new l("ODD-EVEN Type Required");case 7:if(n.body.main_market_id){e.n=8;break}throw new l("Default Market Id Required");case 8:if(n.body.eventStatus||!("weak_team"in n.body.eventStatus)){e.n=9;break}throw new l("Event Status with all parameters Required");case 9:return e.n=10,d.getProfile(p(n).email);case 10:return a=e.v,e.n=11,d.getallPart(a[0].id);case 11:return i=e.v,e.n=12,A(i,a);case 12:return s=e.v,n.body.user_id=a[0].id,n.body.parent_id=a[0].parent_id,n.body.type="user",n.body.part_chain=JSON.stringify(s),n.body.eventStatus.weak_team,e.n=13,c.updatePartChain(n.body.user_id,n.body.part_chain);case 13:return e.v,"OneDay"==n.body.eventType?n.body.exp="-300":"Twenty"==n.body.eventType?n.body.exp="-200":n.body.exp="0",e.n=14,c.addRunnerOddEven(n.body);case 14:return o=e.v,n.body.parent_id=0,n.body.exp=Math.abs(n.body.exp),n.body.type="system","odd"==n.body.odd_even?n.body.odd_even="even":n.body.odd_even="odd",e.n=15,c.addRunnerOddEven(n.body);case 15:e.v,t.status(200).json({success:!!o.insertId,data:n.body.runner_name,user_player:n.body.runner_name,message:o.insertId?"Player Selected! ["+n.body.runner_name+"]":"Faild to Select Player"}),e.n=17;break;case 16:e.p=16,f=e.v,r(f);case 17:return e.a(2)}},e,null,[[0,16]])}));return function(n,t,r){return e.apply(this,arguments)}}(),O=function(){var e=o(u().m(function e(n,t,a){var i,s,o,f,_,b,y,v,m,h,k,E,g,w,O,R,S,T,N,I,A,P,U,D;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1,2,3,4,5,6].includes(p(n).role)){e.n=1;break}throw new l("Un Authorise.");case 1:if(n.body.event_id){e.n=2;break}throw new l("Event Id Required");case 2:return e.n=3,d.getProfile(p(n).email);case 3:return i=e.v,n.body.user_id=i[0].id,n.body.parent_id=i[0].parent_id,e.n=4,c.getMarketsByUid(n.body);case 4:return s=e.v,o={pair:null,odd:null,common:null},e.n=5,c.getSelectedRunnersAll(n.body);case 5:for(f=e.v,_=[],b=0;b<s.length;b++)9==s[b].main_market_id?_.push(c.getExpByBet(n.body).then(function(e){o.pair=e})):3==s[b].main_market_id?_.push(c.getExpByBet(n.body).then(function(e){o.odd=e})):_.push(c.getExpByMarket(n.body).then(function(e){o.common=e}));return e.n=6,Promise.all(_);case 6:for(y=[],v=[],m=[],h=[],k=[],E=[],g={},w={},O=[],R=0;R<f.length;R++)y.push(parseInt(f[R].runnerId)),O.push(parseInt(f[R].market_id)),"system"==f[R].type&&(v.push(parseInt(f[R].runnerId)),"even"==f[R].odd_even&&h.push(parseInt(f[R].runnerId)),"odd"==f[R].odd_even&&m.push(parseInt(f[R].runnerId))),"SELECTED"==f[R].status&&(k.push(parseInt(f[R].market_id)),E.push(f[R]));if(Array.isArray(o.common))for(S=0;S<o.common.length;S++)T=o.common[S],g[T.market_id]=T.total_exp*T.amt,w[T.market_id]=T.amt;if(Array.isArray(o.pair))for(N=0;N<o.pair.length;N++)I=o.pair[N],g[I.market_id]=I.total_exp*I.amt,w[I.market_id]=I.amt;if(Array.isArray(o.odd))for(A=0;A<o.odd.length;A++)P=o.odd[A],g[P.market_id]=P.total_exp*P.amt,w[P.market_id]=P.amt;return k=r(new Set(k)),e.n=7,c.getBalance(n.body);case 7:U=e.v,O=r(new Set(O)),t.status(200).json({success:!0,data:y,system:v,confirmedMarkets:k,confirmedPlayers:E,expMarket:g,amtTaken:w,markets:O,sys_odd:m,sys_even:h,bal:U,message:"Selected Runners"}),e.n=9;break;case 8:e.p=8,D=e.v,a(D);case 9:return e.a(2)}},e,null,[[0,8]])}));return function(n,t,r){return e.apply(this,arguments)}}(),R=function(){var e=o(u().m(function e(n,t,a){var i,s,o,f,_,b,y,v,m,h,k,E,g,w;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1,2,3,4,5,6].includes(p(n).role)){e.n=1;break}throw new l("Un Authorise.");case 1:if(n.body.event_id){e.n=2;break}throw new l("Event Id Required");case 2:if(n.body.main_market_id){e.n=3;break}throw new l("Market Id Required");case 3:return e.n=4,d.getProfile(p(n).email);case 4:if(i=e.v,n.body.user_id=i[0].id,n.body.parent_id=i[0].parent_id,s=[],o=[],8!=n.body.main_market_id&&10!=n.body.main_market_id){e.n=7;break}return e.n=5,c.getSelectedRunnersSingle(n.body);case 5:return s=e.v,e.n=6,c.getExpByMarket(n.body);case 6:o=e.v,e.n=13;break;case 7:if(9!=n.body.main_market_id){e.n=10;break}return e.n=8,c.getSelectedRunnersAll(n.body);case 8:return s=e.v,e.n=9,c.getExpByBet(n.body);case 9:o=e.v,e.n=13;break;case 10:return e.n=11,c.getSelectedRunnersSingle2(n.body);case 11:return s=e.v,e.n=12,c.getExpByMarket(n.body);case 12:o=e.v;case 13:for(f=[],_=[],b=[],y=[],v={},m={},h=[],k=0;k<s.length;k++)f.push(parseInt(s[k].runnerId)),h.push(parseInt(s[k].market_id)),"system"==s[k].type&&_.push(parseInt(s[k].runnerId)),"SELECTED"==s[k].status&&(b.push(parseInt(s[k].market_id)),y.push(s[k]));for(E=0;E<o.length;E++)v[o[E].market_id]=o[E].total_exp*o[E].amt,m[o[E].market_id]=o[E].amt;return b=r(new Set(b)),e.n=14,c.getBalance(n.body);case 14:g=e.v,h=r(new Set(h)),t.status(200).json({success:!0,data:f,system:_,confirmedMarkets:b,confirmedPlayers:y,expMarket:v,amtTaken:m,markets:h,bal:g,message:"Selected Runners"}),e.n=16;break;case 15:e.p=15,w=e.v,a(w);case 16:return e.a(2)}},e,null,[[0,15]])}));return function(n,t,r){return e.apply(this,arguments)}}(),S=function(){var e=o(u().m(function e(n,t,r){var a,i,s,o,f,_,b,y;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[5].includes(p(n).role)){e.n=1;break}throw new l("Un Authorise.");case 1:if(n.body.event_id){e.n=2;break}throw new l("Event Id Required");case 2:if(n.body.market_id){e.n=3;break}throw new l("Market Id Required");case 3:if(n.body.runnerId){e.n=4;break}throw new l("Runner Id Required");case 4:return e.n=5,d.getProfile(p(n).email);case 5:return a=e.v,n.body.user_id=a[0].id,n.body.parent_id=a[0].parent_id,n.body.type="user",e.n=6,c.getSelRunners(n.body);case 6:return i=e.v,e.n=7,c.delRunnerRel(n.body);case 7:for(e.v,s=[],o=0;o<i.length;o++)s.push(parseInt(i[o].runnerId));return e.n=8,c.getExpByMarket(n.body);case 8:for(f=e.v,_={},b=0;b<f.length;b++)_[f[b].market_id]=f[b].total_exp;t.status(200).json({success:!0,data:s,expMarket:_,message:"System Resetting Player Selection cycling!"}),e.n=10;break;case 9:e.p=9,y=e.v,r(y);case 10:return e.a(2)}},e,null,[[0,9]])}));return function(n,t,r){return e.apply(this,arguments)}}(),T=function(){var e=o(u().m(function e(n,t,r){var a,i,s,o,f,_,b,y;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[5].includes(p(n).role)){e.n=1;break}throw new l("Un Authorise.");case 1:if(n.body.event_id){e.n=2;break}throw new l("Event Id Required");case 2:if(n.body.market_id){e.n=3;break}throw new l("Market Id Required");case 3:if(n.body.runnerId){e.n=4;break}throw new l("Runner Id Required");case 4:return e.n=5,d.getProfile(p(n).email);case 5:return a=e.v,n.body.user_id=a[0].id,n.body.parent_id=a[0].parent_id,n.body.type="user",e.n=6,c.delRunnerSingalRel(n.body);case 6:return e.v,e.n=7,c.getSelRunners(n.body);case 7:for(i=e.v,s=[],o=0;o<i.length;o++)s.push(parseInt(i[o].runnerId));return e.n=8,c.getExpByMarket(n.body);case 8:for(f=e.v,_={},b=0;b<f.length;b++)_[f[b].market_id]=f[b].total_exp;t.status(200).json({success:!0,data:s,expMarket:_,message:"Player removed!"}),e.n=10;break;case 9:e.p=9,y=e.v,r(y);case 10:return e.a(2)}},e,null,[[0,9]])}));return function(n,t,r){return e.apply(this,arguments)}}(),N=function(){var e=o(u().m(function e(n,t,r){var a,i,s;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1,2,3,4,5].includes(p(n).role)){e.n=1;break}throw new l("Un Authorise.");case 1:return e.n=2,d.getProfile(p(n).email);case 2:return a=e.v,n.body.user_id=a[0].id,n.body.parent_id=a[0].parent_id,e.n=3,c.getBalance(n.body);case 3:i=e.v,t.status(200).json({success:!0,data:i,message:"Balance retrived"}),e.n=5;break;case 4:e.p=4,s=e.v,r(s);case 5:return e.a(2)}},e,null,[[0,4]])}));return function(n,t,r){return e.apply(this,arguments)}}(),I=function(){var e=o(u().m(function e(n,t,r){var a,i,s,o,f,_,b,y,v,m,h,k,E,g,w,O,R,S,T,N,I,P,U,D,M,C,L,j,B;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[5].includes(p(n).role)){e.n=1;break}throw new l("Un Authorise.");case 1:if(n.body.event_id){e.n=2;break}throw new l("Event Id Required");case 2:if(n.body.market_id){e.n=3;break}throw new l("Market Id Required");case 3:if(n.body.main_market_id){e.n=4;break}throw new l("Market Id Required");case 4:if(n.body.event_name){e.n=5;break}throw new l("Event Name Required");case 5:if(0!=n.body.selection){e.n=6;break}if(n.body.lastDigit){e.n=6;break}throw new l("Score Digit Required");case 6:if(n.body.amount&&""!==n.body.amount&&!isNaN(Number(n.body.amount))){e.n=7;break}throw new l("Bet amount Required");case 7:if(!(n.body.amount<1||n.body.amount>5)||![1,2,6,7].includes(n.body.main_market_id)){e.n=8;break}throw new l("Market bet amount is not valid. Amount is restricted [min. 1, max. 5]");case 8:if(!(n.body.amount<500||n.body.amount>1e4)||![4,5,11].includes(n.body.main_market_id)){e.n=9;break}throw new l("Market bet amount is not valid. Amount is restricted [min. 500, max. 10000]");case 9:if(!(n.body.amount<100||n.body.amount>2e3)||![3,8,9,10].includes(n.body.main_market_id)){e.n=10;break}throw new l("Market bet amount is not valid. Amount is restricted [min. 100, max. 2000]");case 10:return e.n=11,d.getProfile(p(n).email);case 11:return a=e.v,n.body.user_id=a[0].id,n.body.parent_id=a[0].parent_id,i=a[0].email,e.n=12,c.getEventByEventID(n.body.event_id);case 12:if(0!=(s=e.v).length){e.n=13;break}throw new l("Event not exist or expired");case 13:if(o=[],0!=n.body.selection){e.n=15;break}return e.n=14,c.getPlayers(n.body.event_id,n.body.market_id);case 14:o=e.v,e.n=17;break;case 15:return e.n=16,c.getSelRunnersByMarket(n.body);case 16:o=e.v;case 17:if(0!=o.length){e.n=18;break}throw new l("Empty selection box, select player again!");case 18:if(f={},9!=n.body.main_market_id&&3!=n.body.main_market_id){e.n=20;break}return e.n=19,c.getExpByBet(n.body);case 19:f=e.v,e.n=22;break;case 20:return e.n=21,c.getExpByMarket(n.body);case 21:f=e.v;case 22:for(_=0,b=0;b<f.length;b++)f[b].market_id==n.body.market_id&&(_=f[b].total_exp*n.body.amount);if(0==n.body.selection&&(_=-Math.abs(n.body.amount)),y=a[0]&&a[0].exposer?a[0].exposer:0,_=Math.abs(y)+Math.abs(_),!(Math.abs(_)>a[0].amount)){e.n=23;break}throw new l("Not Enough Balance.");case 23:if(v=[],0!=n.body.selection){e.n=30;break}return e.n=24,d.getallPart(a[0].id);case 24:return h=e.v,e.n=25,A(h,a);case 25:return k=e.v,n.body.type="user",n.body.part_chain=JSON.stringify(k),(E={}).event_id=n.body.event_id,E.market_id=n.body.market_id,E.runnerId=o[0].id,E.user_id=n.body.user_id,E.runner_name=o[0].name,E.sequence=1,E.team=1,E.type="user",E.run_digit=n.body.lastDigit,E.exp=n.body.amount,E.amount=null!==(m=n.body.amount)&&void 0!==m?m:0,E.eventType=n.body.eventtype,E.main_market_id=n.body.main_market_id,E.status="SELECTED",E.parent_id=n.body.parent_id,E.part_chain=n.body.part_chain,e.p=26,e.n=27,c.addRunnerScore(E);case 27:v=e.v,e.n=29;break;case 28:e.p=28,j=e.v,console.error("Error adding runner score:",j);case 29:e.n=32;break;case 30:return e.n=31,c.confirmPlayers(n.body);case 31:v=e.v;case 32:return e.n=33,c.getPartChain(n.body.user_id);case 33:if(g=e.v,w=JSON.parse(g[0].chain),O=[],0==n.body.selection)for(R=-Math.abs(n.body.amount),O.push([n.body.user_id,R]),S=0;S<w.length;S++)w[S].id!=n.body.user_id&&(0,T=w[S].id===a[0].parent_id?w[S].part:w[S].part-w[S-1].part,N=Math.abs(R)*T/100,O.push([w[S].id,N]));else for(I=0;I<f.length;I++)if(f[I].market_id==n.body.market_id)for(P=f[I].total_exp*n.body.amount,O.push([n.body.user_id,P]),U=0;U<w.length;U++)w[U].id!=n.body.user_id&&(0,D=w[U].id===a[0].parent_id?w[U].part:w[U].part-w[U-1].part,M=Math.abs(P)*D/100,O.push([w[U].id,M]));return e.n=34,c.updateMainExp(O);case 34:if(e.v,C=[],0==n.body.selection)C.push([n.body.user_id,i,n.body.event_name,o[0].event_id,o[0].market_id,o[0].main_market_id,o[0].id,o[0].name,o[0].team,s[0]["team"+o[0].team],n.body.amount,"user",n.body.amount,"127.0.0.1","mozilla window"]);else for(L=0;L<o.length;L++)C.push([o[L].user_id,i,n.body.event_name,o[L].event_id,o[L].market_id,o[L].main_market_id,o[L].runnerId,o[L].runner_name,o[L].team,s[0]["team"+o[L].team],n.body.amount,o[L].type,o[L].exp,"127.0.0.1","mozilla window"]);return e.n=35,c.addBets(C);case 35:e.v,t.status(200).json({success:!0,data:v,bets:o,message:"Selection Confirmed!"}),e.n=37;break;case 36:e.p=36,B=e.v,r(B);case 37:return e.a(2)}},e,null,[[26,28],[0,36]])}));return function(n,t,r){return e.apply(this,arguments)}}(),A=function(){var e=o(u().m(function e(n,t){var r;return u().w(function(e){for(;;)if(0===e.n){for(r=0;r<n.length;r++)n[r].id===t[0].id?(n[r].down_line=0,n[r].up_line=n[r].our=n[r].part):n[r].id===t[0].parent_id?(n[r].down_line=100,n[r].our=n[r].part,n[r].up_line=100-n[r].part):(n[r].down_line=n[r-1].up_line,n[r].our=n[r].part-n[r-1].part,n[r].up_line=n[r].down_line-n[r].our);return e.a(2,n)}},e)}));return function(n,t){return e.apply(this,arguments)}}(),P=function(){var e=o(u().m(function e(n,t,r){var a,i,s;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1,2,3,4,5,6].includes(p(n).role)){e.n=1;break}throw new l("Un Authorise.");case 1:if(n.body.event_id){e.n=2;break}throw new l("Event Id Required");case 2:if(n.body.market_id){e.n=3;break}throw new l("Market Id Required");case 3:return e.n=4,d.getProfile(p(n).email);case 4:return a=e.v,n.body.user_id=a[0].id,n.body.parent_id=a[0].parent_id,e.n=5,c.getConfirmPlayers(n.body);case 5:i=e.v,t.status(200).json({success:!0,data:i,message:"Confirmed Market & Runners retrieved"}),e.n=7;break;case 6:e.p=6,s=e.v,r(s);case 7:return e.a(2)}},e,null,[[0,6]])}));return function(n,t,r){return e.apply(this,arguments)}}(),U=function(){var e=o(u().m(function e(n,t,a){var i,s,o,f,_,b,y,v,m,h,k,E,g,w,O,R,S;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1,2,3,4,5,6].includes(p(n).role)){e.n=1;break}throw new l("Un Authorise.");case 1:return e.n=2,d.getProfile(p(n).email);case 2:if((i=e.v)[0].parent_id,s=[],o=[],5==i[0].u_role){e.n=4;break}return e.n=3,d.getChild(i[0].id,5);case 3:if((s=e.v).length>0)for(f=0;f<s.length;f++)o.push(s[f].id);e.n=5;break;case 4:o=i[0].id;case 5:return e.n=6,c.getMyMarkets(o);case 6:for(_=e.v,b=[],y={},v={},m=[],h=[],k=0;k<_.length;k++)b.push(parseInt(_[k].market_id)),m.push(parseInt(_[k].event_id)),v[_[k].market_id]=_[k].market_name,h.push(_[k].main_market_id);if(b=r(new Set(b)),m=r(new Set(m)),h=r(new Set(h)),E=[],!(m.length>0)){e.n=12;break}if(!(h.length>0)){e.n=12;break}g=0;case 7:if(!(g<h.length)){e.n=12;break}if(3!=h[g]&&9!=h[g]){e.n=9;break}return e.n=8,c.getExpByEventSingleBet(m,o);case 8:E=e.v,e.n=11;break;case 9:return e.n=10,c.getExpByEvent(m,o);case 10:E=e.v;case 11:g++,e.n=7;break;case 12:for(w=0;w<m.length;w++)for(O=0,R=0;R<E.length;R++)m[w]==E[R].event_id&&(5!=i[0].u_role||(E[R]&&"total_exp"in E[R]?O+=E[R].total_exp:O+=0),y[E[R].event_id]=O);t.status(200).json({success:!0,data:_,markets:v,mkIds:b,expMarket:y}),e.n=14;break;case 13:e.p=13,S=e.v,a(S);case 14:return e.a(2)}},e,null,[[0,13]])}));return function(n,t,r){return e.apply(this,arguments)}}(),D=function(){var e=o(u().m(function e(n,t,a){var i,s,o,f,_,b,y,v,m,h,k,E,g,w,O,R,S,T;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1,2,3,4,5,6].includes(p(n).role)){e.n=1;break}throw new l("Un Authorise.");case 1:if(n.body.event_id){e.n=2;break}throw new l("Event Id Required");case 2:return e.n=3,d.getProfile(p(n).email);case 3:if((i=e.v)[0].parent_id,s=[],o=[],5==i[0].u_role){e.n=5;break}return e.n=4,d.getChild(i[0].id,5);case 4:if((s=e.v).length>0)for(f=0;f<s.length;f++)o.push(s[f].id);e.n=6;break;case 5:o=i[0].id;case 6:return e.n=7,c.getMyMarketsByEvent(o,n.body.event_id);case 7:for(_=e.v,b=[],y={},v={},m=[],h=[],k=0;k<_.length;k++)b.push(parseInt(_[k].market_id)),m.push(parseInt(_[k].event_id)),v[_[k].market_id]=_[k].market_name,h.push(_[k].main_market_id);if(b=r(new Set(b)),m=r(new Set(m)),h=r(new Set(h)),E=[],g={},!(m.length>0)){e.n=13;break}if(!(h.length>0)){e.n=13;break}w=0;case 8:if(!(w<h.length)){e.n=13;break}if(3!=h[w]&&9!=h[w]){e.n=10;break}return e.n=9,c.getExpByEventSingleBet(m,o);case 9:E=e.v,e.n=12;break;case 10:return e.n=11,c.getExpByEvent(m,o);case 11:E=e.v;case 12:w++,e.n=8;break;case 13:O=0;case 14:if(!(O<m.length)){e.n=19;break}R=0,S=0;case 15:if(!(S<E.length)){e.n=18;break}if(E[S]){e.n=16;break}return e.a(3,17);case 16:E[S]&&E[S].market_id&&E[S].total_exp&&(g[E[S].market_id]=E[S].total_exp),m[O]==E[S].event_id&&(5!=i[0].u_role||(E[S]&&"total_exp"in E[S]?R+=E[S].total_exp:R+=0),y[E[S].event_id]=R);case 17:S++,e.n=15;break;case 18:O++,e.n=14;break;case 19:t.status(200).json({success:!0,data:_,markets:v,mkIds:b,expMarket:y,all_exp:g}),e.n=21;break;case 20:e.p=20,T=e.v,a(T);case 21:return e.a(2)}},e,null,[[0,20]])}));return function(n,t,r){return e.apply(this,arguments)}}(),M=function(){var e=o(u().m(function e(n,t,r){var a,i,s,o,f,_,b,y,v,m,h,k,E;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1,2,3,4,5,6].includes(p(n).role)){e.n=1;break}throw new l("Un Authorise.");case 1:return e.n=2,d.getProfile(p(n).email);case 2:if((a=e.v)[0].parent_id,i=[],s=[],5==a[0].u_role){e.n=4;break}return e.n=3,d.getChild(a[0].id,5);case 3:if((i=e.v).length>0)for(o=0;o<i.length;o++)s.push(i[o].id);e.n=5;break;case 4:s=a[0].id;case 5:return f=[],e.n=6,c.getMyPlayers(s);case 6:if(f=e.v,_=[],f.length>0)for(b=0;b<f.length;b++)_.push(f[b].event_id);if(_=_.filter(function(e,n,t){return t.indexOf(e)===n}),y=[],!(_.length>0)){e.n=8;break}return e.n=7,c.getScore(_);case 7:y=e.v;case 8:if(y.length>0)for(v=0;v<f.length;v++)for(m=0;m<y.length;m++)h=[],k=[],f[v].event_id==y[m].event_id&&f[v].market_name==y[m].market_name&&(null!=y[m].t1&&(h=JSON.parse(y[m].t1)),null!=y[m].t2&&(k=JSON.parse(y[m].t2)),h[f[v].runnerId]&&(f[v].runs=h[f[v].runnerId]),k[f[v].runnerId]&&(f[v].runs=k[f[v].runnerId]),11==y[m].main_market_id&&y[m].result==f[v].runnerId&&(f[v].runs=y[m].result));t.status(200).json({success:!0,data:f}),e.n=10;break;case 9:e.p=9,E=e.v,r(E);case 10:return e.a(2)}},e,null,[[0,9]])}));return function(n,t,r){return e.apply(this,arguments)}}(),C=function(){var e=o(u().m(function e(n,t,r){var a,i,s,o;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1,2,3,4,5,6].includes(p(n).role)){e.n=1;break}throw new l("Un Authorise.");case 1:if(n.body.event_id){e.n=2;break}throw new l("Event Id Required");case 2:return e.n=3,d.getProfile(p(n).email);case 3:return e.v,e.n=4,c.getEventStatus(n.body.event_id);case 4:a=e.v,i=f(),s=0,a.forEach(function(e){f(e.opendate).isBefore(i)&&(s=1)}),t.status(200).json({success:!0,data:a,event_timeout:s}),e.n=6;break;case 5:e.p=5,o=e.v,r(o);case 6:return e.a(2)}},e,null,[[0,5]])}));return function(n,t,r){return e.apply(this,arguments)}}(),L=function(){var e=o(u().m(function e(n,t,r){var a,i,s;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1,2,3,4].includes(p(n).role)){e.n=1;break}throw new l("Un Authorise.");case 1:if(n.body.event_id){e.n=2;break}throw new l("Event Id Required");case 2:if(n.body.market_id){e.n=3;break}throw new l("Market Id Required");case 3:if(n.body.type_name){e.n=4;break}throw new l("Market Name Required");case 4:return e.n=5,d.getProfile(p(n).email);case 5:return a=e.v,n.body.locked=null==n.body.locked?1:n.body.locked,n.body.visible=null==n.body.visible?1:n.body.visible,n.body.user_id=a[0].id,n.body.admin_id=a[0].parent_id,e.n=6,c.updateMarketStatus(n.body);case 6:i=e.v,t.status(200).json({success:!0,data:[],message:i.affectedRows?"Market ".concat(n.body.type," status updated"):"UnChanged"}),e.n=8;break;case 7:e.p=7,s=e.v,r(s);case 8:return e.a(2)}},e,null,[[0,7]])}));return function(n,t,r){return e.apply(this,arguments)}}(),j=function(){var e=o(u().m(function e(n,t,r){var a,i;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1,2,3,4,5].includes(p(n).role)){e.n=1;break}throw new l("Un Authorise.");case 1:if(n.body.event_id){e.n=2;break}throw new l("Event Id Required");case 2:return e.n=3,d.getProfile(p(n).email);case 3:return e.v,e.n=4,c.getEventStatus(n.body.event_id);case 4:a=e.v,t.status(200).json({success:!0,data:a}),e.n=6;break;case 5:e.p=5,i=e.v,r(i);case 6:return e.a(2)}},e,null,[[0,5]])}));return function(n,t,r){return e.apply(this,arguments)}}(),B=function(){var e=o(u().m(function e(n,t,a){var i,s,o,f,_,b,y,v,m,h,k,E,g,w,O,R,S;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1,2,3,4,5].includes(p(n).role)){e.n=1;break}throw new l("Un Authorise.");case 1:return e.n=2,d.getProfile(p(n).email);case 2:if((i=e.v)[0].parent_id,s=[],o=[],5==i[0].u_role){e.n=4;break}return e.n=3,d.getChild(i[0].id,5);case 3:if((s=e.v).length>0)for(f=0;f<s.length;f++)o.push(s[f].id);e.n=5;break;case 4:o.push(i[0].id);case 5:return e.n=6,c.getMyMarkets(o);case 6:for(_=e.v,b=[],y=[],v=[],m=0;m<_.length;m++)b.push(_[m].market_id),y.push(_[m].event_id),v.push(_[m].main_market_id);if(b=r(new Set(b)),y=r(new Set(y)),v=r(new Set(v)),console.log(v),h=[],k=[],!(y.length>0)){e.n=12;break}if(!(v.length>0)){e.n=12;break}E=0;case 7:if(!(E<v.length)){e.n=12;break}if(3!=v[E]&&9!=v[E]){e.n=9;break}return e.n=8,c.getExpByEventSingleBet(y,o);case 8:h=e.v,e.n=11;break;case 9:return e.n=10,c.getExpByEvent(y,o);case 10:h=e.v;case 11:E++,e.n=7;break;case 12:if(console.log(h),!(y.length>0)){e.n=14;break}return e.n=13,c.getEventByEventIDArray(y);case 13:k=e.v,e.n=15;break;case 14:case 15:return e.n=16,d.getPartnerships(i[0].id);case 16:for(e.v,g=0;g<k.length;g++){for(w=0,O=0;O<h.length;O++)k[g].event_id==h[O].event_id&&(h[O].event_name=k[g].event_name,h[O].event_type=k[g].type,k[g].exp||(k[g].exp=[]),5!=i[0].u_role?w+=Math.abs(0*h[O].total_exp)/100:w+=h[O].total_exp,k[g].exp=w);for(R=0;R<_.length;R++)k[g].event_id==_[R].event_id&&(k[g].trades||(k[g].trades=[]),k[g].trades.push(_[R].market_name))}t.status(200).json({success:!0,data:k,markets:_,mkIds:b}),e.n=18;break;case 17:e.p=17,S=e.v,a(S);case 18:return e.a(2)}},e,null,[[0,17]])}));return function(n,t,r){return e.apply(this,arguments)}}(),x=function(){var e=o(u().m(function e(n,t,r){var a,i;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1,2,3,4,5].includes(p(n).role)){e.n=1;break}throw new l("Un Authorise.");case 1:if(n.body.event_id){e.n=2;break}throw new l("Event Id Required");case 2:return e.n=3,d.getProfile(p(n).email);case 3:return e.v,e.n=4,c.getButtonsByMK(1,n.body.main_market_id);case 4:a=e.v,t.status(200).json({success:!0,data:a}),e.n=6;break;case 5:e.p=5,i=e.v,r(i);case 6:return e.a(2)}},e,null,[[0,5]])}));return function(n,t,r){return e.apply(this,arguments)}}(),q=function(){var e=o(u().m(function e(n,t,r){var a,i,s,o;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1,2,3,4,5,6].includes(p(n).role)){e.n=1;break}throw new l("Un Authorise.");case 1:return e.n=2,d.getProfile(p(n).email);case 2:return a=e.v,i=a[0].id,e.n=3,c.getAC(i);case 3:s=e.v,t.status(200).json({success:!0,data:s}),e.n=5;break;case 4:e.p=4,o=e.v,r(o);case 5:return e.a(2)}},e,null,[[0,4]])}));return function(n,t,r){return e.apply(this,arguments)}}(),W=function(){var e=o(u().m(function e(n,t,r){var a,i,s,o,f,_,b,y,v,m,h,k,E;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1,2,3,4,5].includes(p(n).role)){e.n=1;break}throw new l("Un Authorise.");case 1:if(n.body.event_id){e.n=2;break}throw new l("Event Id Required");case 2:return e.n=3,d.getProfile(p(n).email);case 3:return a=e.v,n.body.user_id=a[0].id,e.n=4,c.getResults(n.body.event_id);case 4:if(i=e.v,s=[],o=[],f=[],_=[],b=[],y=[],v=[],m=[],h=[],i.length>0)for(k=0;k<i.length;k++)"RUN"==i[k].result_type&&"NO_CUT"==i[k].market_name&&(s=JSON.parse(i[k].t1),s=Object.keys(s).map(function(e){return[e,s[e]]}),o=JSON.parse(i[k].t2),o=Object.keys(o).map(function(e){return[e,o[e]]})),"RUN"==i[k].result_type&&"CUT"==i[k].market_name&&(f=JSON.parse(i[k].t1),f=Object.keys(f).map(function(e){return[e,f[e]]}),_=JSON.parse(i[k].t2),_=Object.keys(_).map(function(e){return[e,_[e]]})),"WICKET"==i[k].result_type&&"NO_CUT"==i[k].market_name&&(b=JSON.parse(i[k].t1),b=Object.keys(b).map(function(e){return[e,b[e]]}),y=JSON.parse(i[k].t2),y=Object.keys(y).map(function(e){return[e,y[e]]})),"WICKET"==i[k].result_type&&"CUT"==i[k].market_name&&(v=JSON.parse(i[k].t1),v=Object.keys(v).map(function(e){return[e,v[e]]}),m=JSON.parse(i[k].t2),m=Object.keys(m).map(function(e){return[e,m[e]]}));t.status(200).json({success:!0,data:h,runs_team1_nocut:s,runs_team2_nocut:o,runs_team1_cut:f,runs_team2_cut:_,wickets_team1_nocut:b,wickets_team2_nocut:y,wickets_team1_cut:v,wickets_team2_cut:m,message:"Result retrived"}),e.n=6;break;case 5:e.p=5,E=e.v,r(E);case 6:return e.a(2)}},e,null,[[0,5]])}));return function(n,t,r){return e.apply(this,arguments)}}(),F=function(){var e=o(u().m(function e(n,t,r){var a,i,s,o,f,_,b,y,v,m,h,k;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1,2,3,4,5,6].includes(p(n).role)){e.n=1;break}throw new l("Un Authorise.");case 1:if(n.body.event_id){e.n=2;break}throw new l("Event Id Required");case 2:if(n.body.market_id){e.n=3;break}throw new l("Market Id Required");case 3:return e.n=4,d.getProfile(p(n).email);case 4:if((a=e.v)[0].parent_id,i=[],s=[],5==a[0].u_role){e.n=6;break}return e.n=5,d.getChild(a[0].id,5);case 5:if((i=e.v).length>0)for(o=0;o<i.length;o++)s.push(i[o].id);e.n=7;break;case 6:s=a[0].id;case 7:return f=[],_=[],e.n=8,c.getMarkets(n.body.event_id);case 8:return _=e.v,e.n=9,c.getPlayers(n.body.event_id,n.body.market_id);case 9:if(f=e.v,b=[],!(event_ids.length>0)){e.n=11;break}return e.n=10,c.getScore(event_ids);case 10:b=e.v;case 11:if(b.length>0)for(y=0;y<f.length;y++)for(v=0;v<b.length;v++)m=[],h=[],f[y].event_id==b[v].event_id&&f[y].market_name==b[v].market_name&&(null!=b[v].t1&&(m=JSON.parse(b[v].t1)),null!=b[v].t2&&(h=JSON.parse(b[v].t2)),m[f[y].id]&&(f[y].runs=m[f[y].id]),h[f[y].id]&&(f[y].runs=h[f[y].id]),11==b[v].main_market_id&&b[v].result==f[y].id&&(f[y].runs=b[v].result));t.status(200).json({success:!0,data:f,markets:_}),e.n=13;break;case 12:e.p=12,k=e.v,r(k);case 13:return e.a(2)}},e,null,[[0,12]])}));return function(n,t,r){return e.apply(this,arguments)}}(),J=function(){var e=o(u().m(function e(n,t,r){var a,i,s,o,f,_,b,y,v,m,h;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1,2,3,4,5,6].includes(p(n).role)){e.n=1;break}throw new l("Un Authorise.");case 1:if(n.body.event_id){e.n=2;break}throw new l("Event Id Required");case 2:if(n.body.market_id){e.n=3;break}throw new l("Market Id Required");case 3:return e.n=4,d.getProfile(p(n).email);case 4:if((a=e.v)[0].parent_id,i=[],s=[],5==a[0].u_role){e.n=6;break}return e.n=5,d.getChild(a[0].id,5);case 5:if((i=e.v).length>0)for(o=0;o<i.length;o++)s.push(i[o].id);e.n=7;break;case 6:s=a[0].id;case 7:return f=[],e.n=8,c.getPlayersByMK(n.body.event_id,n.body.market_id);case 8:return f=e.v,_=[],e.n=9,c.getScoreByMK(n.body.event_id,n.body.market_id);case 9:if((_=e.v).length>0)for(b=0;b<f.length;b++)for(y=0;y<_.length;y++)v=[],m=[],f[b].event_id==_[y].event_id&&f[b].main_market_id==_[y].main_market_id&&(null!=_[y].t1&&(v=JSON.parse(_[y].t1)),null!=_[y].t2&&(m=JSON.parse(_[y].t2)),v[f[b].id]&&(f[b].runs=v[f[b].id]),m[f[b].id]&&(f[b].runs=m[f[b].id]),11==_[y].main_market_id&&_[y].result==f[b].id&&(f[b].runs=_[y].result));t.status(200).json({success:!0,data:f}),e.n=11;break;case 10:e.p=10,h=e.v,r(h);case 11:return e.a(2)}},e,null,[[0,10]])}));return function(n,t,r){return e.apply(this,arguments)}}(),V=function(){var e=o(u().m(function e(n,t,r){var a,i,s,o,f,_,b;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1,2,3,4,5,6].includes(p(n).role)){e.n=1;break}throw new l("Un Authorise.");case 1:return e.n=2,d.getProfile(p(n).email);case 2:return a=e.v,i=a[0].id,s=[],5==a[0].u_role&&s.push(i),e.n=3,d.getAllChildsCustom(i);case 3:if((o=e.v).length>0)for(f=0;f<o.length;f++)s.push(o[f].id);return e.n=4,c.getBets(s);case 4:_=e.v,t.status(200).json({success:!0,data:_}),e.n=6;break;case 5:e.p=5,b=e.v,r(b);case 6:return e.a(2)}},e,null,[[0,5]])}));return function(n,t,r){return e.apply(this,arguments)}}();e.exports={getEvents:_,getEventByEventID:b,getPlayers:h,addPlayer:k,getMarkets:y,getMarketsC:m,getMarketsList:v,selectRunner:E,getSelectedRuners:O,getSelectedRunersSingle:R,unSelectRunner:S,unSelectSingleRunner:T,getBalance:N,confirmPlayers:I,getConfirmPlayers:P,getMyMarkets:U,getMyMarketsByEvent:D,getMyPlayers:M,updateMarketStatus:L,getEventStatus:C,getMarketStatus:j,getExposerTable:B,getButtons:x,getAC:q,getResults:W,getResultsAll:F,getResult:J,parsePart:A,getBets:V,selectSingleRunner:g,selectOddEven:w}},174:e=>{"use strict";e.exports=require("compression")},183:(e,n,t)=>{function r(){var e,n,t="function"==typeof Symbol?Symbol:{},u=t.iterator||"@@iterator",i=t.toStringTag||"@@toStringTag";function s(t,r,u,i){var s=r&&r.prototype instanceof c?r:c,d=Object.create(s.prototype);return a(d,"_invoke",function(t,r,a){var u,i,s,c=0,d=a||[],p=!1,l={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(n,t){return u=n,i=0,s=e,l.n=t,o}};function f(t,r){for(i=t,s=r,n=0;!p&&c&&!a&&n<d.length;n++){var a,u=d[n],f=l.p,_=u[2];t>3?(a=_===r)&&(s=u[(i=u[4])?5:(i=3,3)],u[4]=u[5]=e):u[0]<=f&&((a=t<2&&f<u[1])?(i=0,l.v=r,l.n=u[1]):f<_&&(a=t<3||u[0]>r||r>_)&&(u[4]=t,u[5]=r,l.n=_,i=0))}if(a||t>1)return o;throw p=!0,r}return function(a,d,_){if(c>1)throw TypeError("Generator is already running");for(p&&1===d&&f(d,_),i=d,s=_;(n=i<2?e:s)||!p;){u||(i?i<3?(i>1&&(l.n=-1),f(i,s)):l.n=s:l.v=s);try{if(c=2,u){if(i||(a="next"),n=u[a]){if(!(n=n.call(u,s)))throw TypeError("iterator result is not an object");if(!n.done)return n;s=n.value,i<2&&(i=0)}else 1===i&&(n=u.return)&&n.call(u),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);u=e}else if((n=(p=l.n<0)?s:t.call(r,l))!==o)break}catch(n){u=e,i=1,s=n}finally{c=1}}return{value:n,done:p}}}(t,u,i),!0),d}var o={};function c(){}function d(){}function p(){}n=Object.getPrototypeOf;var l=[][u]?n(n([][u]())):(a(n={},u,function(){return this}),n),f=p.prototype=c.prototype=Object.create(l);function _(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,a(e,i,"GeneratorFunction")),e.prototype=Object.create(f),e}return d.prototype=p,a(f,"constructor",p),a(p,"constructor",d),d.displayName="GeneratorFunction",a(p,i,"GeneratorFunction"),a(f),a(f,i,"Generator"),a(f,u,function(){return this}),a(f,"toString",function(){return"[object Generator]"}),(r=function(){return{w:s,m:_}})()}function a(e,n,t,r){var u=Object.defineProperty;try{u({},"",{})}catch(e){u=0}a=function(e,n,t,r){if(n)u?u(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t;else{var i=function(n,t){a(e,n,function(e){return this._invoke(n,t,e)})};i("next",0),i("throw",1),i("return",2)}},a(e,n,t,r)}function u(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,u,i,s=[],o=!0,c=!1;try{if(u=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;o=!1}else for(;!(o=(r=u.call(t)).done)&&(s.push(r.value),s.length!==n);o=!0);}catch(e){c=!0,a=e}finally{try{if(!o&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,n)||function(e,n){if(e){if("string"==typeof e)return i(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function s(e,n,t,r,a,u,i){try{var s=e[u](i),o=s.value}catch(e){return void t(e)}s.done?n(o):Promise.resolve(o).then(r,a)}function o(e){return function(){var n=this,t=arguments;return new Promise(function(r,a){var u=e.apply(n,t);function i(e){s(u,r,a,i,o,"next",e)}function o(e){s(u,r,a,i,o,"throw",e)}i(void 0)})}}var c=t(697),d=function(){var e=o(r().m(function e(n){var t,a,i,s,o,d,p,l;return r().w(function(e){for(;;)switch(e.n){case 0:return t=[n.user_id],a=n.page?n.page:1,i=50*(a-1),(s=new Date(n.todate)).setDate(s.getDate()+1),o="SELECT  tbl_ac_stat.`id`, `uid`, `amount`, `up_line`, `type`, `from`, `to`, `previous_bal`, `new_bal`, tbl_ac_stat.`mode_id`, tbl_ac_stat.`market_id`, tbl_ac_stat.`event_id`, `previous_gen`, `remark`, `deleted`, `revoke`, tbl_ac_stat.`created_at` from tbl_ac_stat ",o+=" WHERE uid =? ","settlement"===n.type&&(o+=" AND tbl_ac_stat.mode_id = -1"),"balance"===n.type&&(o+=" AND tbl_ac_stat.mode_id = 0 "),"game"===n.type&&(!n.mode||n.mode&&"all"===n.mode?o+=" AND tbl_ac_stat.mode_id NOT IN (0) ":(o+=" AND tbl_ac_stat.mode_id IN(?)",t.push([n.mode,-1]))),"all"===n.type&&(n.role&&n.role>4?o+=" AND tbl_ac_stat.mode_id NOT IN (-1) ":o+=" AND tbl_ac_stat.mode_id NOT IN (0) "),n.event_id&&(o+=" AND tbl_ac_stat.event_id = ? ",t.push(n.event_id)),o+=" AND  created_at BETWEEN ? AND ? ",t.push(n.fromdate,s,i,50),o+="  ORDER BY `tbl_ac_stat`.`id` DESC LIMIT ?,?",e.n=1,c.query(o,t);case 1:return d=e.v,p=u(d,1),l=p[0],e.a(2,l)}},e)}));return function(n){return e.apply(this,arguments)}}(),p=function(){var e=o(r().m(function e(n){var t,a,u,i,s;return r().w(function(e){for(;;)if(0===e.n)return t=[],a=50*(n.page-1),(u=new Date(n.todate)).setDate(u.getDate()+1),i="SELECT subquery.play, subquery.event_id, subquery.amount, subquery.amt, subquery.up_line, subquery.created_at AS created_at, subquery.event FROM (SELECT tbl_default_markets.name as play,tbl_ac_stat.event_id, tbl_ac_stat.amount AS amt, amount, up_line, remark AS event, tbl_ac_stat.created_at AS created_at FROM tbl_ac_stat INNER JOIN tbl_default_markets ON tbl_default_markets.id = tbl_ac_stat.main_market_id WHERE 1 ",n.user_id&&(i+=" AND uid = ?",t.push(n.user_id)),n.fromdate&&(i+=" AND tbl_ac_stat.created_at BETWEEN ? AND ?",t.push(n.fromdate,u)),n.mode&&(i+="AND tbl_ac_stat.mode_id = ? ",t.push(n.mode)),i+="GROUP BY tbl_ac_stat.main_market_id) AS subquery ORDER BY `subquery`.`created_at` DESC LIMIT ?,?",t.push(a,50),s=c.query(i,t),e.a(2,s)},e)}));return function(n){return e.apply(this,arguments)}}(),l=function(){var e=o(r().m(function e(n){var t,a;return r().w(function(e){for(;;)switch(e.n){case 0:return t=[n.user_id],e.n=1,c.query("SELECT `tbl_ac_stat`.`main_market_id`,SUM(`amount`) as amount, SUM(`up_line`) as up_line , tbl_default_markets.name As play from tbl_ac_stat INNER JOIN tbl_default_markets ON tbl_default_markets.id = tbl_ac_stat.main_market_id WHERE uid =? GROUP BY `tbl_ac_stat`.`main_market_id` ORDER BY `tbl_ac_stat`.`main_market_id`",t);case 1:return a=e.v,e.a(2,a)}},e)}));return function(n){return e.apply(this,arguments)}}(),f=function(){var e=o(r().m(function e(n){var t,a,i,s,o;return r().w(function(e){for(;;)switch(e.n){case 0:return t=[],a="SELECT IF(users.u_role > 4,SUM(up_line)*(-1),SUM(up_line)) as amount,users.u_role,email as p_code,users.name FROM `tbl_ac_stat` INNER JOIN users ON users.id = tbl_ac_stat.uid WHERE 1 ","user_id"in n&&(a+=" AND users.parent_id = ? ",t.push(n.user_id)),"market_id"in n&&(a+=" AND tbl_ac_stat.market_id IN (?) ",t.push(n.market_id)),"event_id"in n&&(a+=" AND event_id=? ",t.push(n.event_id)),a+="  group by users.id",e.n=1,c.query(a,t);case 1:return i=e.v,s=u(i,1),o=s[0],e.a(2,o)}},e)}));return function(n){return e.apply(this,arguments)}}(),_=function(){var e=o(r().m(function e(n){var t,a,i,s,o;return r().w(function(e){for(;;)switch(e.n){case 0:return t=[],a="SELECT SUM(amount)*(-1) as amount,users.u_role,email as p_code,users.name FROM `tbl_ac_stat` INNER JOIN users ON users.id = tbl_ac_stat.uid WHERE 1 ","user_id"in n&&(a+=" AND tbl_ac_stat.uid = ? ",t.push(n.user_id)),"market_id"in n&&(a+=" AND tbl_ac_stat.market_id IN (?) ",t.push(n.market_id)),"event_id"in n&&(a+=" AND event_id=? ",t.push(n.event_id)),a+="  group by users.id",e.n=1,c.query(a,t);case 1:return i=e.v,s=u(i,1),o=s[0],e.a(2,o)}},e)}));return function(n){return e.apply(this,arguments)}}(),b=function(){var e=o(r().m(function e(n){var t,a,i,s,o;return r().w(function(e){for(;;)switch(e.n){case 0:return t=[],a="SELECT SUM(up_line) as amount,users.u_role,email as p_code,users.name FROM `tbl_ac_stat` INNER JOIN users ON users.id = tbl_ac_stat.uid WHERE 1","parent_id"in n&&(a+=" AND users.id = ? ",t.push(n.parent_id)),"market_id"in n&&(a+=" AND tbl_ac_stat.market_id IN (?) ",t.push(n.market_id)),"event_id"in n&&(a+=" AND event_id=? ",t.push(n.event_id)),a+="  group by users.id",e.n=1,c.query(a,t);case 1:return i=e.v,s=u(i,1),o=s[0],e.a(2,o)}},e)}));return function(n){return e.apply(this,arguments)}}(),y=function(){var e=o(r().m(function e(n){var t,a,i,s,o;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,c.getConnection();case 1:return t=e.v,e.n=2,t.beginTransaction();case 2:return e.p=2,e.n=3,c.query("INSERT INTO `tbl_ac_stat`(`uid`, `amount`,`part`,`comm_up`, `comm_down`, `up_line`,`down_line`,`type`, `from`, `to`, `previous_bal`, `new_bal`,`mode_id`,`market_id`,`event_id`,`previous_gen`,`remark`,`deleted`,`revoke`) VALUES ?",[n]);case 3:return e.n=4,e.v;case 4:return a=e.v,i=u(a,1),s=i[0],e.n=5,t.commit();case 5:return e.a(2,s);case 6:return e.p=6,o=e.v,e.n=7,t.rollback();case 7:throw o;case 8:return e.p=8,t.release(),e.f(8);case 9:return e.a(2)}},e,null,[[2,6,8,9]])}));return function(n){return e.apply(this,arguments)}}(),v=function(){var e=o(r().m(function e(n){var t,a,i;return r().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,c.query("SELECT  tbl_ac_stat.id, tbl_ac_stat.uid, tbl_ac_stat.amount, tbl_ac_stat.up_line, tbl_ac_stat.type, tbl_ac_stat.from, tbl_ac_stat.to, tbl_ac_stat.ref_id, tbl_ac_stat.previous_bal, tbl_ac_stat.new_bal, tbl_ac_stat.mode_id, tbl_ac_stat.market_id, tbl_ac_stat.event_id, tbl_ac_stat.previous_gen, tbl_ac_stat.remark, tbl_ac_stat.deleted, tbl_ac_stat.revoke, tbl_ac_stat.updated_at, tbl_ac_stat.created_at, tbl_ac_stat.tally,users.u_role from tbl_ac_stat JOIN users ON users.id = tbl_ac_stat.uid WHERE tbl_ac_stat.market_id=?  AND tbl_ac_stat.revoke=1",[n]);case 1:return t=e.v,a=u(t,1),i=a[0],e.a(2,i)}},e)}));return function(n){return e.apply(this,arguments)}}(),m=function(){var e=o(r().m(function e(n){var t,a,i,s,o;return r().w(function(e){for(;;)switch(e.n){case 0:return t=[],a="UPDATE `tbl_ac_stat` SET ","revoke"in n&&(a+=" tbl_ac_stat.revoke=? ",t.push(n.revoke)),t.push(n.market_id),a+=" WHERE tbl_ac_stat.market_id=? ",e.n=1,c.query(a,t);case 1:return i=e.v,s=u(i,1),o=s[0],e.a(2,o)}},e)}));return function(n){return e.apply(this,arguments)}}(),h=function(){var e=o(r().m(function e(n){var t,a;return r().w(function(e){for(;;)switch(e.n){case 0:return t=[n.user_id],e.n=1,c.query("SELECT SUM(amount) as gt FROM tbl_ac_stat WHERE tbl_ac_stat.uid =? AND tbl_ac_stat.market_id > 0 ",t);case 1:return a=e.v,e.a(2,a)}},e)}));return function(n){return e.apply(this,arguments)}}();e.exports={getAccountStatement:d,getEventGenChild:f,getEventGenSelf:_,getEventGenParent:b,addAccountEntry:y,getAccountEntry:v,updateAccountEntry:m,getPl:p,getAcSum:l,grandPL:h}},229:e=>{"use strict";e.exports=require("node-fetch")},230:(e,n,t)=>{var r=t(252).Router(),a=t(456),u=a.authenticateToken,i=(a.authenticateIP,t(416).errorHandlerMiddleware),s=t(808),o=s.getEventsAll,c=s.addEvent,d=s.updateEvent,p=s.delEvent,l=s.lockEvent,f=s.lockMarket,_=s.getDefaultMarkets,b=s.createMarket,y=s.delMarket;r.post("/getEventsAll",u,o),r.post("/addevent",u,c),r.post("/updateEvent",u,d),r.post("/delEvent",u,p),r.post("/updateEventStatus",u,l),r.post("/lockMarket",u,f),r.post("/getDefaultMrkt",u,_),r.post("/createMarket",u,b),r.post("/delMarket",u,y),r.use(i),e.exports=r},236:e=>{"use strict";e.exports=require("console")},241:(e,n,t)=>{const r=t(896),a=t(128),u=t(644)("expressexample:server"),i=t(611),s=t(692);t(818).config();const o=function(e){var n=parseInt(e,10);return isNaN(n)?e:n>=0&&n}(process.env.PORT||"3000");a.set("port",o);const c="development"===a.get("env")?"":{key:r.readFileSync("/etc/letsencrypt/live/www.royalrunbet.com/privkey.pem"),cert:r.readFileSync("/etc/letsencrypt/live/www.royalrunbet.com/fullchain.pem")},d="development"===a.get("env")?i.createServer(a):s.createServer(c,a);d.listen(o),d.on("error",function(e){if("listen"!==e.syscall)throw e;var n="string"==typeof o?"Pipe "+o:"Port "+o;switch(e.code){case"EACCES":console.error(n+" requires elevated privileges"),process.exit(1);break;case"EADDRINUSE":console.error(n+" is already in use"),process.exit(1);break;default:throw e}}),d.on("listening",function(){var e=d.address(),n="string"==typeof e?"pipe "+e:"port "+e.port;u("Listening on "+n)})},252:e=>{"use strict";e.exports=require("express")},263:(e,n,t)=>{function r(){var e,n,t="function"==typeof Symbol?Symbol:{},u=t.iterator||"@@iterator",i=t.toStringTag||"@@toStringTag";function s(t,r,u,i){var s=r&&r.prototype instanceof c?r:c,d=Object.create(s.prototype);return a(d,"_invoke",function(t,r,a){var u,i,s,c=0,d=a||[],p=!1,l={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(n,t){return u=n,i=0,s=e,l.n=t,o}};function f(t,r){for(i=t,s=r,n=0;!p&&c&&!a&&n<d.length;n++){var a,u=d[n],f=l.p,_=u[2];t>3?(a=_===r)&&(s=u[(i=u[4])?5:(i=3,3)],u[4]=u[5]=e):u[0]<=f&&((a=t<2&&f<u[1])?(i=0,l.v=r,l.n=u[1]):f<_&&(a=t<3||u[0]>r||r>_)&&(u[4]=t,u[5]=r,l.n=_,i=0))}if(a||t>1)return o;throw p=!0,r}return function(a,d,_){if(c>1)throw TypeError("Generator is already running");for(p&&1===d&&f(d,_),i=d,s=_;(n=i<2?e:s)||!p;){u||(i?i<3?(i>1&&(l.n=-1),f(i,s)):l.n=s:l.v=s);try{if(c=2,u){if(i||(a="next"),n=u[a]){if(!(n=n.call(u,s)))throw TypeError("iterator result is not an object");if(!n.done)return n;s=n.value,i<2&&(i=0)}else 1===i&&(n=u.return)&&n.call(u),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);u=e}else if((n=(p=l.n<0)?s:t.call(r,l))!==o)break}catch(n){u=e,i=1,s=n}finally{c=1}}return{value:n,done:p}}}(t,u,i),!0),d}var o={};function c(){}function d(){}function p(){}n=Object.getPrototypeOf;var l=[][u]?n(n([][u]())):(a(n={},u,function(){return this}),n),f=p.prototype=c.prototype=Object.create(l);function _(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,a(e,i,"GeneratorFunction")),e.prototype=Object.create(f),e}return d.prototype=p,a(f,"constructor",p),a(p,"constructor",d),d.displayName="GeneratorFunction",a(p,i,"GeneratorFunction"),a(f),a(f,i,"Generator"),a(f,u,function(){return this}),a(f,"toString",function(){return"[object Generator]"}),(r=function(){return{w:s,m:_}})()}function a(e,n,t,r){var u=Object.defineProperty;try{u({},"",{})}catch(e){u=0}a=function(e,n,t,r){if(n)u?u(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t;else{var i=function(n,t){a(e,n,function(e){return this._invoke(n,t,e)})};i("next",0),i("throw",1),i("return",2)}},a(e,n,t,r)}function u(e,n,t,r,a,u,i){try{var s=e[u](i),o=s.value}catch(e){return void t(e)}s.done?n(o):Promise.resolve(o).then(r,a)}function i(e){return function(){var n=this,t=arguments;return new Promise(function(r,a){var i=e.apply(n,t);function s(e){u(i,r,a,s,o,"next",e)}function o(e){u(i,r,a,s,o,"throw",e)}s(void 0)})}}var s=t(697),o=(t(229),function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT event_id, market_id, event_name, team1, team2, opendate, type, runnerName1, runnerName2, status, bet_lock FROM tbl_events WHERE event_id=? ORDER BY id desc",[n]))},e)}));return function(n){return e.apply(this,arguments)}}()),c=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT id, event_id, market_id, event_name, opendate, closedate, status, bet_lock, status As parent_status, bet_lock As parent_bet_lock, type, runnerName1, runnerName2, results, team1, team2 FROM tbl_events WHERE status=1 ORDER BY id desc",[n]))},e)}));return function(n){return e.apply(this,arguments)}}(),d=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT event_id, event_name, team1, team2, opendate, closedate, weak_team, status, bet_lock, type FROM tbl_events WHERE event_id=? LIMIT 1",[n]))},e)}));return function(n){return e.apply(this,arguments)}}(),p=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT id, event_id, user_id, status, bet_lock FROM tbl_default_event WHERE user_id IN (?) ORDER BY user_id, updated_at desc",[n]))},e)}));return function(n){return e.apply(this,arguments)}}(),l=function(){var e=i(r().m(function e(n,t){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT id, event_id, market_id, name, team, main_market_id, sequence FROM tbl_runners WHERE event_id=? AND market_id IN (?) ORDER BY team, sequence asc",[n,t]))},e)}));return function(n,t){return e.apply(this,arguments)}}(),f=function(){var e=i(r().m(function e(n,t){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT id, event_id, market_id, name, team, main_market_id, sequence FROM tbl_runners WHERE event_id=? AND main_market_id = ? ORDER BY team, sequence asc",[n,t]))},e)}));return function(n,t){return e.apply(this,arguments)}}(),_=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("INSERT INTO `tbl_runners`(`event_id`,`market_id`, `name`, `sequence`, `team`, `main_market_id`) VALUES (?,?,?,?,?,?)  ON DUPLICATE KEY UPDATE updated_at = VALUES(updated_at)",[n.event_id,n.market_id,n.name,n.seq,n.team,n.main_market_id]))},e)}));return function(n){return e.apply(this,arguments)}}(),b=function(){var e=i(r().m(function e(n){var t;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.a(2,s.query("INSERT INTO tbl_runners (event_id, market_id, name, sequence, team, main_market_id) VALUES ? ON DUPLICATE KEY UPDATE updated_at = VALUES(updated_at)",[n]));case 1:e.p=1,t=e.v,next(t);case 2:return e.a(2)}},e,null,[[0,1]])}));return function(n){return e.apply(this,arguments)}}(),y=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT tbl_markets.id, tbl_markets.event_id, tbl_markets.market_name, tbl_markets.runner_count, tbl_markets.exp, tbl_markets.main_market_id, tbl_default_markets.visible, tbl_default_markets.locked, tbl_default_markets.visible As parent_visible, tbl_default_markets.locked As parent_locked FROM tbl_markets LEFT JOIN tbl_default_markets ON tbl_markets.main_market_id = tbl_default_markets.id WHERE tbl_markets.event_id=? ORDER BY tbl_default_markets.display_order",[n]))},e)}));return function(n){return e.apply(this,arguments)}}(),v=function(){var e=i(r().m(function e(n,t){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT tbl_markets.id, tbl_markets.event_id, tbl_markets.market_name, tbl_markets.runner_count, tbl_markets.exp, tbl_markets.main_market_id, tbl_default_markets.visible, tbl_default_markets.locked, tbl_default_markets.visible As parent_visible, tbl_default_markets.locked As parent_locked FROM tbl_markets LEFT JOIN tbl_default_markets ON tbl_markets.main_market_id = tbl_default_markets.id WHERE tbl_markets.event_id=? AND tbl_markets.main_market_id IN (?) ORDER BY tbl_markets.id",[n,t]))},e)}));return function(n,t){return e.apply(this,arguments)}}(),m=function(){var e=i(r().m(function e(n,t){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT event_id, market_id, user_id, type_name, visible, locked FROM tbl_default_type WHERE event_id=? AND user_id IN (?) ORDER BY user_id desc",[n,t]))},e)}));return function(n,t){return e.apply(this,arguments)}}(),h=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("INSERT INTO `tbl_runners_users`(`event_id`,`market_id`, `runnerId`, `user_id`, `runner_name`, `sequence`, `team`, `type`, `exp`, `event_type`, `main_market_id`, `parent`, `part_chain`) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?)  ON DUPLICATE KEY UPDATE updated_at = VALUES(updated_at)",[n.event_id,n.market_id,n.runnerId,n.user_id,n.runner_name,n.sequence,n.team,n.type,n.exp,n.eventType,n.main_market_id,n.parent_id,n.part_chain]))},e)}));return function(n){return e.apply(this,arguments)}}(),k=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("INSERT INTO `tbl_runners_users`(`event_id`,`market_id`, `runnerId`, `user_id`, `runner_name`, `sequence`, `team`, `type`, `odd_even`, `exp`, `event_type`, `main_market_id`, `parent`, `part_chain`) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?)  ON DUPLICATE KEY UPDATE updated_at = VALUES(updated_at)",[n.event_id,n.market_id,n.runnerId,n.user_id,n.runner_name,n.sequence,n.team,n.type,n.odd_even,n.exp,n.eventType,n.main_market_id,n.parent_id,n.part_chain]))},e)}));return function(n){return e.apply(this,arguments)}}(),E=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("INSERT INTO `tbl_runners_users`(`event_id`,`market_id`, `runnerId`, `user_id`, `runner_name`, `sequence`, `team`, `type`, `run_digit`, `exp`, `amount`, `event_type`, `main_market_id`, `status`, `parent`, `part_chain`) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)  ON DUPLICATE KEY UPDATE updated_at = VALUES(updated_at)",[n.event_id,n.market_id,n.runnerId,n.user_id,n.runner_name,n.sequence,n.team,n.type,n.run_digit,n.exp,n.amount,n.eventType,n.main_market_id,n.status,n.parent_id,n.part_chain]))},e)}));return function(n){return e.apply(this,arguments)}}(),g=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT event_id, market_id, runnerId, user_id, sequence, team, type, exp, event_type FROM tbl_runners_users WHERE event_id=? AND market_id=? AND user_id=? ORDER BY runnerId",[n.event_id,n.market_id,n.user_id]))},e)}));return function(n){return e.apply(this,arguments)}}(),w=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT id, event_id, market_id, name, team, sequence FROM tbl_runners WHERE event_id=? AND market_id=? AND id NOT IN (?) ORDER BY team, sequence asc",[n.event_id,n.market_id,n.selectedIds]))},e)}));return function(n){return e.apply(this,arguments)}}(),O=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT id, event_id, market_id, name, team, sequence FROM tbl_runners WHERE event_id=? AND market_id=? AND id IN (?) ORDER BY sequence asc LIMIT 1",[n.event_id,n.market_id,n.unSelIds]))},e)}));return function(n){return e.apply(this,arguments)}}(),R=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT event_id, market_id, runnerId, user_id, runner_name, sequence, team, type, odd_even, exp, status, updated_at FROM tbl_runners_users WHERE event_id=? AND user_id=? ORDER BY id",[n.event_id,n.user_id]))},e)}));return function(n){return e.apply(this,arguments)}}(),S=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT event_id, market_id, runnerId, user_id, runner_name, sequence, team, type, run_digit, exp, status, updated_at FROM tbl_runners_users WHERE event_id=? AND main_market_id = ? AND user_id=? ORDER BY id",[n.event_id,n.main_market_id,n.user_id]))},e)}));return function(n){return e.apply(this,arguments)}}(),T=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT event_id, market_id, runnerId, user_id, runner_name, sequence, team, type, run_digit, exp, status, updated_at FROM tbl_runners_users WHERE event_id=? AND main_market_id = ? AND user_id=? AND status = 'SELECTED' ORDER BY id",[n.event_id,n.main_market_id,n.user_id]))},e)}));return function(n){return e.apply(this,arguments)}}(),N=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT event_id, market_id, runnerId, user_id, runner_name, sequence, team, main_market_id, type, amount, exp, status, updated_at FROM tbl_runners_users WHERE event_id=? AND market_id=? AND user_id=? ORDER BY id",[n.event_id,n.market_id,n.user_id]))},e)}));return function(n){return e.apply(this,arguments)}}(),I=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("DELETE FROM `tbl_runners_users` where event_id = ? AND market_id=? AND user_id=?",[n.event_id,n.market_id,n.user_id]))},e)}));return function(n){return e.apply(this,arguments)}}(),A=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("DELETE FROM `tbl_runners_users` where event_id = ? AND market_id=? AND runnerId=? AND user_id=?",[n.event_id,n.market_id,n.runnerId,n.user_id]))},e)}));return function(n){return e.apply(this,arguments)}}(),P=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT uid, amount, exposer, locked FROM tbl_balance WHERE uid = ? ORDER BY id LIMIT 1",[n.user_id]))},e)}));return function(n){return e.apply(this,arguments)}}(),U=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("UPDATE `tbl_runners_users` SET amount = ?, status = 'SELECTED' where event_id = ? AND market_id = ? AND user_id = ?",[n.amount,n.event_id,n.market_id,n.user_id]))},e)}));return function(n){return e.apply(this,arguments)}}(),D=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT event_id, market_id, runnerId, user_id, runner_name, sequence, team, type, exp, status, updated_at FROM tbl_runners_users WHERE status='SELECTED' AND event_id=? AND market_id=? AND user_id=? ORDER BY id",[n.event_id,n.market_id,n.user_id]))},e)}));return function(n){return e.apply(this,arguments)}}(),M=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT event_id, market_id, user_id, main_market_id FROM tbl_runners_users WHERE event_id=? AND user_id=? AND type='user' GROUP BY market_id",[n.event_id,n.user_id]))},e)}));return function(n){return e.apply(this,arguments)}}(),C=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT MAX(event_id), market_id, MAX(user_id), MAX(amount) AS amt, MAX(exp) AS total_exp, MAX(main_market_id) AS main_market_id FROM tbl_runners_users WHERE event_id=? AND user_id=? AND type='user' AND main_market_id NOT IN (9) GROUP BY market_id",[n.event_id,n.user_id]))},e)}));return function(n){return e.apply(this,arguments)}}(),L=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT MAX(event_id), market_id, MAX(user_id), MAX(amount) AS amt, SUM(exp) AS total_exp, MAX(main_market_id) AS main_market_id FROM tbl_runners_users WHERE event_id=? AND user_id=? AND type='user' AND main_market_id IN (9,3)  GROUP BY market_id",[n.event_id,n.user_id]))},e)}));return function(n){return e.apply(this,arguments)}}(),j=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT MAX(a.event_id) AS event_id, a.market_id, a.main_market_id, a.amount, MAX(b.market_name) AS market_name FROM tbl_runners_users a INNER JOIN tbl_markets b ON a.market_id = b.id WHERE a.user_id IN (?) AND a.type='user' AND a.status='SELECTED' GROUP BY a.market_id ORDER BY a.market_id",[n]))},e)}));return function(n){return e.apply(this,arguments)}}(),B=function(){var e=i(r().m(function e(n,t){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT MAX(a.event_id) AS event_id, a.market_id, b.main_market_id, MAX(b.market_name) AS market_name FROM tbl_runners_users a INNER JOIN tbl_markets b ON a.market_id = b.id WHERE a.user_id IN (?) AND a.event_id = ? AND a.type='user' AND a.status='SELECTED' GROUP BY a.market_id ORDER BY a.market_id",[n,t]))},e)}));return function(n,t){return e.apply(this,arguments)}}(),x=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT a.event_id, a.market_id, a.runner_name, a.runnerId, a.user_id, a.type, a.odd_even, a.run_digit, a.amount, b.market_name, c.email FROM tbl_runners_users a LEFT JOIN tbl_markets b ON a.market_id = b.id INNER JOIN users c ON a.user_id = c.id WHERE a.user_id IN (?) AND a.status='SELECTED' ORDER BY a.id",[n]))},e)}));return function(n){return e.apply(this,arguments)}}(),q=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT a.event_id, a.market_id, a.name, a.id, a.team, b.market_name FROM tbl_runners a LEFT JOIN tbl_markets b ON a.market_id = b.id WHERE a.event_id IN (?) ORDER BY a.team, a.sequence",[n]))},e)}));return function(n){return e.apply(this,arguments)}}(),W=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT a.event_id, a.main_market_id, a.market_name, a.id FROM tbl_markets a WHERE a.event_id IN (?) ORDER BY a.main_market_id",[n]))},e)}));return function(n){return e.apply(this,arguments)}}(),F=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT event_id, t1, t2, market_name, result_type, main_market_id, result FROM tbl_results WHERE event_id IN (?) AND revoked = 0 ORDER BY id",[n]))},e)}));return function(n){return e.apply(this,arguments)}}(),J=function(){var e=i(r().m(function e(n,t){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT event_id, t1, t2, market_name, result_type, main_market_id, result FROM tbl_results WHERE event_id = ? AND main_market_id = ?ORDER BY id",[n,t]))},e)}));return function(n,t){return e.apply(this,arguments)}}(),V=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT id, name, email from users WHERE id IN (?)",[n]))},e)}));return function(n){return e.apply(this,arguments)}}(),G=function(){var e=i(r().m(function e(n,t){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT event_id, MAX(market_id), MAX(user_id), MAX(exp * amount) AS total_exp FROM tbl_runners_users WHERE event_id IN (?) AND user_id IN (?) AND type='user' AND status='SELECTED' GROUP BY event_id ORDER BY event_id",[n,t]))},e)}));return function(n,t){return e.apply(this,arguments)}}(),H=function(){var e=i(r().m(function e(n,t){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT event_id, market_id, MAX(user_id) AS user_id, (exp * amount) AS total_exp FROM tbl_runners_users WHERE result = 0 AND event_id IN (?) AND user_id IN (?) AND type='user' AND status='SELECTED' GROUP BY market_id ORDER BY market_id",[n,t]))},e)}));return function(n,t){return e.apply(this,arguments)}}(),Y=function(){var e=i(r().m(function e(n,t){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT event_id, market_id, MAX(user_id) AS user_id, SUM(exp * amount) AS total_exp, main_market_id FROM tbl_runners_users WHERE result = 0 AND event_id IN (?) AND user_id IN (?) AND type='user' AND status='SELECTED' GROUP BY market_id ORDER BY market_id",[n,t]))},e)}));return function(n,t){return e.apply(this,arguments)}}(),K=function(){var e=i(r().m(function e(n){var t;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.a(2,s.query("INSERT INTO tbl_balance (uid,exposer) VALUES ? ON DUPLICATE KEY UPDATE exposer = exposer + VALUES(exposer)",[n]));case 1:e.p=1,t=e.v,next(t);case 2:return e.a(2)}},e,null,[[0,1]])}));return function(n){return e.apply(this,arguments)}}(),z=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("INSERT INTO `tbl_default_event`(`event_id`, `user_id`, `admin_id`, `status`, `bet_lock`) VALUES (?,?,?,?,?)  ON DUPLICATE KEY UPDATE bet_lock = VALUES(bet_lock), status = VALUES(status), updated_at = VALUES(updated_at)",[n.event_id,n.user_id,n.admin_id,n.status,n.bet_lock]))},e)}));return function(n){return e.apply(this,arguments)}}(),X=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("INSERT INTO `tbl_default_type`(`type_name`, `event_id`, `market_id`, `user_id`, `admin_id`, `visible`, `locked`) VALUES (?,?,?,?,?,?,?)  ON DUPLICATE KEY UPDATE locked = VALUES(locked), visible = VALUES(visible), updated_at = VALUES(updated_at)",[n.type_name,n.event_id,n.market_id,n.user_id,n.admin_id,n.visible,n.locked]))},e)}));return function(n){return e.apply(this,arguments)}}(),Q=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT event_id, market_id, event_name, type AS event_type FROM tbl_events WHERE event_id IN (?) ORDER BY id desc",[n]))},e)}));return function(n){return e.apply(this,arguments)}}(),Z=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT uid, b_name, b_value FROM tbl_buttons WHERE uid = ? ORDER BY id",[n]))},e)}));return function(n){return e.apply(this,arguments)}}(),$=function(){var e=i(r().m(function e(n,t){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT uid, b_name, b_value FROM tbl_buttons WHERE uid = ? AND main_market_id = ? AND status = 1 ORDER BY id",[n,t]))},e)}));return function(n,t){return e.apply(this,arguments)}}(),ee=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("WITH RECURSIVE parent_cte (id, parent_id, u_role) AS ( SELECT id, parent_id, name FROM users WHERE id = ? UNION ALL SELECT t.id, t.parent_id, t.u_role FROM users t JOIN parent_cte pc ON pc.parent_id = t.id ) SELECT parent_cte.id, parent_cte.parent_id,tbl_partnership.part,tbl_partnership.visible FROM parent_cte LEFT JOIN tbl_partnership ON tbl_partnership.child_id = parent_cte.id WHERE 1 AND tbl_partnership.play_mode = 4 ORDER BY id DESC",[n]))},e)}));return function(n){return e.apply(this,arguments)}}(),ne=function(){var e=i(r().m(function e(n,t){var a;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.a(2,s.query("INSERT INTO tbl_part_chain (uid,chain) VALUES (?,?) ON DUPLICATE KEY UPDATE uid = VALUES(uid), chain = VALUES(chain)",[n,t]));case 1:e.p=1,a=e.v,next(a);case 2:return e.a(2)}},e,null,[[0,1]])}));return function(n,t){return e.apply(this,arguments)}}(),te=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT uid, amount, up_line, down_line, type, previous_bal, new_bal, market_id, event_id, remark, created_at FROM tbl_ac_stat WHERE uid=? ORDER BY created_at desc",[n]))},e)}));return function(n){return e.apply(this,arguments)}}(),re=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT uid, chain FROM tbl_part_chain WHERE uid IN (?) ORDER BY uid DESC",[n]))},e)}));return function(n){return e.apply(this,arguments)}}(),ae=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT event_id, uid, result, t1, t2, market_name, result_type, updated_at FROM tbl_results WHERE event_id = ? ORDER BY id DESC",[n]))},e)}));return function(n){return e.apply(this,arguments)}}(),ue=function(){var e=i(r().m(function e(){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT event_id, uid, result, t1, t2, market_name, result_type, updated_at FROM tbl_results ORDER BY id DESC",[]))},e)}));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("INSERT INTO tbl_bets (user_id, email, event_name, event_id, market_id, main_market_id, r_id, r_name, team_id, team_name, amount, type, exp, ip_addr, device_info) VALUES ? ON DUPLICATE KEY UPDATE updated_at = VALUES(updated_at)",[n]))},e)}));return function(n){return e.apply(this,arguments)}}(),se=function(){var e=i(r().m(function e(n){var t,a;return r().w(function(e){for(;;)switch(e.n){case 0:if(0!==n.length){e.n=1;break}return e.a(2,[]);case 1:return t=n.map(function(){return"?"}).join(","),a="\n        SELECT email, event_name, event_id, market_id, r_name, team_name, amount, type, created_at, tbl_default_markets.name as market_name\n        FROM tbl_bets\n        LEFT JOIN tbl_default_markets ON tbl_default_markets.id = tbl_bets.main_market_id\n        WHERE user_id IN (".concat(t,")\n        ORDER BY created_at DESC\n    "),e.a(2,s.query(a,n))}},e)}));return function(n){return e.apply(this,arguments)}}();e.exports={getEventByEventIDArray:Q,getEventByEventID:o,getEvents:c,getPlayers:l,addPlayer:_,addPlayerAll:b,getMarkets:y,getMarketsC:v,getMarketsType:m,addRunner:h,getSelRunners:g,getUnSelRunnersAll:w,getUnSelRunners:O,getSelectedRunnersAll:R,getSelectedRunnersSingle:S,getSelectedRunnersSingle2:T,getSelRunnersByMarket:N,delRunnerRel:I,delRunnerSingalRel:A,getBalance:P,confirmPlayers:U,getConfirmPlayers:D,getMarketsByUid:M,getExpByMarket:C,getExpByBet:L,getMyMarkets:j,getMyMarketsByEvent:B,getMyPlayers:x,getMyPlayerName:V,getExpEventIDs:G,getExpByEvent:H,getExpByEventSingleBet:Y,updateMainExp:K,lockEventInnerType:z,getEventStatus:d,getEventDefaultParent:p,updateMarketStatus:X,getButtons:Z,getButtonsByMK:$,getPartnerships:ee,updatePartChain:ne,getAC:te,getPartChain:re,getResults:ae,getResultsAll:ue,getScore:F,getScoreByMK:J,getPlayersAll:q,getPlayersByMK:f,getMarketsAll:W,addBets:ie,getBets:se,addRunnerOddEven:k,addRunnerScore:E}},299:(e,n,t)=>{function r(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,u,i,s=[],o=!0,c=!1;try{if(u=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;o=!1}else for(;!(o=(r=u.call(t)).done)&&(s.push(r.value),s.length!==n);o=!0);}catch(e){c=!0,a=e}finally{try{if(!o&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,n)||function(e,n){if(e){if("string"==typeof e)return a(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?a(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function u(){var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",a=t.toStringTag||"@@toStringTag";function s(t,r,a,u){var s=r&&r.prototype instanceof c?r:c,d=Object.create(s.prototype);return i(d,"_invoke",function(t,r,a){var u,i,s,c=0,d=a||[],p=!1,l={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(n,t){return u=n,i=0,s=e,l.n=t,o}};function f(t,r){for(i=t,s=r,n=0;!p&&c&&!a&&n<d.length;n++){var a,u=d[n],f=l.p,_=u[2];t>3?(a=_===r)&&(s=u[(i=u[4])?5:(i=3,3)],u[4]=u[5]=e):u[0]<=f&&((a=t<2&&f<u[1])?(i=0,l.v=r,l.n=u[1]):f<_&&(a=t<3||u[0]>r||r>_)&&(u[4]=t,u[5]=r,l.n=_,i=0))}if(a||t>1)return o;throw p=!0,r}return function(a,d,_){if(c>1)throw TypeError("Generator is already running");for(p&&1===d&&f(d,_),i=d,s=_;(n=i<2?e:s)||!p;){u||(i?i<3?(i>1&&(l.n=-1),f(i,s)):l.n=s:l.v=s);try{if(c=2,u){if(i||(a="next"),n=u[a]){if(!(n=n.call(u,s)))throw TypeError("iterator result is not an object");if(!n.done)return n;s=n.value,i<2&&(i=0)}else 1===i&&(n=u.return)&&n.call(u),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);u=e}else if((n=(p=l.n<0)?s:t.call(r,l))!==o)break}catch(n){u=e,i=1,s=n}finally{c=1}}return{value:n,done:p}}}(t,a,u),!0),d}var o={};function c(){}function d(){}function p(){}n=Object.getPrototypeOf;var l=[][r]?n(n([][r]())):(i(n={},r,function(){return this}),n),f=p.prototype=c.prototype=Object.create(l);function _(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return d.prototype=p,i(f,"constructor",p),i(p,"constructor",d),d.displayName="GeneratorFunction",i(p,a,"GeneratorFunction"),i(f),i(f,a,"Generator"),i(f,r,function(){return this}),i(f,"toString",function(){return"[object Generator]"}),(u=function(){return{w:s,m:_}})()}function i(e,n,t,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}i=function(e,n,t,r){if(n)a?a(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t;else{var u=function(n,t){i(e,n,function(e){return this._invoke(n,t,e)})};u("next",0),u("throw",1),u("return",2)}},i(e,n,t,r)}function s(e,n,t,r,a,u,i){try{var s=e[u](i),o=s.value}catch(e){return void t(e)}s.done?n(o):Promise.resolve(o).then(r,a)}function o(e){return function(){var n=this,t=arguments;return new Promise(function(r,a){var u=e.apply(n,t);function i(e){s(u,r,a,i,o,"next",e)}function o(e){s(u,r,a,i,o,"throw",e)}i(void 0)})}}var c=t(697),d=function(){var e=o(u().m(function e(n){return u().w(function(e){for(;;)if(0===e.n)return e.a(2,c.query("SELECT users.id, users.email, users.u_role, users.parent_id, tbl_balance.amount, tbl_balance.exposer FROM users LEFT JOIN tbl_balance ON users.id = tbl_balance.uid WHERE users.email = ? LIMIT 1",[n]))},e)}));return function(n){return e.apply(this,arguments)}}(),p=function(){var e=o(u().m(function e(n){return u().w(function(e){for(;;)if(0===e.n)return e.a(2,c.query("SELECT id,u_role FROM users WHERE id = ? OR parent_id= ? and u_role =6",[n,n]))},e)}));return function(n){return e.apply(this,arguments)}}(),l=function(){var e=o(u().m(function e(n){return u().w(function(e){for(;;)if(0===e.n)return e.a(2,c.query("SELECT id,u_role,part,c_in,c_out FROM users WHERE id=? LIMIT 1",[n]))},e)}));return function(n){return e.apply(this,arguments)}}(),f=function(){var e=o(u().m(function e(n){return u().w(function(e){for(;;)if(0===e.n)return e.a(2,c.query("SELECT users.id, users.name, users.email, users.password, users.u_role, tbl_balance.amount, tbl_balance.exposer FROM users LEFT JOIN tbl_balance ON users.id = tbl_balance.uid WHERE users.email = ? LIMIT 1",[n]))},e)}));return function(n){return e.apply(this,arguments)}}(),_=function(){var e=o(u().m(function e(n){return u().w(function(e){for(;;)if(0===e.n)return e.a(2,c.query("INSERT INTO `users`(`parent_id`, `name`, `email`, `password`, `u_role`, `remark`, `mobile_number`) VALUES (?,?,?,?,?,?,?)",[n.parent_id,n.name,n.email,n.password,n.u_role,n.remark,n.mobile]))},e)}));return function(n){return e.apply(this,arguments)}}(),b=function(){var e=o(u().m(function e(n){return u().w(function(e){for(;;)if(0===e.n)return e.a(2,c.query("INSERT INTO tbl_balance (uid, amount) VALUES ? ON DUPLICATE KEY UPDATE amount = amount + VALUES(tbl_balance.amount)",[n]))},e)}));return function(n){return e.apply(this,arguments)}}(),y=function(){var e=o(u().m(function e(n,t){return u().w(function(e){for(;;)if(0===e.n)return e.a(2,c.query("UPDATE users SET part=? WHERE email = ?",[n,t]))},e)}));return function(n,t){return e.apply(this,arguments)}}(),v=function(){var e=o(u().m(function e(n){var t,r;return u().w(function(e){for(;;)if(0===e.n)return t=[n.user_id],r="SELECT users.id, users.name, users.email as p_code, users.u_role, tbl_balance.up_line, tbl_balance.amount, users.remark, users.webref, users.bet_lock, users.status, tbl_balance.pl, tbl_balance.exposer, tbl_partnership.part FROM users LEFT JOIN tbl_balance ON tbl_balance.uid = users.id LEFT JOIN tbl_partnership ON tbl_partnership.child_id = users.id WHERE u_role  IN (2,3,4,5,6) AND users.parent_id = ?","type"in n&&"ser"===n.type&&"uname"in n&&(r+=" AND  `users`.`email` LIKE  ?",t.push("%"+n.uname+"%")),r+=" ORDER BY `users`.`id` DESC",e.a(2,c.query(r,[t]))},e)}));return function(n){return e.apply(this,arguments)}}(),m=function(){var e=o(u().m(function e(n){var t;return u().w(function(e){for(;;)if(0===e.n)return t=[n],e.a(2,c.query("SELECT users.id, users.name, tbl_balance.up_line, tbl_balance.amount, tbl_partnership.part FROM users LEFT JOIN tbl_balance ON tbl_balance.uid = users.id LEFT JOIN tbl_partnership ON tbl_partnership.child_id = users.id WHERE u_role IN (2,3,4,5,6) AND users.parent_id = ? ORDER BY `users`.`id` DESC",[t]))},e)}));return function(n){return e.apply(this,arguments)}}(),h=function(){var e=o(u().m(function e(n){var t;return u().w(function(e){for(;;)if(0===e.n)return t=[n],e.a(2,c.query("\n    WITH RECURSIVE tableR (parent, idElement) AS (\n      -- Anchor member definition\n      SELECT e.parent_id, e.id\n      FROM users AS e\n      WHERE e.parent_id = ?\n      UNION ALL\n      -- Recursive member definition\n      SELECT e.parent_id, e.id\n      FROM users AS e\n      INNER JOIN tableR AS d ON e.parent_id = d.idElement\n    )\n    -- Statement that executes the CTE\n    SELECT idElement AS id\n    FROM tableR\n    ORDER BY idElement DESC\n  ",t))},e)}));return function(n){return e.apply(this,arguments)}}(),k=function(){var e=o(u().m(function e(n,t){var r,a,i;return u().w(function(e){for(;;)switch(e.n){case 0:return r=[n,t],a="WITH RECURSIVE child_hierarchy AS (\n        SELECT id, parent_id, u_role\n        FROM users\n        WHERE parent_id = ?\n        UNION ALL\n        SELECT u.id, u.parent_id, u.u_role\n        FROM users u\n        INNER JOIN child_hierarchy ch ON u.parent_id = ch.id\n      )\n      SELECT id, parent_id, u_role\n      FROM child_hierarchy\n      WHERE u_role IN (?)",console.log(a),e.n=1,c.query(a,r);case 1:return i=e.v,e.a(2,i)}},e)}));return function(n,t){return e.apply(this,arguments)}}(),E=function(){var e=o(u().m(function e(n,t){var r,a;return u().w(function(e){for(;;)if(0===e.n)return r=[n],a="SELECT id as user_id,name,email as p_code,u_role,part,c_in,c_out,remark,cutting FROM users WHERE parent_id = ? ",t&&(a+=" AND u_role = ?",r.push(t)),a+=" ORDER BY `users`.`id` DESC",e.a(2,c.query(a,r))},e)}));return function(n,t){return e.apply(this,arguments)}}(),g=function(){var e=o(u().m(function e(n){var t,r;return u().w(function(e){for(;;)if(0===e.n)return t=[n[0].id,n[0].id,n[0].id,n[0].parent_id],r="SELECT users.name,users.email as p_code,users.u_role,users.part,users.c_in,users.c_out, IF(users.u_role<>4 OR users.id=?,tbl_balance.amount*(-1),tbl_balance.general) as amount,remark, tbl_balance.tally FROM users INNER JOIN tbl_balance ON tbl_balance.uid =users.id  WHERE ref_id = ? OR users.id =?",3===n[0].u_role&&(r+=" OR users.id =?",t.push(n[0].parent_id)),r+=" ORDER BY `users`.`id` DESC",e.a(2,c.query(r,t))},e)}));return function(n){return e.apply(this,arguments)}}(),w=function(){var e=o(u().m(function e(n){var t,r;return u().w(function(e){for(;;)if(0===e.n)return t=[n.tally],r="UPDATE `tbl_balance` INNER JOIN `tbl_ac_stat` ON tbl_balance.uid = tbl_ac_stat.uid SET tbl_balance.tally=?",n.tally&&(r+=" ,tbl_ac_stat.tally=? ",t.push(n.tally)),t.push(n.uid),t.push(n.uid),r+=" WHERE tbl_balance.uid=? AND tbl_ac_stat.uid=?",e.a(2,c.query(r,t))},e)}));return function(n){return e.apply(this,arguments)}}(),O=function(){var e=o(u().m(function e(n){var t,r;return u().w(function(e){for(;;)if(0===e.n)return t=[],r="UPDATE `users` SET ","name"in n&&(t.push(n.name),r+=" users.name=?,"),"c_out"in n&&(t.push(n.c_out),r+=" users.c_out=?,"),"c_in"in n&&(t.push(n.c_in),r+=" users.c_in=?,"),"part"in n&&(t.push(n.part),r+=" users.part=?,"),"remark"in n&&(t.push(n.remark),r+=" users.remark=?"),r+=" WHERE users.email=?",t.push(n.email),e.a(2,c.query(r,t))},e)}));return function(n){return e.apply(this,arguments)}}(),R=function(){var e=o(u().m(function e(n){var t,r;return u().w(function(e){for(;;)if(0===e.n)return t=[],r="UPDATE `users` SET ","visible"in n&&(t.push(n.visible),r+=" users.status=?"),"locked"in n&&(t.push(n.locked),r+=" users.bet_lock=?"),r+=" WHERE users.id=?",t.push(n.user_id),e.a(2,c.query(r,t))},e)}));return function(n){return e.apply(this,arguments)}}(),S=function(){var e=o(u().m(function e(n){return u().w(function(e){for(;;)if(0===e.n)return e.a(2,c.query("SELECT uid, amount, exposer, locked FROM tbl_balance WHERE uid = ? ORDER BY id",[n.user_id]))},e)}));return function(n){return e.apply(this,arguments)}}(),T=function(){var e=o(u().m(function e(n){return u().w(function(e){for(;;)if(0===e.n)return e.a(2,c.query("WITH RECURSIVE parent_cte (id, parent_id, u_role) AS ( SELECT id, parent_id, name FROM users WHERE id = ? UNION ALL SELECT t.id, t.parent_id, t.u_role FROM users t JOIN parent_cte pc ON pc.parent_id = t.id ) SELECT parent_cte.id, parent_cte.parent_id,tbl_partnership.part,tbl_partnership.visible FROM parent_cte LEFT JOIN tbl_partnership ON tbl_partnership.child_id = parent_cte.id WHERE 1 AND tbl_partnership.play_mode = 4",[n]))},e)}));return function(n){return e.apply(this,arguments)}}(),N=function(){var e=o(u().m(function e(n,t){var r;return u().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,c.query("UPDATE users SET fcp=1,password=? WHERE id = ?",[n,t]);case 1:return r=e.v,e.a(2,r)}},e)}));return function(n,t){return e.apply(this,arguments)}}(),I=function(){var e=o(u().m(function e(n){var t,a,i;return u().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,c.query("UPDATE `users` SET status=0 where email=?",[n]);case 1:return t=e.v,a=r(t,1),i=a[0],e.a(2,i)}},e)}));return function(n){return e.apply(this,arguments)}}(),A=function(){var e=o(u().m(function e(n){var t;return u().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,c.query("INSERT INTO tbl_partnership (child_id, parent_id,part, com,visible,play_mode) VALUES ? ON DUPLICATE KEY UPDATE part = VALUES(tbl_partnership.part),visible = VALUES(tbl_partnership.visible)",[n]);case 1:return t=e.v,e.a(2,t)}},e)}));return function(n){return e.apply(this,arguments)}}(),P=function(){var e=o(u().m(function e(n){var t,a,i;return u().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,c.query("SELECT MAX(part) as max_part,play_mode as mode_id FROM `tbl_partnership` WHERE parent_id = ? GROUP by play_mode",[n]);case 1:return t=e.v,a=r(t,1),i=a[0],e.a(2,i)}},e)}));return function(n){return e.apply(this,arguments)}}(),U=function(){var e=o(u().m(function e(n){var t,a,i,s,o,d,p,l;return u().w(function(e){for(;;)switch(e.n){case 0:return t=Object.keys(n),a=t.join(","),i=t.map(function(){return"?"}).join(","),s="INSERT INTO tbl_default_type(".concat(a,") VALUES (").concat(i,")"),s+=" ON DUPLICATE KEY UPDATE ".concat(t.map(function(e){return"".concat(e," = VALUES(").concat(e,")")}).join(",")),o=t.map(function(e){return n[e]}),e.n=1,c.query(s,o);case 1:return d=e.v,p=r(d,1),l=p[0],e.a(2,l)}},e)}));return function(n){return e.apply(this,arguments)}}(),D=function(){var e=o(u().m(function e(n){var t,r;return u().w(function(e){for(;;)switch(e.n){case 0:return t=[n,4],e.n=1,c.query("WITH RECURSIVE parent_cte (id, parent_id, u_role) AS ( SELECT id, parent_id, name FROM users WHERE id = ? UNION ALL SELECT t.id, t.parent_id, t.u_role FROM users t JOIN parent_cte pc ON pc.parent_id = t.id ) SELECT parent_cte.id, parent_cte.parent_id,tbl_partnership.part,tbl_partnership.visible FROM parent_cte LEFT JOIN tbl_partnership ON tbl_partnership.child_id = parent_cte.id WHERE  1  AND tbl_partnership.play_mode = ? ORDER BY parent_cte.id DESC",t);case 1:return r=e.v,e.a(2,r)}},e)}));return function(n){return e.apply(this,arguments)}}(),M=function(){var e=o(u().m(function e(n){var t,a,i,s,o;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,c.getConnection();case 1:return t=e.v,e.n=2,t.beginTransaction();case 2:return e.p=2,e.n=3,c.query("INSERT INTO tbl_balance (uid,pl,net_pl,comm_up,comm_down,up_line,down_line) VALUES ? ON DUPLICATE KEY UPDATE comm_up = comm_up + VALUES(comm_up), comm_down = comm_down + VALUES(comm_down), pl = pl + VALUES(pl),net_pl = net_pl + VALUES(net_pl),up_line = up_line + VALUES(up_line),down_line = down_line + VALUES(down_line)",[n]);case 3:return a=e.v,i=r(a,1),s=i[0],e.n=4,t.commit();case 4:return e.a(2,s);case 5:return e.p=5,o=e.v,e.n=6,t.rollback();case 6:throw o;case 7:return e.p=7,t.release(),e.f(7);case 8:return e.a(2)}},e,null,[[2,5,7,8]])}));return function(n){return e.apply(this,arguments)}}(),C=function(){var e=o(u().m(function e(n){var t;return u().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,c.query("INSERT INTO tbl_balance (uid,amount,up_line,down_line,pocket) VALUES ? ON DUPLICATE KEY UPDATE amount = amount + VALUES(amount), up_line = up_line + VALUES(up_line), down_line = down_line + VALUES(down_line), pocket = pocket + VALUES(pocket)",[n]);case 1:return t=e.v,e.a(2,t)}},e)}));return function(n){return e.apply(this,arguments)}}(),L=function(){var e=o(u().m(function e(n){var t,a,i,s;return u().w(function(e){for(;;)switch(e.n){case 0:return t=[n],e.n=1,c.query("SELECT `b_name`, `b_value` FROM tbl_buttons WHERE uid = ? ORDER BY tbl_buttons.id",t);case 1:return a=e.v,i=r(a,1),s=i[0],e.a(2,s)}},e)}));return function(n){return e.apply(this,arguments)}}(),j=function(){var e=o(u().m(function e(n){var t,a,i;return u().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,c.query("DELETE FROM tbl_buttons WHERE `tbl_buttons`.`uid` = ?",[n]);case 1:return t=e.v,a=r(t,1),i=a[0],e.a(2,i)}},e)}));return function(n){return e.apply(this,arguments)}}(),B=function(){var e=o(u().m(function e(n){var t,a,i;return u().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,c.query("INSERT INTO tbl_buttons (uid,b_name,b_value) VALUES ?",[n]);case 1:return t=e.v,a=r(t,1),i=a[0],e.a(2,i)}},e)}));return function(n){return e.apply(this,arguments)}}(),x=function(){var e=o(u().m(function e(n){var t,r,a;return u().w(function(e){for(;;)switch(e.n){case 0:return t=[],r="UPDATE `users` SET fcp=0","new_password"in n&&(t.push(n.new_password),r+=", users.password=?"),r+=" WHERE users.id=?",t.push(n.user_id),e.n=1,c.query(r,t);case 1:return a=e.v,e.a(2,a)}},e)}));return function(n){return e.apply(this,arguments)}}(),q=function(){var e=o(u().m(function e(){var n,t,a;return u().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,c.query("SELECT `msg`,`updated_at` FROM `tbl_message` WHERE 1 LIMIT 1",[]);case 1:return n=e.v,t=r(n,1),a=t[0],e.a(2,a)}},e)}));return function(){return e.apply(this,arguments)}}(),W=function(){var e=o(u().m(function e(n){var t;return u().w(function(e){for(;;)if(0===e.n)return t=c.query("SELECT users.id,name,email,password,u_role,amount,up_line,down_line,pocket,net_pl,exposer,webref,parent_id FROM users LEFT JOIN tbl_balance ON tbl_balance.uid = users.id WHERE u_role IN(1,2,3,4,5) AND users.id = ? AND status=1 LIMIT 1",[n]),e.a(2,t)},e)}));return function(n){return e.apply(this,arguments)}}(),F=function(){var e=o(u().m(function e(n){return u().w(function(e){for(;;)if(0===e.n)return e.a(2,c.query("INSERT INTO `tbl_log`(`u_name`, `password`, `ip_addr`,`device_info`, `last_session`, `status`, `loc`) VALUES (?,?,?,?,?,?,?)",[n.email,n.password,n.ip,n.bro,n.last_session,n.status,n.loc]))},e)}));return function(n){return e.apply(this,arguments)}}(),J=function(){var e=o(u().m(function e(n){return u().w(function(e){for(;;)if(0===e.n)return e.a(2,c.query("INSERT INTO `tbl_ac_stat`(`uid`, `amount`,`part`,`up_line`,`down_line`,`type`, `u_from`, `u_to`, `previous_bal`, `new_bal`,`mode_id`,`market_id`,`event_id`,`previous_gen`,`remark`,`deleted`,`revoked`) VALUES ? ON DUPLICATE KEY UPDATE part = VALUES(tbl_ac_stat.part)",[n]))},e)}));return function(n){return e.apply(this,arguments)}}(),V=function(){var e=o(u().m(function e(n){var t,r,a=arguments;return u().w(function(e){for(;;)switch(e.n){case 0:return t="SELECT tbl_mode.play, tbl_partnership.play_mode as mode_id,tbl_partnership.part as our,tbl_partnership.visible as active from tbl_partnership INNER JOIN tbl_mode ON tbl_mode.mode_id = tbl_partnership.play_mode WHERE tbl_mode.active=1 AND tbl_partnership.child_id = ? ",(a.length>1&&void 0!==a[1]?a[1]:"")&&(t+=" AND tbl_partnership.visible = 1"),t+=" ORDER BY tbl_mode.priority ASC LIMIT 200",e.n=1,c.query(t,[n]);case 1:return r=e.v,e.a(2,r)}},e)}));return function(n){return e.apply(this,arguments)}}(),G=function(){var e=o(u().m(function e(n){return u().w(function(e){for(;;)if(0===e.n)return e.a(2,c.query("DELETE FROM users_sessions WHERE uid = ?",[n]))},e)}));return function(n){return e.apply(this,arguments)}}(),H=function(){var e=o(u().m(function e(n,t){return u().w(function(e){for(;;)if(0===e.n)return e.a(2,c.query("INSERT INTO users_sessions (uid, token) VALUES (?, ?)",[n,t]))},e)}));return function(n,t){return e.apply(this,arguments)}}();e.exports={getProfile:d,Login:f,addUser:_,updatePart:y,getPartyCodes:E,getallParent:p,getParent:l,getUsers:v,addBalance:b,partacGen:g,setTally:w,modUser:O,changeStatus:R,getBalance:S,resetPassword:N,removeOperator:I,addPart:A,getMaxPart:P,updateMarketType:U,getallPart:D,loginWId:W,updatePl:M,setPl:C,getChild:k,getButtons:L,setButtons:B,detButtons:j,changePassword:x,getMarquee:q,loginLog:F,addAccountEntry:J,getPartnerships:T,getPart:V,delUserToken:G,addUserToken:H,getChildIds:m,getAllChildsCustom:h}},326:(e,n,t)=>{var r=t(252).Router(),a=t(456),u=a.authenticateToken,i=(a.authenticateIP,t(416).errorHandlerMiddleware),s=t(144),o=s.getEvents,c=s.getEventByEventID,d=s.getPlayers,p=s.addPlayer,l=s.getMarkets,f=s.getMarketsC,_=s.getMarketsList,b=s.selectRunner,y=s.selectSingleRunner,v=s.selectOddEven,m=s.unSelectRunner,h=s.unSelectSingleRunner,k=s.getSelectedRuners,E=s.getSelectedRunersSingle,g=s.getBalance,w=s.confirmPlayers,O=s.getConfirmPlayers,R=s.getMyMarkets,S=s.getMyMarketsByEvent,T=s.getMyPlayers,N=s.getEventStatus,I=s.getMarketStatus,A=s.updateMarketStatus,P=s.getExposerTable,U=s.getButtons,D=s.getAC,M=s.getResults,C=s.getResultsAll,L=s.getResult,j=s.getBets;r.post("/getevents",u,o),r.post("/getEventByEID",u,c),r.post("/getPlayers",u,d),r.post("/addPlayer",u,p),r.post("/getMarkets",u,l),r.post("/getMarketsC",u,f),r.post("/getMarketsList",u,_),r.post("/getSelRuners",u,k),r.post("/getSelRunersSingle",u,E),r.post("/selectRunner",u,b),r.post("/unSelectRunner",u,m),r.post("/unSelectSingleRunner",u,h),r.post("/selectSingleRunner",u,y),r.post("/selectOddEven",u,v),r.post("/getBal",u,g),r.post("/confirmPlayers",u,w),r.post("/getConfirmPlayers",u,O),r.post("/getMyMarkets",u,R),r.post("/getMyMarketsByEvent",u,S),r.post("/getMyPlayers",u,T),r.post("/getEventStatus",u,N),r.post("/getMarketStatus",u,I),r.post("/updateMarketStatus",u,A),r.post("/getExposerTable",u,P),r.post("/getButtons",u,U),r.post("/getAC",u,D),r.post("/getResults",u,M),r.post("/getResultsAll",u,C),r.post("/getResult",u,L),r.post("/getBets",u,j),r.use(i),e.exports=r},329:e=>{"use strict";e.exports=require("argon2")},376:e=>{"use strict";e.exports=require("express-fileupload")},398:(e,n,t)=>{var r=t(252).Router(),a=t(456).authenticateToken,u=t(416).errorHandlerMiddleware,i=t(968),s=i.getAccountStatement,o=i.doSettement,c=i.getEventGen,d=i.getPl,p=i.getAcSum;r.post("/getstatement",a,s),r.post("/getpl",a,d),r.post("/getacsummary",a,p),r.post("/settlement",a,o),r.post("/geteventgen",a,c),r.use(u),e.exports=r},416:e=>{function n(){var e,r,a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",i=a.toStringTag||"@@toStringTag";function s(n,a,u,i){var s=a&&a.prototype instanceof c?a:c,d=Object.create(s.prototype);return t(d,"_invoke",function(n,t,a){var u,i,s,c=0,d=a||[],p=!1,l={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(n,t){return u=n,i=0,s=e,l.n=t,o}};function f(n,t){for(i=n,s=t,r=0;!p&&c&&!a&&r<d.length;r++){var a,u=d[r],f=l.p,_=u[2];n>3?(a=_===t)&&(s=u[(i=u[4])?5:(i=3,3)],u[4]=u[5]=e):u[0]<=f&&((a=n<2&&f<u[1])?(i=0,l.v=t,l.n=u[1]):f<_&&(a=n<3||u[0]>t||t>_)&&(u[4]=n,u[5]=t,l.n=_,i=0))}if(a||n>1)return o;throw p=!0,t}return function(a,d,_){if(c>1)throw TypeError("Generator is already running");for(p&&1===d&&f(d,_),i=d,s=_;(r=i<2?e:s)||!p;){u||(i?i<3?(i>1&&(l.n=-1),f(i,s)):l.n=s:l.v=s);try{if(c=2,u){if(i||(a="next"),r=u[a]){if(!(r=r.call(u,s)))throw TypeError("iterator result is not an object");if(!r.done)return r;s=r.value,i<2&&(i=0)}else 1===i&&(r=u.return)&&r.call(u),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);u=e}else if((r=(p=l.n<0)?s:n.call(t,l))!==o)break}catch(n){u=e,i=1,s=n}finally{c=1}}return{value:r,done:p}}}(n,u,i),!0),d}var o={};function c(){}function d(){}function p(){}r=Object.getPrototypeOf;var l=[][u]?r(r([][u]())):(t(r={},u,function(){return this}),r),f=p.prototype=c.prototype=Object.create(l);function _(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,t(e,i,"GeneratorFunction")),e.prototype=Object.create(f),e}return d.prototype=p,t(f,"constructor",p),t(p,"constructor",d),d.displayName="GeneratorFunction",t(p,i,"GeneratorFunction"),t(f),t(f,i,"Generator"),t(f,u,function(){return this}),t(f,"toString",function(){return"[object Generator]"}),(n=function(){return{w:s,m:_}})()}function t(e,n,r,a){var u=Object.defineProperty;try{u({},"",{})}catch(e){u=0}t=function(e,n,r,a){if(n)u?u(e,n,{value:r,enumerable:!a,configurable:!a,writable:!a}):e[n]=r;else{var i=function(n,r){t(e,n,function(e){return this._invoke(n,r,e)})};i("next",0),i("throw",1),i("return",2)}},t(e,n,r,a)}function r(e,n,t,r,a,u,i){try{var s=e[u](i),o=s.value}catch(e){return void t(e)}s.done?n(o):Promise.resolve(o).then(r,a)}var a=function(){var e,t=(e=n().m(function e(t,r,a,u){return n().w(function(e){for(;;)switch(e.n){case 0:t&&a.status(t.statusCode||500).json({success:!1,message:t.message||"Something went wrong",error:t.message||t});case 1:return e.a(2)}},e)}),function(){var n=this,t=arguments;return new Promise(function(a,u){var i=e.apply(n,t);function s(e){r(i,a,u,s,o,"next",e)}function o(e){r(i,a,u,s,o,"throw",e)}s(void 0)})});return function(e,n,r,a){return t.apply(this,arguments)}}();e.exports={errorHandlerMiddleware:a}},420:(e,n,t)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach(function(n){i(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function i(e,n,t){return(n=function(e){var n=function(e){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!=r(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(){var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",a=t.toStringTag||"@@toStringTag";function u(t,r,a,u){var s=r&&r.prototype instanceof c?r:c,d=Object.create(s.prototype);return o(d,"_invoke",function(t,r,a){var u,s,o,c=0,d=a||[],p=!1,l={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(n,t){return u=n,s=0,o=e,l.n=t,i}};function f(t,r){for(s=t,o=r,n=0;!p&&c&&!a&&n<d.length;n++){var a,u=d[n],f=l.p,_=u[2];t>3?(a=_===r)&&(o=u[(s=u[4])?5:(s=3,3)],u[4]=u[5]=e):u[0]<=f&&((a=t<2&&f<u[1])?(s=0,l.v=r,l.n=u[1]):f<_&&(a=t<3||u[0]>r||r>_)&&(u[4]=t,u[5]=r,l.n=_,s=0))}if(a||t>1)return i;throw p=!0,r}return function(a,d,_){if(c>1)throw TypeError("Generator is already running");for(p&&1===d&&f(d,_),s=d,o=_;(n=s<2?e:o)||!p;){u||(s?s<3?(s>1&&(l.n=-1),f(s,o)):l.n=o:l.v=o);try{if(c=2,u){if(s||(a="next"),n=u[a]){if(!(n=n.call(u,o)))throw TypeError("iterator result is not an object");if(!n.done)return n;o=n.value,s<2&&(s=0)}else 1===s&&(n=u.return)&&n.call(u),s<2&&(o=TypeError("The iterator does not provide a '"+a+"' method"),s=1);u=e}else if((n=(p=l.n<0)?o:t.call(r,l))!==i)break}catch(n){u=e,s=1,o=n}finally{c=1}}return{value:n,done:p}}}(t,a,u),!0),d}var i={};function c(){}function d(){}function p(){}n=Object.getPrototypeOf;var l=[][r]?n(n([][r]())):(o(n={},r,function(){return this}),n),f=p.prototype=c.prototype=Object.create(l);function _(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,o(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return d.prototype=p,o(f,"constructor",p),o(p,"constructor",d),d.displayName="GeneratorFunction",o(p,a,"GeneratorFunction"),o(f),o(f,a,"Generator"),o(f,r,function(){return this}),o(f,"toString",function(){return"[object Generator]"}),(s=function(){return{w:u,m:_}})()}function o(e,n,t,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}o=function(e,n,t,r){if(n)a?a(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t;else{var u=function(n,t){o(e,n,function(e){return this._invoke(n,t,e)})};u("next",0),u("throw",1),u("return",2)}},o(e,n,t,r)}function c(e,n,t,r,a,u,i){try{var s=e[u](i),o=s.value}catch(e){return void t(e)}s.done?n(o):Promise.resolve(o).then(r,a)}function d(e){return function(){var n=this,t=arguments;return new Promise(function(r,a){var u=e.apply(n,t);function i(e){c(u,r,a,i,s,"next",e)}function s(e){c(u,r,a,i,s,"throw",e)}i(void 0)})}}var p=t(299),l=(t(183),t(329)),f=t(456),_=f.getSignedToken,b=f.parseJwt,y=t(693),v=y.AuthError,m=y.InputError,h=function(){var e=d(s().m(function e(n,t,r){var a,u,i,o,c,d;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,n.body.email){e.n=1;break}throw new m("Email is required");case 1:if(n.body.password){e.n=2;break}throw new m("Password is required");case 2:return a=n.body.email,u=n.body.password,e.n=3,p.Login(a,u);case 3:if(i=e.v){e.n=4;break}throw Error("Email Not Found");case 4:if(!(i.length<1)){e.n=5;break}throw new v("Wrong Username Or Password");case 5:return e.n=6,l.verify(i[0].password,u);case 6:if(e.v){e.n=7;break}throw new v("Wrong Username Or Password");case 7:return i[0].ip=n.ip||n.connection.remoteAddress,e.n=8,p.delUserToken(i[0].id);case 8:return e.v,e.n=9,_(i);case 9:return o=e.v,e.n=10,p.addUserToken(i[0].id,o);case 10:return e.v,c=[],e.n=11,p.getPart(i[0].id,1);case 11:c=e.v,t.status(200).json({success:!0,role:i[0].u_role,name:i[0].name,bal:null==i[0].amount?0:i[0].amount,exp:null==i[0].exposer?0:i[0].exposer,token:o,mode:c}),e.n=13;break;case 12:e.p=12,d=e.v,r(d);case 13:return e.a(2)}},e,null,[[0,12]])}));return function(n,t,r){return e.apply(this,arguments)}}(),k=function(){var e=d(s().m(function e(n,t,r){var a,u,i;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,n.body.email){e.n=1;break}throw new m("Email is required");case 1:return a=n.body.email,e.n=2,p.getProfile(a);case 2:u=e.v,t.status(200).json({success:!0,data:{profile:u}}),e.n=4;break;case 3:e.p=3,i=e.v,r(i);case 4:return e.a(2)}},e,null,[[0,3]])}));return function(n,t,r){return e.apply(this,arguments)}}(),E=function(){var e=d(s().m(function e(n,t,r){var a,u,i;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,p.loginWId(b(n).id);case 1:return delete(a=e.v)[0].password,delete a[0].id,delete a[0].parent_id,e.n=2,p.getMarquee();case 2:u=e.v,t.status(200).json({success:!0,data:{profile:a,message:u}}),e.n=4;break;case 3:e.p=3,i=e.v,r(i);case 4:return e.a(2)}},e,null,[[0,3]])}));return function(n,t,r){return e.apply(this,arguments)}}(),g=function(){var e=d(s().m(function e(n,t,r){var a,i,o,c,d,f,_,y,h,k,E,g,w,O,R,S,T;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,n.body.admin_password){e.n=1;break}throw new m("Please Type Admin Password");case 1:if(n.body.name){e.n=2;break}throw new m("Name is required");case 2:if(n.body.email){e.n=3;break}throw new m("Email is required");case 3:if(n.body.u_role){e.n=4;break}throw new m("Role is required");case 4:return a=u({},n.body),i=n.body.password?n.body.password:"Abcd1234",e.n=5,l.hash(i);case 5:return a.password=e.v,o=n.body.admin_password,e.n=6,p.loginWId(b(n).id,o);case 6:if(c=e.v){e.n=7;break}throw new v("Try Again After Re Login");case 7:return e.n=8,l.verify(c[0].password,o);case 8:if(e.v){e.n=9;break}throw new v("Password Not Match");case 9:return e.n=10,p.loginWId(b(n).id);case 10:return d=e.v,e.n=11,p.Login(a.email);case 11:if(f=e.v,a.parent_id=d[0].id,a.webref=n.body.webref?n.body.webref:d[0].webref,!(f&&f.length>0)){e.n=12;break}throw new m("User Already Exist");case 12:return _=[],y=[],h=[],e.n=13,p.getPart(d[0].id);case 13:k=e.v,E=0;case 14:if(!(E<n.body.partArr.length)){e.n=18;break}g=0;case 15:if(!(g<k.length)){e.n=17;break}if(k[g].mode_id!==n.body.partArr[E].mode_id){e.n=16;break}if(!(k[g].our<n.body.partArr[E].downline)){e.n=16;break}throw new v("Downline PartnerShip Is More In ".concat(k[g].play," MAX  ").concat(k[g].our));case 16:g++,e.n=15;break;case 17:E++,e.n=14;break;case 18:return e.n=19,p.addUser(a);case 19:for(w=e.v,O=parseInt(n.body.u_role)>4?-100:0,R=0;R<n.body.partArr.length;R++)O="downline"in n.body.partArr[R]&&parseInt(n.body.u_role)<5?n.body.partArr[R].downline:O,_.push([w.insertId,a.parent_id,O,0,n.body.partArr[R].active,n.body.partArr[R].mode_id]);return S=n.body&&n.body.free_chip?n.body.free_chip:0,e.n=20,p.addPart(_);case 20:return e.v,y.push([a.parent_id,-Math.abs(S)],[w.insertId,S]),h.push([w.insertId,a.free_chip,0,0,0,"CR",d[0].id,w.insertId,0,0,4,0,0,0,"WElCOME DEPOSIT TO "+n.body.email,0,1],[d[0].id,a.free_chip,0,0,0,"DR",d[0].id,w.insertId,d[0].amount,Number(d[0].amount)+Number(-1*a.free_chip),4,0,0,0,"WElCOME WIDTHDROW FROM SELF",0,1]),e.n=21,p.addBalance(y);case 21:return e.n=22,p.addAccountEntry(h);case 22:t.status(200).json({success:!!w.insertId,data:[],message:w.insertId?"User Created":"Failed Create User"}),e.n=24;break;case 23:e.p=23,T=e.v,r(T);case 24:return e.a(2)}},e,null,[[0,23]])}));return function(n,t,r){return e.apply(this,arguments)}}(),w=function(){var e=d(s().m(function e(n,t,r){var a,i,o,c,d,f;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,n.body.name){e.n=1;break}throw new m("Name is required");case 1:if(n.body.email){e.n=2;break}throw new m("Email is required");case 2:return a=u({},n.body),e.n=3,l.hash("123456");case 3:return a.password=e.v,e.n=4,p.getProfile(b(n).email);case 4:return i=e.v,e.n=5,p.getProfile(a.email);case 5:if(o=e.v,!a.p_code){e.n=7;break}return e.n=6,p.getProfile(a.p_code);case 6:c=e.v,a.ref_id=c[0].id,e.n=8;break;case 7:a.ref_id=i[0].id;case 8:if(6!==parseInt(a.u_role)&&4!==parseInt(a.u_role)&&(a.part=0),!(6===parseInt(a.u_role)&&parseInt(a.part)>i[0].part)){e.n=9;break}throw new m("Availble Part is "+i[0].part);case 9:if(a.parent_id=i[0].id,a.c_out=a.c_out?a.c_out:0,a.c_in=a.c_in?a.c_in:0,a.cutting=n.body.cutting?n.body.cutting:0,7===parseInt(a.u_role)&&(a.c_out=0),5===parseInt(a.u_role)&&(a.c_out=0,a.part=0),!(o&&o.length>0)){e.n=10;break}throw new m("User Already Exist");case 10:return e.n=11,p.addUser(a);case 11:d=e.v,t.status(200).json({success:!!d.insertId,data:[],message:d.insertId?"User Created":"Faild Create User"}),e.n=13;break;case 12:e.p=12,f=e.v,r(f);case 13:return e.a(2)}},e,null,[[0,12]])}));return function(n,t,r){return e.apply(this,arguments)}}(),O=function(){var e=d(s().m(function e(n,t,r){var a,u,i,o;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1,2,3,4].includes(b(n).role)){e.n=1;break}throw new m("Un Authorise.");case 1:return e.n=2,p.getProfile(b(n).email);case 2:return a=e.v,n.body.user_id=a[0].id,e.n=3,p.loginWId(b(n).id);case 3:return delete(u=e.v).password,delete u.id,delete u.parent_id,e.n=4,p.getUsers(n.body);case 4:i=e.v,t.status(200).json({success:i.length>0,data:i,profile:u[0]}),e.n=6;break;case 5:e.p=5,o=e.v,r(o);case 6:return e.a(2)}},e,null,[[0,5]])}));return function(n,t,r){return e.apply(this,arguments)}}(),R=function(){var e=d(s().m(function e(n,t,r){var a,u,i,o;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,p.getProfile(b(n).email);case 1:return a=e.v,u=n.body.role?n.body.role:5,e.n=2,p.getPartyCodes(a[0].id,u);case 2:i=e.v,t.status(200).json({success:!0,data:i}),e.n=4;break;case 3:e.p=3,o=e.v,r(o);case 4:return e.a(2)}},e,null,[[0,3]])}));return function(n,t,r){return e.apply(this,arguments)}}(),S=function(){var e=d(s().m(function e(n,t,r){var a,u,i;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,p.getProfile(b(n).email);case 1:return a=e.v,u=[],e.n=2,p.partacGen(a);case 2:u=e.v,t.status(200).json({success:!0,data:u}),e.n=4;break;case 3:e.p=3,i=e.v,r(i);case 4:return e.a(2)}},e,null,[[0,3]])}));return function(n,t,r){return e.apply(this,arguments)}}(),T=function(){var e=d(s().m(function e(n,t,r){var a,u,i;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,n.body.email){e.n=1;break}throw new m("Email is required");case 1:return e.n=2,p.getProfile(n.body.email);case 2:return a=e.v,n.body.uid=a[0].id,e.n=3,p.setTally(n.body);case 3:u=e.v,console.log(u),t.status(200).json({success:!!u.changedRows,data:[],message:u.changedRows?"Updated":"Faild"}),e.n=5;break;case 4:e.p=4,i=e.v,r(i);case 5:return e.a(2)}},e,null,[[0,4]])}));return function(n,t,r){return e.apply(this,arguments)}}(),N=function(){var e=d(s().m(function e(n,t,r){var a,u,i,o;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,!n.body||n.body.email){e.n=1;break}throw new m("Email is required");case 1:if(!(n.body&&n.body.c_out&&isNaN(n.body.c_out))){e.n=2;break}throw new m("Non Numeric Commision");case 2:if(!(n.body&&n.body.c_out&&n.body.c_out<0)){e.n=3;break}throw new m("Comm Not Valid");case 3:if(!(n.body&&n.body.name&&n.body.name.length>30)){e.n=4;break}throw new m("Name Is To Big");case 4:if(!(n.body&&n.body.part&&isNaN(n.body.part))){e.n=5;break}throw new m("Non Numeric Partnership");case 5:if(!(n.body&&n.body.part&&n.body.part>100||n.body.part<0)){e.n=6;break}throw new m("Invalid Partnership");case 6:return e.n=7,p.getProfile(b(n).email);case 7:return a=e.v,e.n=8,p.getProfile(n.body.email);case 8:if(u=e.v,6!==parseInt(u[0].u_role)||!("part"in n.body)){e.n=10;break}if(!(a[0].part+u[0].part<n.body.part)){e.n=9;break}throw new m("No Partnship Change");case 9:return e.n=10,p.updatePart(a[0].part+u[0].part-n.body.part,b(n).email);case 10:return e.n=11,p.modUser(n.body);case 11:i=e.v,t.status(200).json({success:!0,data:[],message:i.changedRows?"Updated":"UnChanged"}),e.n=13;break;case 12:e.p=12,o=e.v,r(o);case 13:return e.a(2)}},e,null,[[0,12]])}));return function(n,t,r){return e.apply(this,arguments)}}(),I=function(){var e=d(s().m(function e(n,t,r){var a,u;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,p.getProfile(b(n).email);case 1:return e.v,e.n=2,p.getProfile(n.body.email);case 2:return e.v,e.n=3,p.changeStatus(n.body);case 3:a=e.v,t.status(200).json({success:!0,data:[],message:a.changedRows?"Updated":"UnChanged"}),e.n=5;break;case 4:e.p=4,u=e.v,r(u);case 5:return e.a(2)}},e,null,[[0,4]])}));return function(n,t,r){return e.apply(this,arguments)}}(),A=function(){var e=d(s().m(function e(n,t,r){var a,u,i;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1,2,3,4,5,6].includes(b(n).role)){e.n=1;break}throw new m("Un Authorise.");case 1:return e.n=2,p.getProfile(b(n).email);case 2:return a=e.v,n.body.user_id=a[0].id,n.body.parent_id=a[0].parent_id,e.n=3,p.getBalance(n.body);case 3:u=e.v,t.status(200).json({success:!0,data:u,message:"Balance retrived"}),e.n=5;break;case 4:e.p=4,i=e.v,r(i);case 5:return e.a(2)}},e,null,[[0,4]])}));return function(n,t,r){return e.apply(this,arguments)}}(),P=function(){var e=d(s().m(function e(n,t,r){var a,u,i;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,a=n.body.password=n.body.password?n.body.password:"Abcd1234",e.n=1,l.hash(a);case 1:return a=e.v,e.n=2,p.resetPassword(a,n.body.user_id);case 2:u=e.v,t.status(200).json({success:0==u.affectedRows,data:[],message:0==u.affectedRows?"Password is Reset To ".concat(n.body.password):"Failed Reset Password"}),e.n=4;break;case 3:e.p=3,i=e.v,r(i);case 4:return e.a(2)}},e,null,[[0,3]])}));return function(n,t,r){return e.apply(this,arguments)}}(),U=function(){var e=d(s().m(function e(n,t,r){var a,u;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,p.removeOperator(n.body.email);case 1:a=e.v,t.status(200).json({success:!!a.affectedRows,data:[],message:a.affectedRows?"Updated":"Failed"}),e.n=3;break;case 2:e.p=2,u=e.v,r(u);case 3:return e.a(2)}},e,null,[[0,2]])}));return function(n,t,r){return e.apply(this,arguments)}}(),D=function(){var e=d(s().m(function e(n,t,r){var a,u,i,o,c,d,f,_,y,h,k,E,g,w;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,n.body.admin_password){e.n=1;break}throw new m("Please Type Admin Password");case 1:if(n.body.user_id){e.n=2;break}throw new m("Please Select User");case 2:if(n.body.t_type){e.n=3;break}throw new m("Please Select Type OF Tranjection");case 3:if(n.body.deposite_bal){e.n=4;break}throw new m("Please Enter Amount");case 4:if(!(n.body.deposite_bal<0)){e.n=5;break}throw new m("Please Enter Valid Amount");case 5:return(a=n.body?n.body:{}).parent_id=b(n).id,u=[],i=[],o=a&&a.t_type&&"withdraw"===a.t_type?-1:1,c=a&&a.t_type&&"withdraw"===a.t_type?"CR":"DR",d=a&&a.t_type&&"withdraw"===a.t_type?"DR":"CR",f=n.body.admin_password,e.n=6,p.loginWId(b(n).id,f);case 6:if(_=e.v){e.n=7;break}throw new v("Try Again After Re Login");case 7:return e.n=8,l.verify(_[0].password,f);case 8:if(e.v){e.n=9;break}throw new v("Password Not Match");case 9:return e.n=10,p.loginWId(a.user_id);case 10:return y=e.v,e.n=11,p.loginWId(a.parent_id);case 11:if(h=e.v,y[0]&&(y=y[0]),h[0]&&(h=h[0]),y.parent_id===a.parent_id){e.n=12;break}throw new m("Not a Direct Parent");case 12:if(!("withdraw"===a.t_type&&Number(y.amount)+Number(y.exposer)+Number(y.up_line)<Number(n.body.deposite_bal))){e.n=13;break}throw new m("Max Withdraw Amount IS ".concat(Number(y.amount)+Number(y.exposer)+Number(y.up_line)));case 13:if(!("deposit"===a.t_type&&Number(h.amount)+Number(h.exposer)<Number(n.body.deposite_bal))){e.n=14;break}throw new m("Max DEPOSIT Amount IS ".concat(Number(h.amount)+Number(h.exposer)));case 14:return u.push([a.parent_id,a.deposite_bal*o*-1],[a.user_id,a.deposite_bal*o]),k=a&&a.t_type&&"withdraw"===a.t_type?"DESPOSIT TO SELF FROM "+n.body.p_code.toUpperCase():"WITHDRAW FROM SELF TO "+n.body.p_code.toUpperCase(),E=a&&a.t_type&&"withdraw"===a.t_type?"WITHDRAW":"DESPOSIT",n.body.remark&&(k+="/"+n.body.remark,E+="/"+n.body.remark),i.push([a.user_id,a.deposite_bal*o,0,0,0,d,a.parent_id,a.user_id,y.amount,Number(y.amount)+Number(a.deposite_bal*o),4,0,0,0,E,0,1],[a.parent_id,a.deposite_bal*o*-1,0,0,0,c,a.parent_id,a.user_id,h.amount,Number(a.deposite_bal*o*-1)+Number(h.amount),4,0,0,0,k,0,1]),e.n=15,p.addBalance(u);case 15:return g=e.v,e.n=16,p.addAccountEntry(i);case 16:t.status(200).json({success:!!g.affectedRows,data:[],message:g.affectedRows?"Balance Updated":"Failed Update"}),e.n=18;break;case 17:e.p=17,w=e.v,r(w);case 18:return e.a(2)}},e,null,[[0,17]])}));return function(n,t,r){return e.apply(this,arguments)}}(),M=function(){var e=d(s().m(function e(n,t,r){var a,u,i,o,c,d,f,_,y,h,k;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,n.body.admin_password){e.n=1;break}throw new m("Please Type Admin Password");case 1:if(n.body.user_id){e.n=2;break}throw new m("Please Select User");case 2:return a=[],u=n.body.admin_password,e.n=3,p.loginWId(b(n).id,u);case 3:if(i=e.v){e.n=4;break}throw new v("Try Again After Re Login");case 4:return e.n=5,l.verify(i.password,u);case 5:if(e.v){e.n=6;break}throw new v("Password Not Match");case 6:return e.n=7,p.getMaxPart(n.body.user_id);case 7:return o=e.v,e.n=8,Event.getPart(b(n).id);case 8:c=e.v,d=5===parseInt(n.body.u_role)?-100:0,f=0;case 9:if(!(f<n.body.partArr.length)){e.n=17;break}_=0;case 10:if(!(_<o.length)){e.n=12;break}if(!(n.body.partArr[f].mode_id===o[_].mode_id&&parseInt(o[_].max_part)>parseInt(n.body.partArr[f].downline))){e.n=11;break}throw new m("Correct First Child Partneship to ".concat(n.body.partArr[f].downline," %"));case 11:_++,e.n=10;break;case 12:y=0;case 13:if(!(y<c.length)){e.n=15;break}if(!(n.body.partArr[f].mode_id===c[y].mode_id&&parseInt(c[y].our)<parseInt(n.body.partArr[f].downline))){e.n=14;break}throw new m("Set Partneship For ".concat(c[y].play," less than  ").concat(c[y].our," %"));case 14:y++,e.n=13;break;case 15:d="downline"in n.body.partArr[f]?n.body.partArr[f].downline:d,a.push([n.body.user_id,b(n).id,d,0,n.body.partArr[f].active,n.body.partArr[f].mode_id]);case 16:f++,e.n=9;break;case 17:return e.n=18,p.addPart(a);case 18:h=e.v,t.status(200).json({success:!!h.affectedRows,data:[],message:h.affectedRows?"PartnerShip Updated":"Failed"}),e.n=20;break;case 19:e.p=19,k=e.v,r(k);case 20:return e.a(2)}},e,null,[[0,19]])}));return function(n,t,r){return e.apply(this,arguments)}}(),C=function(){var e=d(s().m(function e(n,t,r){var a,u,i,o,c,d;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,n.body.mode_id){e.n=1;break}throw new m("Select Sports");case 1:if(!(!1 in n.body)){e.n=2;break}throw new m("Select Market Type First");case 2:if(n.body.admin_password){e.n=3;break}throw new m("Please Type Admin Password");case 3:if(!n.body.user_id){e.n=6;break}return e.n=4,L(b(n).id,n.body.user_id,"",b(n).id);case 4:if(e.v){e.n=5;break}throw new v("Try Again After Re Login");case 5:e.n=7;break;case 6:n.body.user_id=b(n).id;case 7:return a=!!n.body.market_id,u=!!n.body.event_id,i=n.body.admin_password,e.n=8,p.loginWId(b(n).id,i);case 8:if(o=e.v){e.n=9;break}throw new v("Try Again After Re Login");case 9:return e.n=10,l.verify(o[0].password,i);case 10:if(e.v){e.n=11;break}throw new v("Password Not Match");case 11:return n.body.admin_id=b(n).id,a||(n.body.market_id=0),u||(n.body.event_id=0),delete n.body.admin_password,e.n=12,p.updateMarketType(n.body);case 12:c=e.v,t.status(200).json({success:!0,data:[],message:c.insertId||c.affectedRows?"SETTINNG UPDATED":"NO CHANGE"}),e.n=14;break;case 13:e.p=13,d=e.v,r(d);case 14:return e.a(2)}},e,null,[[0,13]])}));return function(n,t,r){return e.apply(this,arguments)}}(),L=function(){var e=d(s().m(function e(n,t){var r,a,u,i,o,c=arguments;return s().w(function(e){for(;;)switch(e.n){case 0:return r=c.length>2&&void 0!==c[2]?c[2]:"",a=c.length>3&&void 0!==c[3]?c[3]:"",e.n=1,p.getallParent(t,r,a);case 1:for(u=e.v,i=!1,o=0;o<u.length;o++)n===u[o].parent_id&&(i=!0);return e.a(2,i)}},e)}));return function(n,t){return e.apply(this,arguments)}}(),j=function(){var e=d(s().m(function e(n,t,r){var a,u,i,o,c,d,f,_,y,h,k,E,g,w,O,R,S,T,N;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,n.body.admin_password){e.n=1;break}throw new m("Please Type Admin Password");case 1:if(n.body.user_id){e.n=2;break}throw new m("Please Select User");case 2:if(n.body.t_type){e.n=3;break}throw new m("Please Select Type OF Tranjection");case 3:if(n.body.deposite_bal){e.n=4;break}throw new m("Please Enter Amount");case 4:if(!(n.body.deposite_bal<0)){e.n=5;break}throw new m("Please Enter Valid Amount");case 5:return e.n=6,p.loginWId(b(n).id,n.body.admin_password);case 6:if(a=e.v){e.n=7;break}throw new v("Try Again After Re Login");case 7:return e.n=8,l.verify(a[0].password,n.body.admin_password);case 8:if(e.v){e.n=9;break}throw new v("Password Not Match");case 9:return n.body.parent_id=b(n).id,u=n.body?n.body:{},i=[],o=[],c=u&&u.t_type&&"withdraw"===u.t_type?1:-1,d=u&&u.t_type&&"withdraw"===u.t_type?"CR":"DR",f=u&&u.t_type&&"withdraw"===u.t_type?"DR":"CR",_=u&&u.t_type&&"withdraw"===u.t_type?"CR":"DR",y=u&&u.t_type&&"withdraw"===u.t_type?"DR":"CR",e.n=10,p.loginWId(u.user_id);case 10:return h=e.v,e.n=11,p.loginWId(u.parent_id);case 11:if(k=e.v,h[0]&&(h=h[0]),k[0]&&(k=k[0]),h.parent_id===u.parent_id){e.n=12;break}throw new m("Not a Direct Parent");case 12:return E=5===h.u_role?-1:1,g=!n.body.auto||JSON.parse(n.body.auto),i.push([u.parent_id,5===h.u_role&&g?u.deposite_bal*c:0,0,u.deposite_bal*c,u.deposite_bal*c*-1],[u.user_id,5===h.u_role&&g?u.deposite_bal*c*-1:0,u.deposite_bal*c*E,0,u.deposite_bal*c]),w=u&&u.t_type&&"withdraw"===u.t_type?"SETTLEMENT PAID TO "+n.body.p_code.toUpperCase():"SETTLEMENT RECEIVED FROM "+n.body.p_code.toUpperCase(),O=u&&u.t_type&&"withdraw"===u.t_type?"SETTLEMENT RECEIVED FROM UPLINE":"SETTLEMENT PAID TO UPLINE",R=u&&u.t_type&&"withdraw"===u.t_type?"DESPOSIT CHIPS TO "+n.body.p_code.toUpperCase():"WITHDRAW FROM CHIPS TO "+n.body.p_code.toUpperCase(),S=u&&u.t_type&&"withdraw"===u.t_type?"WITHDRAW CHIPS BY UPLINE":"DESPOSIT CHIPS BY UPLINE",n.body.remark&&(w+="/"+n.body.remark,O+="/"+n.body.remark,R+="/"+n.body.remark,S+="/"+n.body.remark),o.push([u.user_id,u.deposite_bal*c*-1,0,0,0,f,u.parent_id,u.user_id,h.amount,5===h.u_role?h.amount:Number(u.deposite_bal*c*-1)+Number(h.down_line)-Number(h.up_line),0,0,0,0,O,0,1],[u.parent_id,u.deposite_bal*c,0,0,0,d,u.parent_id,u.user_id,k.amount,Number(u.deposite_bal*c)+Number(k.down_line)-Number(k.up_line),0,0,0,0,w,0,1]),5===h.u_role&&g&&o.push([u.user_id,u.deposite_bal*c*-1,0,0,0,y,u.parent_id,u.user_id,h.amount,Number(h.amount)+Number(u.deposite_bal*c*-1),0,0,0,0,S,0,1],[u.parent_id,u.deposite_bal*c,0,0,0,_,u.parent_id,u.user_id,k.amount,Number(u.deposite_bal*c)+Number(k.amount),0,0,0,0,R,0,1]),e.n=13,p.setPl(i);case 13:return T=e.v,e.n=14,p.addAccountEntry(o);case 14:u.user_id,t.status(200).json({success:!!T.affectedRows,data:[],message:T.affectedRows?"PL Updated":"Failed Update"}),e.n=16;break;case 15:e.p=15,N=e.v,r(N);case 16:return e.p=16,e.f(16);case 17:return e.a(2)}},e,null,[[0,15,16,17]])}));return function(n,t,r){return e.apply(this,arguments)}}(),B=function(){var e=d(s().m(function e(n,t,r){var a,u,i;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,a=b(n).id,e.n=1,p.getButtons(a);case 1:if(0!==(u=e.v).length){e.n=3;break}return e.n=2,p.getButtons(1);case 2:u=e.v;case 3:t.status(200).json({success:!0,data:u}),e.n=5;break;case 4:e.p=4,i=e.v,r(i);case 5:return e.a(2)}},e,null,[[0,4]])}));return function(n,t,r){return e.apply(this,arguments)}}(),x=function(){var e=d(s().m(function e(n,t,r){var a,u,i,o;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,a=b(n).id,u=[[a,n.body.lbl1,n.body.val1],[a,n.body.lbl2,n.body.val2],[a,n.body.lbl3,n.body.val3],[a,n.body.lbl4,n.body.val4],[a,n.body.lbl5,n.body.val5],[a,n.body.lbl6,n.body.val6],[a,n.body.lbl7,n.body.val7],[a,n.body.lbl8,n.body.val8]],e.n=1,p.detButtons(a);case 1:return e.n=2,p.setButtons(u);case 2:i=e.v,t.status(200).json({success:!0,data:[],message:i.affectedRows?"Button Updated":"Failed Update"}),e.n=4;break;case 3:e.p=3,o=e.v,r(o);case 4:return e.a(2)}},e,null,[[0,3]])}));return function(n,t,r){return e.apply(this,arguments)}}(),q=function(){var e=d(s().m(function e(n,t,r){var a,u,i,o,c,d,f;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,n.body.current_password){e.n=1;break}throw new m("Old Password is required !");case 1:if(n.body.new_password){e.n=2;break}throw new m("Password is required !");case 2:if(n.body.new_confirm_password){e.n=3;break}throw new m("Confirm Password is required !");case 3:if(n.body.new_confirm_password===n.body.new_password){e.n=4;break}throw new m("Both Password Not Match !");case 4:if(!(n.body.new_password.length<6||n.body.new_password.length>25)){e.n=5;break}throw new m("Password is Not Valid !");case 5:return e.n=6,p.getProfile(b(n).email);case 6:return a=e.v,u=a[0].email,i=n.body.current_password,e.n=7,p.Login(u);case 7:if(o=e.v){e.n=8;break}throw Error("Email Not Found");case 8:if(!(o.length<1)){e.n=9;break}throw new v("Wrong Username Or Password");case 9:return e.n=10,l.verify(o[0].password,i);case 10:if(e.v){e.n=11;break}throw new m("Wrong Old Password");case 11:return c=n.body,e.n=12,l.hash(n.body.new_password);case 12:return c.new_password=e.v,c.user_id=b(n).id,e.n=13,p.changePassword(c);case 13:d=e.v,console.log(a[0].email),t.status(200).json({success:!0,message:d.affectedRows?"Password Updated":"Failed Update"}),e.n=15;break;case 14:e.p=14,f=e.v,r(f);case 15:return e.a(2)}},e,null,[[0,14]])}));return function(n,t,r){return e.apply(this,arguments)}}(),W=function(){var e=d(s().m(function e(n,t,r){var a,u;return s().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,p.getProfile(b(n).id);case 1:return a=e.v,e.n=2,p.delUserToken(a[0].id);case 2:e.v,t.status(200).json({success:!0,message:"Logout Successfully"}),e.n=4;break;case 3:e.p=3,u=e.v,r(u);case 4:return e.a(2)}},e,null,[[0,3]])}));return function(n,t,r){return e.apply(this,arguments)}}();e.exports={getProfile:k,getProf:E,Login:h,addUser:g,getUsers:O,getPartyCodes:R,acGen:S,setTally:T,modUser:N,changeStatus:I,getBalance:A,resetPassword:P,removeOperator:U,updateChips:D,updatePart:M,updateMarketType:C,setPl:j,getButtons:B,setButtons:x,changePassword:q,logout:W,addUser_old:w}},456:(e,n,t)=>{function r(){var e,n,t="function"==typeof Symbol?Symbol:{},u=t.iterator||"@@iterator",i=t.toStringTag||"@@toStringTag";function s(t,r,u,i){var s=r&&r.prototype instanceof c?r:c,d=Object.create(s.prototype);return a(d,"_invoke",function(t,r,a){var u,i,s,c=0,d=a||[],p=!1,l={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(n,t){return u=n,i=0,s=e,l.n=t,o}};function f(t,r){for(i=t,s=r,n=0;!p&&c&&!a&&n<d.length;n++){var a,u=d[n],f=l.p,_=u[2];t>3?(a=_===r)&&(s=u[(i=u[4])?5:(i=3,3)],u[4]=u[5]=e):u[0]<=f&&((a=t<2&&f<u[1])?(i=0,l.v=r,l.n=u[1]):f<_&&(a=t<3||u[0]>r||r>_)&&(u[4]=t,u[5]=r,l.n=_,i=0))}if(a||t>1)return o;throw p=!0,r}return function(a,d,_){if(c>1)throw TypeError("Generator is already running");for(p&&1===d&&f(d,_),i=d,s=_;(n=i<2?e:s)||!p;){u||(i?i<3?(i>1&&(l.n=-1),f(i,s)):l.n=s:l.v=s);try{if(c=2,u){if(i||(a="next"),n=u[a]){if(!(n=n.call(u,s)))throw TypeError("iterator result is not an object");if(!n.done)return n;s=n.value,i<2&&(i=0)}else 1===i&&(n=u.return)&&n.call(u),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);u=e}else if((n=(p=l.n<0)?s:t.call(r,l))!==o)break}catch(n){u=e,i=1,s=n}finally{c=1}}return{value:n,done:p}}}(t,u,i),!0),d}var o={};function c(){}function d(){}function p(){}n=Object.getPrototypeOf;var l=[][u]?n(n([][u]())):(a(n={},u,function(){return this}),n),f=p.prototype=c.prototype=Object.create(l);function _(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,a(e,i,"GeneratorFunction")),e.prototype=Object.create(f),e}return d.prototype=p,a(f,"constructor",p),a(p,"constructor",d),d.displayName="GeneratorFunction",a(p,i,"GeneratorFunction"),a(f),a(f,i,"Generator"),a(f,u,function(){return this}),a(f,"toString",function(){return"[object Generator]"}),(r=function(){return{w:s,m:_}})()}function a(e,n,t,r){var u=Object.defineProperty;try{u({},"",{})}catch(e){u=0}a=function(e,n,t,r){if(n)u?u(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t;else{var i=function(n,t){a(e,n,function(e){return this._invoke(n,t,e)})};i("next",0),i("throw",1),i("return",2)}},a(e,n,t,r)}function u(e,n,t,r,a,u,i){try{var s=e[u](i),o=s.value}catch(e){return void t(e)}s.done?n(o):Promise.resolve(o).then(r,a)}function i(e){return function(){var n=this,t=arguments;return new Promise(function(r,a){var i=e.apply(n,t);function s(e){u(i,r,a,s,o,"next",e)}function o(e){u(i,r,a,s,o,"throw",e)}s(void 0)})}}var s=t(460).promisify,o=t(829),c=t(697),d=t(693),p=d.AuthError,l=(d.InputError,t(299),s(o.sign,o)),f=function(){var e=i(r().m(function e(n,t,a){var u,i,s,d;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,u=n.headers.authorization,null!=(i=u&&u.split(" ")[1])){e.n=1;break}return e.a(2,t.status(401).json({success:!1,message:"Unauthorized request"}));case 1:return o.verify(i,process.env.SHRI_JWT_SECRET,function(e,t){e&&console.log(e),n.user=t}),s=n.user.id,e.n=2,c.query("SELECT * FROM users_sessions WHERE uid = ? ORDER BY created_at DESC LIMIT 1",[s]);case 2:if((d=e.v)&&0!==d.length&&d[0].token===i){e.n=3;break}throw new p("Invalid session");case 3:a(),e.n=5;break;case 4:throw e.p=4,e.v,new p("Invalid session");case 5:return e.a(2)}},e,null,[[0,4]])}));return function(n,t,r){return e.apply(this,arguments)}}(),_=function(){var e=i(r().m(function e(n){var t;return r().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,l({email:n[0].email,role:n[0].u_role,part:n[0].part,ip:n[0].ip,id:n[0].id},process.env.SHRI_JWT_SECRET,{expiresIn:"1d"});case 1:return t=e.v,e.a(2,t)}},e)}));return function(n){return e.apply(this,arguments)}}();e.exports={authenticateToken:f,authenticateIP:function(e,n,t){var r=e.headers["x-forwarded-for"]||e.socket.remoteAddress;if(console.log(r),!["::1","::ffff:68.183.92.225","::ffff:43.241.195.142","::ffff:13.200.57.33","::ffff:13.234.70.182"].includes(r))return n.status(401).json({success:!1,message:"Unauthorized request."});e.ip=r,t()},getSignedToken:_,parseJwt:function(e){try{var n=e.headers.authorization,t=n&&n.split(" ")[1];return JSON.parse(Buffer.from(t.split(".")[1],"base64").toString())}catch(e){return null}}}},460:e=>{"use strict";e.exports=require("util")},511:(e,n,t)=>{t(697),t(229),e.exports={token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImthYmlyIiwicm9sZSI6MywiaXAiOiI6OjEiLCJpYXQiOjE2ODAwMDI2ODMsImV4cCI6MTcxMTUzODY4M30.cAyLFqwNg3EGOtg1SBK05WguVfU6wg31YmzfWwY5AJw",lxbook:{url:"https://api.1xbook.com/marketprovider/events/detail/",token:"",headers:{Authorization:"Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbGV4MzY5Iiwicm9sZSI6IkNsaWVudCIsImlzcyI6IlJEUiIsImV4cCI6MTY4MzMxMzU1NjE2MCwicHdkY2giOmZhbHNlLCJpcCI6IjQzLjI0MS4xOTUuMjAxIn0.EeZOVyif9K3phPn_o26yzPkpEOEoiIeVHof245VsuUE"}},ice:{url:"http://15.206.197.82:5005/api/v1/event/getApiFancy/",headers:{host:"api.iceexchange.com","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/116.0","access-control-allow-origin":"*","content-type":"application/json",Origin:"https://www.iceexch.com",referer:"https://www.iceexch.com","Sec-Fetch-Mode":"cors"}},rama:{url:"https://clientapilive.ramaexch.com/api/dashboard-detail/",token:"",headers:{Authorization:"Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbGV4MzY5Iiwicm9sZSI6IkNsaWVudCIsImlzcyI6IlJEUiIsImV4cCI6MTY4MzMxMzU1NjE2MCwicHdkY2giOmZhbHNlLCJpcCI6IjQzLjI0MS4xOTUuMjAxIn0.EeZOVyif9K3phPn_o26yzPkpEOEoiIeVHof245VsuUE"}},nineexch:{url:"https://api.99exch.com/api/client/event/",token:"",headers:{Authorization:"bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2FwaS45OWV4Y2guY29tL2FwaS9hdXRoIiwiaWF0IjoxNjg0ODQ0MDc0LCJleHAiOjE2ODQ4NjIwNzQsIm5iZiI6MTY4NDg0NDA3NCwianRpIjoiVjc3dmFqSkI3MTNiOXg3MSIsInN1YiI6IjciLCJwcnYiOiI4N2UwYWYxZWY5ZmQxNTgxMmZkZWM5NzE1M2ExNGUwYjA0NzU0NmFhIn0.7duDJDagaChZX4FPitU7OceYj959jonrA7zPCDZdY9I"}},bb:{url:"https://famousbet.uk:6100/skyfancy/",urlBm:"https://famousbet.uk:6100/skybm/",token:"",switch:"off",headers:{Authorization:""}}}},577:e=>{"use strict";e.exports=require("cors")},605:e=>{"use strict";e.exports=require("socket.io/lib/namespace")},611:e=>{"use strict";e.exports=require("http")},622:(e,n,t)=>{var r=t(252).Router();r.get("/",function(e,n,t){n.render("index",{title:"Express2"})}),e.exports=r},624:(e,n,t)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=s(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,i=!0,o=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return i=e.done,e},e:function(e){o=!0,u=e},f:function(){try{i||null==t.return||t.return()}finally{if(o)throw u}}}}function i(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,u,i,s=[],o=!0,c=!1;try{if(u=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;o=!1}else for(;!(o=(r=u.call(t)).done)&&(s.push(r.value),s.length!==n);o=!0);}catch(e){c=!0,a=e}finally{try{if(!o&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,n)||s(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,n){if(e){if("string"==typeof e)return o(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?o(e,n):void 0}}function o(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function c(e){var n=Object(e),t=[];for(var r in n)t.unshift(r);return function e(){for(;t.length;)if((r=t.pop())in n)return e.value=r,e.done=!1,e;return e.done=!0,e}}function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach(function(n){l(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function l(e,n,t){return(n=function(e){var n=function(e){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!=r(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function f(){var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",a=t.toStringTag||"@@toStringTag";function u(t,r,a,u){var o=r&&r.prototype instanceof s?r:s,c=Object.create(o.prototype);return _(c,"_invoke",function(t,r,a){var u,s,o,c=0,d=a||[],p=!1,l={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(n,t){return u=n,s=0,o=e,l.n=t,i}};function f(t,r){for(s=t,o=r,n=0;!p&&c&&!a&&n<d.length;n++){var a,u=d[n],f=l.p,_=u[2];t>3?(a=_===r)&&(o=u[(s=u[4])?5:(s=3,3)],u[4]=u[5]=e):u[0]<=f&&((a=t<2&&f<u[1])?(s=0,l.v=r,l.n=u[1]):f<_&&(a=t<3||u[0]>r||r>_)&&(u[4]=t,u[5]=r,l.n=_,s=0))}if(a||t>1)return i;throw p=!0,r}return function(a,d,_){if(c>1)throw TypeError("Generator is already running");for(p&&1===d&&f(d,_),s=d,o=_;(n=s<2?e:o)||!p;){u||(s?s<3?(s>1&&(l.n=-1),f(s,o)):l.n=o:l.v=o);try{if(c=2,u){if(s||(a="next"),n=u[a]){if(!(n=n.call(u,o)))throw TypeError("iterator result is not an object");if(!n.done)return n;o=n.value,s<2&&(s=0)}else 1===s&&(n=u.return)&&n.call(u),s<2&&(o=TypeError("The iterator does not provide a '"+a+"' method"),s=1);u=e}else if((n=(p=l.n<0)?o:t.call(r,l))!==i)break}catch(n){u=e,s=1,o=n}finally{c=1}}return{value:n,done:p}}}(t,a,u),!0),c}var i={};function s(){}function o(){}function c(){}n=Object.getPrototypeOf;var d=[][r]?n(n([][r]())):(_(n={},r,function(){return this}),n),p=c.prototype=s.prototype=Object.create(d);function l(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,_(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return o.prototype=c,_(p,"constructor",c),_(c,"constructor",o),o.displayName="GeneratorFunction",_(c,a,"GeneratorFunction"),_(p),_(p,a,"Generator"),_(p,r,function(){return this}),_(p,"toString",function(){return"[object Generator]"}),(f=function(){return{w:u,m:l}})()}function _(e,n,t,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}_=function(e,n,t,r){if(n)a?a(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t;else{var u=function(n,t){_(e,n,function(e){return this._invoke(n,t,e)})};u("next",0),u("throw",1),u("return",2)}},_(e,n,t,r)}function b(e,n,t,r,a,u,i){try{var s=e[u](i),o=s.value}catch(e){return void t(e)}s.done?n(o):Promise.resolve(o).then(r,a)}function y(e){return function(){var n=this,t=arguments;return new Promise(function(r,a){var u=e.apply(n,t);function i(e){b(u,r,a,i,s,"next",e)}function s(e){b(u,r,a,i,s,"throw",e)}i(void 0)})}}var v=t(655),m=t(299),h=t(263),k=(t(229),t(456).parseJwt),E=t(693).InputError,g=(t(511),t(128),t(692),t(236).Console,t(252).json,t(605).flags,function(){var e=y(f().m(function e(n,t,r){var a,u,i,s,o,c,d,p,l;return f().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1].includes(k(n).role)){e.n=1;break}throw new E("Un Authorise.");case 1:if(n.body.event_id){e.n=2;break}throw new E("Event Id Required");case 2:return e.n=3,v.getEventRunners(n.body.event_id);case 3:if(a=e.v,u=[],i=[],s=[],o=[],c=0,a.length>0)for(d=0;d<a.length;d++)s.push(a[d].main_market_id),1!=a[d].main_market_id&&2!=a[d].main_market_id||u.push(a[d]),6!=a[d].main_market_id&&7!=a[d].main_market_id||i.push(a[d]),11==a[d].main_market_id&&o.push({name:a[d].name,runnerId:a[d].runnerId}),9==a[d].main_market_id&&(c=a[d].runner_count);return s=s.filter(function(e,n,t){return t.indexOf(e)===n}),e.n=4,h.getEventByEventID(n.body.event_id);case 4:p=e.v,t.status(200).json({success:!0,data:a,event:p,runsmktdata:u,wktmktdata:i,activeMarkets:s,toss:o,pair_event_runners:c}),e.n=6;break;case 5:e.p=5,l=e.v,r(l);case 6:return e.a(2)}},e,null,[[0,5]])}));return function(n,t,r){return e.apply(this,arguments)}}()),w=function(){var e=y(f().m(function e(n,t,r){var a,u,i,s,o,c,d,p,l,_,b,y,v,g,w,F,J,V,G,H,Y,K,z,X,Q,Z;return f().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1].includes(k(n).role)){e.n=1;break}throw new E("Un Authorise.");case 1:if(n.body.event_id){e.n=2;break}throw new E("Event Id Required");case 2:if(n.body.eventtype){e.n=3;break}throw new E("Event Type Required");case 3:if(n.body.fieldsT1){e.n=4;break}throw new E("Runner Team-1 Required");case 4:if(n.body.fieldsT2){e.n=5;break}throw new E("Runner Team-2 Required");case 5:if(n.body.event_name){e.n=6;break}throw new E("Event Name Required");case 6:if(n.body.type){e.n=7;break}throw new E("Result Type Required");case 7:if(n.body.mType){e.n=8;break}throw new E("Market Type Required");case 8:if(n.body.revoke){e.n=9;break}throw new E("Revoke Type Required");case 9:return e.n=10,m.getProfile(k(n).email);case 10:return(a=e.v)[0].parent_id,a[0].id,n.body.user_id=a[0].id,n.body.parent_id=a[0].parent_id,n.body.event_name,u=n.body.fieldsT1,i=n.body.fieldsT2,n.body.team,e.n=11,h.getMarkets(n.body.event_id);case 11:for(s=e.v,o="",c="",d="",p="",l="",_="",b="",y="",v="",g="",w=0,F=0,J=0,V=0,G=0,H=0,Y=0,K=0,z=0,X=0,Q=0;Q<s.length;Q++)"NO_CUT"==s[Q].market_name&&(o=s[Q].id,w=s[Q].main_market_id),"CUT"==s[Q].market_name&&(c=s[Q].id,F=s[Q].main_market_id),"TOP_BATTER"==s[Q].market_name&&(l=s[Q].id,G=s[Q].main_market_id),"TOP_BOWLER"==s[Q].market_name&&(_=s[Q].id,H=s[Q].main_market_id),"ODD_EVEN"==s[Q].market_name&&(b=s[Q].id,Y=s[Q].main_market_id),"PAIR_EVENT"==s[Q].market_name&&(g=s[Q].id,X=s[Q].main_market_id),"1ST_INNING_KHADO"==s[Q].market_name&&(y=s[Q].id,K=s[Q].main_market_id),"1ST_INNING_TOTAL_SCORE"==s[Q].market_name&&(v=s[Q].id,z=s[Q].main_market_id),"BOWLER_WICKET_NO_CUT"==s[Q].market_name&&(d=s[Q].id,J=s[Q].main_market_id),"BOWLER_WICKET_CUT"==s[Q].market_name&&(p=s[Q].id,V=s[Q].main_market_id);if("runs"!=n.body.type){e.n=44;break}if("no"!=n.body.revoke){e.n=28;break}if("NO_CUT"!=n.body.mType){e.n=13;break}return e.n=12,O(n,u,i,w,o);case 12:e.v;case 13:if("CUT"!=n.body.mType){e.n=15;break}return e.n=14,S(n,u,i,F,c);case 14:e.v;case 15:if("TOP_BATTER"!=n.body.mType){e.n=17;break}return e.n=16,N(n,u,i,G,l);case 16:e.v;case 17:if("TOP_BOWLER"!=n.body.mType){e.n=19;break}return e.n=18,A(n,u,i,H,_);case 18:e.v;case 19:if("ODD_EVEN"!=n.body.mType){e.n=21;break}return e.n=20,U(n,u,i,Y,b);case 20:e.v;case 21:if("PAIR_EVENT"!=n.body.mType){e.n=23;break}return e.n=22,L(n,u,i,X,g);case 22:e.v;case 23:if("1ST_INNING_KHADO"!=n.body.mType){e.n=25;break}return e.n=24,M(n,u,i,K,y);case 24:e.v;case 25:if("1ST_INNING_TOTAL_SCORE"!=n.body.mType){e.n=27;break}return e.n=26,M(n,u,i,z,v);case 26:e.v;case 27:e.n=44;break;case 28:if("NO_CUT"!=n.body.mType){e.n=30;break}return e.n=29,R(n,u,i,w,o);case 29:e.v;case 30:if("CUT"!=n.body.mType){e.n=32;break}return e.n=31,T(n,u,i,F,c);case 31:e.v;case 32:if("TOP_BATTER"!=n.body.mType){e.n=34;break}return e.n=33,I(n,u,i,G,l);case 33:e.v;case 34:if("TOP_BOWLER"!=n.body.mType){e.n=36;break}return e.n=35,P(n,u,i,H,_);case 35:e.v;case 36:if("ODD_EVEN"!=n.body.mType){e.n=38;break}return e.n=37,D(n,u,i,Y,b);case 37:e.v;case 38:if("PAIR_EVENT"!=n.body.mType){e.n=40;break}return e.n=39,j(n,u,i,X,g);case 39:e.v;case 40:if("1ST_INNING_KHADO"!=n.body.mType){e.n=42;break}return e.n=41,C(n,u,i,K,y);case 41:e.v;case 42:if("1ST_INNING_TOTAL_SCORE"!=n.body.mType){e.n=44;break}return e.n=43,C(n,u,i,z,v);case 43:e.v;case 44:if("wickets"!=n.body.type){e.n=53;break}if("no"!=n.body.revoke){e.n=49;break}if("NO_CUT"!=n.body.mType){e.n=46;break}return e.n=45,B(n,u,i,J,d);case 45:e.v;case 46:if("CUT"!=n.body.mType){e.n=48;break}return e.n=47,q(n,u,i,V,p);case 47:e.v;case 48:e.n=53;break;case 49:if("NO_CUT"!=n.body.mType){e.n=51;break}return e.n=50,x(n,u,i,J,d);case 50:e.v;case 51:if("CUT"!=n.body.mType){e.n=53;break}return e.n=52,W(n,u,i,V,p);case 52:e.v;case 53:t.status(200).json({success:!0,data:n.body,message:"Result Updated"}),e.n=55;break;case 54:e.p=54,Z=e.v,r(Z);case 55:return e.a(2)}},e,null,[[0,54]])}));return function(n,t,r){return e.apply(this,arguments)}}(),O=function(){var e=y(f().m(function e(n,t,r,a,u){var i,s,o,d,_,b,y,h,E,g,w,O,R,S,T,N,I,A,P,U,D,M,C,L,j,B,x,q,W,F,J,V,G,H,Y,K,z,X,Q,Z,$,ee,ne,te,re,ae,ue,ie,se,oe,ce,de,pe,le,fe,_e,be,ye,ve,me,he,ke,Ee;return f().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,m.getProfile(k(n).email);case 1:return e.v,e.n=2,v.getPlayedUser(n.body.event_id,u);case 2:for(i=e.v,s={},o={},d={},_={},b=0;b<i.length;b++)"user"==i[b].type&&(s[i[b].user_id]||(s[i[b].user_id]=[]),s[i[b].user_id].push(i[b].runnerId),d[i[b].user_id]||(d[i[b].user_id]=[]),d[i[b].user_id].push(i[b].amount),_[i[b].user_id]||(_[i[b].user_id]=[]),_[i[b].user_id].push(i[b].exp)),"system"==i[b].type&&(o[i[b].user_id]||(o[i[b].user_id]=[]),o[i[b].user_id].push(i[b].runnerId));for(S in y=p(p({},t),r),h={},E={},g=[],w={},O={},R={},s){for(T=0,N=0;N<s[S].length;N++)I=s[S][N],T+=parseInt(y[I]||0),w[S]=w[S]||[],w[S].push(l({type:"user"},I,y[I])),n.body.eventtype,n.body.eventtype;h[S]=T,O[S]=_[S],R[S]=d[S],g.push(S)}for(A in o){for(P=0,U=0;U<o[A].length;U++)D=o[A][U],P+=parseInt(y[D]||0),w[A]=w[A]||[],w[A].push(l({type:"system"},D,y[D]));E[A]=P}if(M=[],C=[],L=[],j=[],B=[],x=[],q=[],0==g.length){e.n=5;break}return e.n=3,v.getPartChain(g);case 3:return x=e.v,e.n=4,v.getBalance(g);case 4:q=e.v;case 5:W=0,ke=c(h);case 6:if((Ee=ke()).done){e.n=16;break}if(F=Ee.value,J=0,V=0,G=0,H="",Y="",K=R[F][0],z=O[F][0]*K,X=JSON.parse(x[W].chain),!(h[F]>E[F])){e.n=11;break}J=Math.abs(h[F])*K,V=J,H="CR",Y=n.body.event_name+"/NO_CUT/RUN/WIN/ "+h[F]+" vs "+E[F]+"/"+K,Q=0;case 7:if(!(Q<X.length)){e.n=10;break}if(X[Q].id==F){e.n=9;break}return Z=1===Q?X[Q].part:X[Q].part-X[Q-1].part,$=-Math.abs(h[F])*Z/100,ee=$*=K,ne=X[Q].up_line*-J/100,te=X[Q].down_line*-J/100,re="DR",ae=n.body.event_name+"/NO_CUT/RUN/LOSS/ "+E[F]+" vs "+h[F]+"/"+K,C.push([X[Q].id,ee,ne,te]),ue=Math.abs(z)*Z/100,j.push([X[Q].id,ue]),e.n=8,v.getBalance(X[Q].id);case 8:ie=e.v,B.push([X[Q].id,$,Z,ne,te,re,X[Q].id,X[Q].id,ie[0].amount,ie[0].amount+$,u,a,n.body.event_id,ae,0,1]);case 9:Q++,e.n=7;break;case 10:e.n=15;break;case 11:J=-Math.abs(E[F])*K,V=J,H="DR",Y=n.body.event_name+"/NO_CUT/RUN/LOSS/ "+h[F]+" vs "+E[F]+"/"+K,se=0;case 12:if(!(se<X.length)){e.n=15;break}if(X[se].id==F){e.n=14;break}return oe=1===se?X[se].part:X[se].part-X[se-1].part,ce=Math.abs(E[F])*oe/100,de=ce*=K,pe=X[se].up_line*J/100,le=X[se].down_line*J/100,fe="CR",_e=n.body.event_name+"/NO_CUT/RUN/WIN/ "+E[F]+" vs "+h[F]+"/"+K,L.push([X[se].id,de,pe,le]),be=Math.abs(z)*oe/100,j.push([X[se].id,be]),e.n=13,v.getBalance(X[se].id);case 13:ye=e.v,B.push([X[se].id,ce,oe,pe,le,fe,X[se].id,X[se].id,ye[0].amount,ye[0].amount+ce,u,a,n.body.event_id,_e,0,1]);case 14:se++,e.n=12;break;case 15:M.push([F,J,V,G]),j.push([F,Math.abs(z)]),B.push([F,J,-100,V,G,H,F,F,q[W].amount,q[W].amount+J,u,a,n.body.event_id,Y,0,1]),W++,e.n=6;break;case 16:return w=JSON.stringify(w),(ve=[]).push([n.body.event_id,n.body.user_id,JSON.stringify(y),JSON.stringify(t),JSON.stringify(r),"NO_CUT","1","RUN","0"]),me="",e.n=17,v.getResultsEvents(n.body.event_id);case 17:return he=e.v,me=null!=he[0].results?he[0].results+",NO_CUT":"NO_CUT",B.push([n.body.user_id,0,0,0,0,0,n.body.user_id,n.body.user_id,0,0,u,a,n.body.event_id,n.body.event_name+"/RESULT RUNS SCORE UPDATED",0,0]),e.n=18,v.updateResult(ve);case 18:return e.v,e.n=19,v.updateEvent(n.body.event_id,me);case 19:if(me=e.v,0==M.length){e.n=21;break}return e.n=20,v.updateBalanceClient(M);case 20:e.v;case 21:if(0==C.length){e.n=23;break}return e.n=22,v.updateBalance(C);case 22:e.v;case 23:if(0==L.length){e.n=25;break}return e.n=24,v.updateBalance(L);case 24:e.v;case 25:if(0==B.length){e.n=27;break}return e.n=26,v.addAccountEntry(B);case 26:e.v;case 27:if(!(g.length>0)){e.n=30;break}return e.n=28,v.updateExp(j);case 28:return e.v,e.n=29,v.updateExpRunner(n.body.event_id,a);case 29:e.v;case 30:e.n=32;break;case 31:throw e.p=31,e.v;case 32:return e.a(2)}},e,null,[[0,31]])}));return function(n,t,r,a,u){return e.apply(this,arguments)}}(),R=function(){var e=y(f().m(function e(n,t,r,a,u){var i,s,o,d,_,b,y,h,E,g,w,O,R,S,T,N,I,A,P,U,D,M,C,L,j,B,x,q,W,F,J,V,G,H,Y,K,z,X,Q,Z,$,ee,ne,te,re,ae,ue,ie,se,oe,ce,de,pe,le,fe,_e,be,ye,ve,me,he,ke,Ee;return f().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,m.getProfile(k(n).email);case 1:return e.v,e.n=2,v.getPlayedUser(n.body.event_id,u);case 2:for(i=e.v,s={},o={},d={},_={},b=0;b<i.length;b++)"user"==i[b].type&&(s[i[b].user_id]||(s[i[b].user_id]=[]),s[i[b].user_id].push(i[b].runnerId),d[i[b].user_id]||(d[i[b].user_id]=[]),d[i[b].user_id].push(i[b].amount),_[i[b].user_id]||(_[i[b].user_id]=[]),_[i[b].user_id].push(i[b].exp)),"system"==i[b].type&&(o[i[b].user_id]||(o[i[b].user_id]=[]),o[i[b].user_id].push(i[b].runnerId));for(S in y=p(p({},t),r),h={},E={},g=[],w={},O={},R={},s){for(T=0,N=0;N<s[S].length;N++)I=s[S][N],T+=parseInt(y[I]||0),w[S]=w[S]||[],w[S].push(l({type:"user"},I,y[I])),n.body.eventtype,n.body.eventtype;h[S]=T,O[S]=_[S],R[S]=d[S],g.push(S)}for(A in o){for(P=0,U=0;U<o[A].length;U++)D=o[A][U],P+=parseInt(y[D]||0),w[A]=w[A]||[],w[A].push(l({type:"system"},D,y[D]));E[A]=P}if(M=[],C=[],L=[],j=[],B=[],x=[],q=[],0==g.length){e.n=5;break}return e.n=3,v.getPartChain(g);case 3:return x=e.v,e.n=4,v.getBalance(g);case 4:q=e.v;case 5:W=0,ke=c(h);case 6:if((Ee=ke()).done){e.n=16;break}if(F=Ee.value,J=0,V=0,G=0,H="",Y="",K=R[F][0],z=O[F][0]*K,X=JSON.parse(x[W].chain),!(h[F]>E[F])){e.n=11;break}J=-Math.abs(h[F])*K,V=J,H="DR",Y=n.body.event_name+"/NO_CUT/RUN/WIN/REVOKED "+h[F]+" vs "+E[F]+"/"+K,Q=0;case 7:if(!(Q<X.length)){e.n=10;break}if(X[Q].id==F){e.n=9;break}return Z=1===Q?X[Q].part:X[Q].part-X[Q-1].part,$=Math.abs(h[F])*Z/100,ee=$*=K,ne=X[Q].up_line*-J/100,te=X[Q].down_line*-J/100,re="CR",ae=n.body.event_name+"/NO_CUT/RUN/LOSS/REVOKED "+E[F]+" vs "+h[F]+"/"+K,C.push([X[Q].id,ee,ne,te]),ue=Math.abs(z)*Z/100,j.push([X[Q].id,-ue]),e.n=8,v.getBalance(X[Q].id);case 8:ie=e.v,B.push([X[Q].id,$,Z,ne,te,re,X[Q].id,X[Q].id,ie[0].amount,ie[0].amount+$,u,a,n.body.event_id,ae,0,1]);case 9:Q++,e.n=7;break;case 10:e.n=15;break;case 11:J=Math.abs(E[F])*K,V=J,H="CR",Y=n.body.event_name+"/NO_CUT/RUN/LOSS/REVOKED "+h[F]+" vs "+E[F]+"/"+K,se=0;case 12:if(!(se<X.length)){e.n=15;break}if(X[se].id==F){e.n=14;break}return oe=1===se?X[se].part:X[se].part-X[se-1].part,ce=-Math.abs(E[F])*oe/100,de=ce*=K,pe=X[se].up_line*J/100,le=X[se].down_line*J/100,fe="DR",_e=n.body.event_name+"/NO_CUT/RUN/WIN/REVOKED "+E[F]+" vs "+h[F]+"/"+K,L.push([X[se].id,de,pe,le]),be=Math.abs(z)*oe/100,j.push([X[se].id,-be]),e.n=13,v.getBalance(X[se].id);case 13:ye=e.v,B.push([X[se].id,ce,oe,pe,le,fe,X[se].id,X[se].id,ye[0].amount,ye[0].amount+ce,u,a,n.body.event_id,_e,0,1]);case 14:se++,e.n=12;break;case 15:M.push([F,J,V,G]),j.push([F,-Math.abs(z)]),B.push([F,J,-100,V,G,H,F,F,q[W].amount,q[W].amount+J,u,a,n.body.event_id,Y,0,1]),W++,e.n=6;break;case 16:return w=JSON.stringify(w),(ve=[]).push([n.body.event_id,n.body.user_id,JSON.stringify(y),JSON.stringify(t),JSON.stringify(r),"NO_CUT","1","RUN",1]),me="",e.n=17,v.getResultsEvents(n.body.event_id);case 17:return he=e.v,me=null!=he[0].results?he[0].results+",NO_CUT":"NO_CUT",B.push([n.body.user_id,0,0,0,0,0,n.body.user_id,n.body.user_id,0,0,u,a,n.body.event_id,n.body.event_name+"/RESULT RUNS SCORE UPDATED",0,1]),e.n=18,v.updateResult(ve);case 18:return e.v,e.n=19,v.updateEvent(n.body.event_id,me);case 19:if(me=e.v,0==M.length){e.n=21;break}return e.n=20,v.updateBalanceClient(M);case 20:e.v;case 21:if(0==C.length){e.n=23;break}return e.n=22,v.updateBalance(C);case 22:e.v;case 23:if(0==L.length){e.n=25;break}return e.n=24,v.updateBalance(L);case 24:e.v;case 25:if(0==B.length){e.n=27;break}return e.n=26,v.addAccountEntry(B);case 26:e.v;case 27:if(!(g.length>0)){e.n=30;break}return e.n=28,v.updateExp(j);case 28:return e.v,e.n=29,v.updateExpRunner(n.body.event_id,a);case 29:e.v;case 30:e.n=32;break;case 31:throw e.p=31,e.v;case 32:return e.a(2)}},e,null,[[0,31]])}));return function(n,t,r,a,u){return e.apply(this,arguments)}}(),S=function(){var e=y(f().m(function e(n,t,r,a,u){var i,s,o,d,_,b,y,m,h,k,E,g,w,O,R,S,T,N,I,A,P,U,D,M,C,L,j,B,x,q,W,F,J,V,G,H,Y,K,z,X,Q,Z,$,ee,ne,te,re,ae,ue,ie,se,oe,ce,de,pe,le,fe,_e,be,ye,ve,me,he,ke,Ee;return f().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,v.getPlayedUser(n.body.event_id,u);case 1:for(i=e.v,s={},o={},d={},_={},b=0;b<i.length;b++)"user"==i[b].type&&(s[i[b].user_id]||(s[i[b].user_id]=[]),s[i[b].user_id].push(i[b].runnerId),d[i[b].user_id]||(d[i[b].user_id]=[]),d[i[b].user_id].push(i[b].amount),_[i[b].user_id]||(_[i[b].user_id]=[]),_[i[b].user_id].push(i[b].exp)),"system"==i[b].type&&(o[i[b].user_id]||(o[i[b].user_id]=[]),o[i[b].user_id].push(i[b].runnerId));for(O in y=p(p({},t),r),m={},h={},k=[],E={},g={},w={},s){for(R=0,S=0;S<s[O].length;S++)T=s[O][S],R+=parseInt(y[T]||0),E[O]=E[O]||[],E[O].push(l({type:"user"},T,y[T])),n.body.eventtype,n.body.eventtype;m[O]=R,g[O]=_[O],w[O]=d[O],k.push(O)}for(N in o){for(I=0,A=0;A<o[N].length;A++)P=o[N][A],I+=parseInt(y[P]||0),E[N]=E[N]||[],E[N].push(l({type:"system"},P,y[P]));h[N]=I}if(U=[],D=[],M=[],C=[],L=[],j=[],B=[],0==k.length){e.n=4;break}return e.n=2,v.getPartChain(k);case 2:return j=e.v,e.n=3,v.getBalance(k);case 3:B=e.v;case 4:x=0,ke=c(m);case 5:if((Ee=ke()).done){e.n=15;break}if(q=Ee.value,W=0,F=0,J=0,V="",G="",H=w[q][0],Y=g[q][0]*H,K=JSON.parse(j[x].chain),!(m[q]>h[q])){e.n=10;break}z=Math.abs(m[q])-Math.abs(h[q]),F=W=z*H,V="CR",G=n.body.event_name+"/CUT/RUN/WIN/"+W+"/"+m[q]+" vs "+h[q]+"/"+H,X=0;case 6:if(!(X<K.length)){e.n=9;break}if(K[X].id==q){e.n=8;break}return Q=1===X?K[X].part:K[X].part-K[X-1].part,Z=-Math.abs(W)*Q/100,$=Z,ee=K[X].up_line*-W/100,ne=K[X].down_line*-W/100,te="DR",re=n.body.event_name+"/CUT/RUN/LOSS/"+Z+"/",h[q],m[q],D.push([K[X].id,$,ee,ne]),ae=Math.abs(Y)*Q/100,C.push([K[X].id,ae]),e.n=7,v.getBalance(K[X].id);case 7:ue=e.v,L.push([K[X].id,Z,Q,ee,ne,te,K[X].id,K[X].id,ue[0].amount,ue[0].amount+Z,u,a,n.body.event_id,re,0,1]);case 8:X++,e.n=6;break;case 9:e.n=14;break;case 10:ie=Math.abs(h[q])-Math.abs(m[q]),F=W=-(W=ie*H),V="DR",G=n.body.event_name+"/CUT/RUN/LOSS/"+W+"/"+m[q]+" vs "+h[q]+"/"+H,se=0;case 11:if(!(se<K.length)){e.n=14;break}if(K[se].id==q){e.n=13;break}return oe=1===se?K[se].part:K[se].part-K[se-1].part,ce=Math.abs(W)*oe/100,de=ce,pe=K[se].up_line*W/100,le=K[se].down_line*W/100,fe="CR",_e=n.body.event_name+"/CUT/RUN/WIN/"+ce+"/"+h[q]+" vs "+m[q]+"/"+H,M.push([K[se].id,de,pe,le]),be=Math.abs(Y)*oe/100,C.push([K[se].id,be]),e.n=12,v.getBalance(K[se].id);case 12:ye=e.v,L.push([K[se].id,ce,oe,pe,le,fe,K[se].id,K[se].id,ye[0].amount,ye[0].amount+ce,u,a,n.body.event_id,_e,0,1]);case 13:se++,e.n=11;break;case 14:U.push([q,W,F,J]),C.push([q,Math.abs(Y)]),L.push([q,W,-100,F,J,V,q,q,B[x].amount,B[x].amount+W,u,a,n.body.event_id,G,0,1]),x++,e.n=5;break;case 15:return E=JSON.stringify(E),(ve=[]).push([n.body.event_id,n.body.user_id,JSON.stringify(y),JSON.stringify(t),JSON.stringify(r),"CUT","2","RUN","0"]),me="",e.n=16,v.getResultsEvents(n.body.event_id);case 16:return he=e.v,me=null!=he[0].results?he[0].results+",CUT":"CUT",L.push([n.body.user_id,0,0,0,0,0,n.body.user_id,n.body.user_id,0,0,u,a,n.body.event_id,n.body.event_name+"/RESULT RUNS SCORE UPDATED",0,1]),e.n=17,v.updateResult(ve);case 17:return e.v,e.n=18,v.updateEvent(n.body.event_id,me);case 18:if(me=e.v,0==U.length){e.n=20;break}return e.n=19,v.updateBalanceClient(U);case 19:e.v;case 20:if(0==D.length){e.n=22;break}return e.n=21,v.updateBalance(D);case 21:e.v;case 22:if(0==M.length){e.n=24;break}return e.n=23,v.updateBalance(M);case 23:e.v;case 24:if(0==L.length){e.n=26;break}return e.n=25,v.addAccountEntry(L);case 25:e.v;case 26:if(!(k.length>0)){e.n=29;break}return e.n=27,v.updateExp(C);case 27:return e.v,e.n=28,v.updateExpRunner(n.body.event_id,a);case 28:e.v;case 29:e.n=31;break;case 30:throw e.p=30,e.v;case 31:return e.a(2)}},e,null,[[0,30]])}));return function(n,t,r,a,u){return e.apply(this,arguments)}}(),T=function(){var e=y(f().m(function e(n,t,r,a,u){var i,s,o,d,_,b,y,m,h,k,E,g,w,O,R,S,T,N,I,A,P,U,D,M,C,L,j,B,x,q,W,F,J,V,G,H,Y,K,z,X,Q,Z,$,ee,ne,te,re,ae,ue,ie,se,oe,ce,de,pe,le,fe,_e,be,ye,ve,me,he,ke,Ee;return f().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,v.getPlayedUser(n.body.event_id,u);case 1:for(i=e.v,s={},o={},d={},_={},b=0;b<i.length;b++)"user"==i[b].type&&(s[i[b].user_id]||(s[i[b].user_id]=[]),s[i[b].user_id].push(i[b].runnerId),d[i[b].user_id]||(d[i[b].user_id]=[]),d[i[b].user_id].push(i[b].amount),_[i[b].user_id]||(_[i[b].user_id]=[]),_[i[b].user_id].push(i[b].exp)),"system"==i[b].type&&(o[i[b].user_id]||(o[i[b].user_id]=[]),o[i[b].user_id].push(i[b].runnerId));for(O in y=p(p({},t),r),m={},h={},k=[],E={},g={},w={},s){for(R=0,S=0;S<s[O].length;S++)T=s[O][S],R+=parseInt(y[T]||0),E[O]=E[O]||[],E[O].push(l({type:"user"},T,y[T])),n.body.eventtype,n.body.eventtype;m[O]=R,g[O]=_[O],w[O]=d[O],k.push(O)}for(N in o){for(I=0,A=0;A<o[N].length;A++)P=o[N][A],I+=parseInt(y[P]||0),E[N]=E[N]||[],E[N].push(l({type:"system"},P,y[P]));h[N]=I}if(U=[],D=[],M=[],C=[],L=[],j=[],B=[],0==k.length){e.n=4;break}return e.n=2,v.getPartChain(k);case 2:return j=e.v,e.n=3,v.getBalance(k);case 3:B=e.v;case 4:x=0,ke=c(m);case 5:if((Ee=ke()).done){e.n=15;break}if(q=Ee.value,W=0,F=0,J=0,V="",G="",H=w[q][0],Y=g[q][0]*H,K=JSON.parse(j[x].chain),!(m[q]>h[q])){e.n=10;break}z=Math.abs(m[q])-Math.abs(h[q]),W=-(W=z*H),F=W,V="DR",G=n.body.event_name+"/CUT/RUN/REVOKED/"+W+"/"+m[q]+" vs "+h[q]+"/"+H,X=0;case 6:if(!(X<K.length)){e.n=9;break}if(K[X].id==q){e.n=8;break}return Q=1===X?K[X].part:K[X].part-K[X-1].part,Z=Math.abs(W)*Q/100,$=Z,ee=K[X].up_line*-W/100,ne=K[X].down_line*-W/100,te="CR",re=n.body.event_name+"/CUT/RUN/LOSS/REVOKED/"+Z+"/",h[q],m[q],D.push([K[X].id,$,ee,ne]),ae=Math.abs(Y)*Q/100,C.push([K[X].id,-ae]),e.n=7,v.getBalance(K[X].id);case 7:ue=e.v,L.push([K[X].id,Z,Q,ee,ne,te,K[X].id,K[X].id,ue[0].amount,ue[0].amount+Z,u,a,n.body.event_id,re,0,1]);case 8:X++,e.n=6;break;case 9:e.n=14;break;case 10:ie=Math.abs(h[q])-Math.abs(m[q]),F=W=ie*H,V="CR",G=n.body.event_name+"/CUT/RUN/LOSS/REVOKED/"+W+"/"+m[q]+" vs "+h[q]+"/"+H,se=0;case 11:if(!(se<K.length)){e.n=14;break}if(K[se].id==q){e.n=13;break}return oe=1===se?K[se].part:K[se].part-K[se-1].part,ce=-Math.abs(W)*oe/100,de=ce,pe=K[se].up_line*W/100,le=K[se].down_line*W/100,fe="DR",_e=n.body.event_name+"/CUT/RUN/WIN/REVOKED/"+ce+"/"+h[q]+" vs "+m[q]+"/"+H,M.push([K[se].id,de,pe,le]),be=Math.abs(Y)*oe/100,C.push([K[se].id,-be]),e.n=12,v.getBalance(K[se].id);case 12:ye=e.v,L.push([K[se].id,ce,oe,pe,le,fe,K[se].id,K[se].id,ye[0].amount,ye[0].amount+ce,u,a,n.body.event_id,_e,0,1]);case 13:se++,e.n=11;break;case 14:U.push([q,W,F,J]),C.push([q,-Math.abs(Y)]),L.push([q,W,-100,F,J,V,q,q,B[x].amount,B[x].amount+W,u,a,n.body.event_id,G,0,1]),x++,e.n=5;break;case 15:return E=JSON.stringify(E),(ve=[]).push([n.body.event_id,n.body.user_id,JSON.stringify(y),JSON.stringify(t),JSON.stringify(r),"CUT","2","RUN",1]),me="",e.n=16,v.getResultsEvents(n.body.event_id);case 16:return he=e.v,me=null!=he[0].results?he[0].results+",CUT":"CUT",L.push([n.body.user_id,0,0,0,0,0,n.body.user_id,n.body.user_id,0,0,u,a,n.body.event_id,n.body.event_name+"/RESULT RUNS SCORE UPDATED",0,1]),e.n=17,v.updateResult(ve);case 17:return e.v,e.n=18,v.updateEvent(n.body.event_id,me);case 18:if(me=e.v,0==U.length){e.n=20;break}return e.n=19,v.updateBalanceClient(U);case 19:e.v;case 20:if(0==D.length){e.n=22;break}return e.n=21,v.updateBalance(D);case 21:e.v;case 22:if(0==M.length){e.n=24;break}return e.n=23,v.updateBalance(M);case 23:e.v;case 24:if(0==L.length){e.n=26;break}return e.n=25,v.addAccountEntry(L);case 25:e.v;case 26:if(!(k.length>0)){e.n=29;break}return e.n=27,v.updateExp(C);case 27:return e.v,e.n=28,v.updateExpRunner(n.body.event_id,a);case 28:e.v;case 29:e.n=31;break;case 30:throw e.p=30,e.v;case 31:return e.a(2)}},e,null,[[0,30]])}));return function(n,t,r,a,u){return e.apply(this,arguments)}}(),N=function(){var e=y(f().m(function e(n,t,r,a,u){var s,o,d,_,b,y,h,E,g,w,O,R,S,T,N,I,A,P,U,D,M,C,L,j,B,x,q,W,F,J,V,G,H,Y,K,z,X,Q,Z,$,ee,ne,te,re,ae,ue,ie,se,oe,ce,de,pe,le,fe,_e,be,ye,ve,me,he,ke,Ee,ge,we;return f().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,m.getProfile(k(n).email);case 1:return e.v,e.n=2,v.getPlayedUser(n.body.event_id,u);case 2:for(s=e.v,o={},d={},_={},b={},y=0;y<s.length;y++)"user"==s[y].type&&(o[s[y].user_id]||(o[s[y].user_id]=[]),o[s[y].user_id].push(s[y].runnerId),_[s[y].user_id]||(_[s[y].user_id]=[]),_[s[y].user_id].push(s[y].amount),b[s[y].user_id]||(b[s[y].user_id]=[]),b[s[y].user_id].push(s[y].exp)),"system"==s[y].type&&(d[s[y].user_id]||(d[s[y].user_id]=[]),d[s[y].user_id].push(s[y].runnerId));for(T in h=p(p({},t),r),E={},g={},w=[],O={},R={},S={},o){for(N=0,I=0;I<o[T].length;I++)A=o[T][I],N+=parseInt(h[A]||0),O[T]=O[T]||[],O[T].push(l({type:"user"},A,h[A])),n.body.eventtype,n.body.eventtype;E[T]=N,R[T]=b[T],S[T]=_[T],w.push(T)}for(P in d){for(U=0,D=0;D<d[P].length;D++)M=d[P][D],U+=parseInt(h[M]||0),O[P]=O[P]||[],O[P].push(l({type:"system"},M,h[M]));g[P]=U}if(C=[],L=[],j=[],B=[],x=[],q=[],W=[],0==w.length){e.n=5;break}return e.n=3,v.getPartChain(w);case 3:return q=e.v,e.n=4,v.getBalance(w);case 4:W=e.v;case 5:F=0,(J=Object.entries(E).reduce(function(e,n){var t=i(n,2),r=t[0],a=t[1];return parseInt(e[1])>parseInt(a)?e:[r,a]},["",0]))[1]>0&&(J=J[1]),console.log(J),ge=c(E);case 6:if((we=ge()).done){e.n=16;break}if(V=we.value,G=0,H=0,Y=0,K="",z="",X=S[V][0],Q=R[V][0]*X,Z=JSON.parse(q[F].chain),E[V]!=J){e.n=11;break}G=Math.abs(X),H=G,K="CR",z=n.body.event_name+"/TOP_BATTER/WIN/R/"+E[V]+"/Amt/"+X,$=0;case 7:if(!($<Z.length)){e.n=10;break}if(Z[$].id==V){e.n=9;break}return ee=1===$?Z[$].part:Z[$].part-Z[$-1].part,ne=-Math.abs(X)*ee/100,te=ne,re=Z[$].up_line*-G/100,ae=Z[$].down_line*-G/100,ue="DR",ie=n.body.event_name+"/TOP_BATTER/LOSS/R/"+E[V]+"/Amt/"+X,L.push([Z[$].id,te,re,ae]),se=Math.abs(Q)*ee/100,B.push([Z[$].id,se]),e.n=8,v.getBalance(Z[$].id);case 8:oe=e.v,x.push([Z[$].id,ne,ee,re,ae,ue,Z[$].id,Z[$].id,oe[0].amount,oe[0].amount+ne,u,a,n.body.event_id,ie,0,1]);case 9:$++,e.n=7;break;case 10:e.n=15;break;case 11:G=-Math.abs(X),H=G,K="DR",z=n.body.event_name+"/TOP_BATTER/LOSS/R/"+E[V]+"/Amt/"+X,ce=0;case 12:if(!(ce<Z.length)){e.n=15;break}if(Z[ce].id==V){e.n=14;break}return de=1===ce?Z[ce].part:Z[ce].part-Z[ce-1].part,pe=Math.abs(X)*de/100,le=pe,fe=Z[ce].up_line*G/100,_e=Z[ce].down_line*G/100,be="CR",ye=n.body.event_name+"/TOP_BATTER/WIN/R/"+E[V]+"/Amt/"+X,j.push([Z[ce].id,le,fe,_e]),ve=Math.abs(Q)*de/100,B.push([Z[ce].id,ve]),e.n=13,v.getBalance(Z[ce].id);case 13:me=e.v,x.push([Z[ce].id,pe,de,fe,_e,be,Z[ce].id,Z[ce].id,me[0].amount,me[0].amount+pe,u,a,n.body.event_id,ye,0,1]);case 14:ce++,e.n=12;break;case 15:C.push([V,G,H,Y]),B.push([V,Math.abs(Q)]),x.push([V,G,-100,H,Y,K,V,V,W[F].amount,W[F].amount+G,u,a,n.body.event_id,z,0,1]),F++,e.n=6;break;case 16:return O=JSON.stringify(O),(he=[]).push([n.body.event_id,n.body.user_id,JSON.stringify(h),JSON.stringify(t),JSON.stringify(r),"TOP_BATTER","8","RUN","0"]),ke="",e.n=17,v.getResultsEvents(n.body.event_id);case 17:return Ee=e.v,ke=null!=Ee[0].results?Ee[0].results+",TOP_BATTER":"TOP_BATTER",x.push([n.body.user_id,0,0,0,0,0,n.body.user_id,n.body.user_id,0,0,u,a,n.body.event_id,n.body.event_name+"/RESULT RUNS SCORE UPDATED",0,0]),e.n=18,v.updateResult(he);case 18:return e.v,e.n=19,v.updateEvent(n.body.event_id,ke);case 19:if(ke=e.v,0==C.length){e.n=21;break}return e.n=20,v.updateBalanceClient(C);case 20:e.v;case 21:if(0==L.length){e.n=23;break}return e.n=22,v.updateBalance(L);case 22:e.v;case 23:if(0==j.length){e.n=25;break}return e.n=24,v.updateBalance(j);case 24:e.v;case 25:if(0==x.length){e.n=27;break}return e.n=26,v.addAccountEntry(x);case 26:e.v;case 27:if(!(w.length>0)){e.n=30;break}return e.n=28,v.updateExp(B);case 28:return e.v,e.n=29,v.updateExpRunner(n.body.event_id,a);case 29:e.v;case 30:e.n=32;break;case 31:throw e.p=31,e.v;case 32:return e.a(2)}},e,null,[[0,31]])}));return function(n,t,r,a,u){return e.apply(this,arguments)}}(),I=function(){var e=y(f().m(function e(n,t,r,a,u){var s,o,d,_,b,y,h,E,g,w,O,R,S,T,N,I,A,P,U,D,M,C,L,j,B,x,q,W,F,J,V,G,H,Y,K,z,X,Q,Z,$,ee,ne,te,re,ae,ue,ie,se,oe,ce,de,pe,le,fe,_e,be,ye,ve,me,he,ke,Ee,ge,we;return f().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,m.getProfile(k(n).email);case 1:return e.v,e.n=2,v.getPlayedUser(n.body.event_id,u);case 2:for(s=e.v,o={},d={},_={},b={},y=0;y<s.length;y++)"user"==s[y].type&&(o[s[y].user_id]||(o[s[y].user_id]=[]),o[s[y].user_id].push(s[y].runnerId),_[s[y].user_id]||(_[s[y].user_id]=[]),_[s[y].user_id].push(s[y].amount),b[s[y].user_id]||(b[s[y].user_id]=[]),b[s[y].user_id].push(s[y].exp)),"system"==s[y].type&&(d[s[y].user_id]||(d[s[y].user_id]=[]),d[s[y].user_id].push(s[y].runnerId));for(T in h=p(p({},t),r),E={},g={},w=[],O={},R={},S={},o){for(N=0,I=0;I<o[T].length;I++)A=o[T][I],N+=parseInt(h[A]||0),O[T]=O[T]||[],O[T].push(l({type:"user"},A,h[A])),n.body.eventtype,n.body.eventtype;E[T]=N,R[T]=b[T],S[T]=_[T],w.push(T)}for(P in d){for(U=0,D=0;D<d[P].length;D++)M=d[P][D],U+=parseInt(h[M]||0),O[P]=O[P]||[],O[P].push(l({type:"system"},M,h[M]));g[P]=U}if(C=[],L=[],j=[],B=[],x=[],q=[],W=[],0==w.length){e.n=5;break}return e.n=3,v.getPartChain(w);case 3:return q=e.v,e.n=4,v.getBalance(w);case 4:W=e.v;case 5:F=0,(J=Object.entries(E).reduce(function(e,n){var t=i(n,2),r=t[0],a=t[1];return parseInt(e[1])>parseInt(a)?e:[r,a]},["",0]))[1]>0&&(J=J[1]),ge=c(E);case 6:if((we=ge()).done){e.n=16;break}if(V=we.value,G=0,H=0,Y=0,K="",z="",X=S[V][0],Q=R[V][0]*X,Z=JSON.parse(q[F].chain),E[V]!=J){e.n=11;break}G=-Math.abs(X),H=G,K="DR",z=n.body.event_name+"/TOP_BATTER/WIN/REVOKED/R/"+E[V]+"/Amt/"+X,$=0;case 7:if(!($<Z.length)){e.n=10;break}if(Z[$].id==V){e.n=9;break}return ee=1===$?Z[$].part:Z[$].part-Z[$-1].part,ne=Math.abs(X)*ee/100,te=ne,re=Z[$].up_line*-G/100,ae=Z[$].down_line*-G/100,ue="CR",ie=n.body.event_name+"/TOP_BATTER/LOSS/REVOKED/R/"+E[V]+"/Amt/"+X,L.push([Z[$].id,te,re,ae]),se=Math.abs(Q)*ee/100,B.push([Z[$].id,-se]),e.n=8,v.getBalance(Z[$].id);case 8:oe=e.v,x.push([Z[$].id,ne,ee,re,ae,ue,Z[$].id,Z[$].id,oe[0].amount,oe[0].amount+ne,u,a,n.body.event_id,ie,0,1]);case 9:$++,e.n=7;break;case 10:e.n=15;break;case 11:G=Math.abs(X),H=G,K="CR",z=n.body.event_name+"/TOP_BATTER/LOSS/REVOKED/R/"+E[V]+"/Amt/"+X,ce=0;case 12:if(!(ce<Z.length)){e.n=15;break}if(Z[ce].id==V){e.n=14;break}return de=1===ce?Z[ce].part:Z[ce].part-Z[ce-1].part,pe=-Math.abs(X)*de/100,le=pe,fe=Z[ce].up_line*G/100,_e=Z[ce].down_line*G/100,be="CR",ye=n.body.event_name+"/TOP_BATTER/WIN/REVOKED/R/"+E[V]+"/Amt/"+X,j.push([Z[ce].id,le,fe,_e]),ve=Math.abs(Q)*de/100,B.push([Z[ce].id,-ve]),e.n=13,v.getBalance(Z[ce].id);case 13:me=e.v,x.push([Z[ce].id,pe,de,fe,_e,be,Z[ce].id,Z[ce].id,me[0].amount,me[0].amount+pe,u,a,n.body.event_id,ye,0,1]);case 14:ce++,e.n=12;break;case 15:C.push([V,G,H,Y]),B.push([V,Math.abs(Q)]),x.push([V,G,-100,H,Y,K,V,V,W[F].amount,W[F].amount+G,u,a,n.body.event_id,z,0,1]),F++,e.n=6;break;case 16:return O=JSON.stringify(O),(he=[]).push([n.body.event_id,n.body.user_id,JSON.stringify(h),JSON.stringify(t),JSON.stringify(r),"TOP_BATTER","8","RUN","1"]),ke="",e.n=17,v.getResultsEvents(n.body.event_id);case 17:return Ee=e.v,ke=null!=Ee[0].results?Ee[0].results+",TOP_BATTER":"TOP_BATTER",x.push([n.body.user_id,0,0,0,0,0,n.body.user_id,n.body.user_id,0,0,u,a,n.body.event_id,n.body.event_name+"/RESULT RUNS SCORE UPDATED",0,0]),e.n=18,v.updateResult(he);case 18:return e.v,e.n=19,v.updateEvent(n.body.event_id,ke);case 19:if(ke=e.v,0==C.length){e.n=21;break}return e.n=20,v.updateBalanceClient(C);case 20:e.v;case 21:if(0==L.length){e.n=23;break}return e.n=22,v.updateBalance(L);case 22:e.v;case 23:if(0==j.length){e.n=25;break}return e.n=24,v.updateBalance(j);case 24:e.v;case 25:if(0==x.length){e.n=27;break}return e.n=26,v.addAccountEntry(x);case 26:e.v;case 27:if(!(w.length>0)){e.n=30;break}return e.n=28,v.updateExp(B);case 28:return e.v,e.n=29,v.updateExpRunner(n.body.event_id,a);case 29:e.v;case 30:e.n=32;break;case 31:throw e.p=31,e.v;case 32:return e.a(2)}},e,null,[[0,31]])}));return function(n,t,r,a,u){return e.apply(this,arguments)}}(),A=function(){var e=y(f().m(function e(n,t,r,a,u){var s,o,d,_,b,y,h,E,g,w,O,R,S,T,N,I,A,P,U,D,M,C,L,j,B,x,q,W,F,J,V,G,H,Y,K,z,X,Q,Z,$,ee,ne,te,re,ae,ue,ie,se,oe,ce,de,pe,le,fe,_e,be,ye,ve,me,he,ke,Ee,ge;return f().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,m.getProfile(k(n).email);case 1:return e.v,e.n=2,v.getPlayedUser(n.body.event_id,u);case 2:for(s=e.v,o={},d={},_={},b={},y=0;y<s.length;y++)"user"==s[y].type&&(o[s[y].user_id]||(o[s[y].user_id]=[]),o[s[y].user_id].push(s[y].runnerId),_[s[y].user_id]||(_[s[y].user_id]=[]),_[s[y].user_id].push(s[y].amount),b[s[y].user_id]||(b[s[y].user_id]=[]),b[s[y].user_id].push(s[y].exp)),"system"==s[y].type&&(d[s[y].user_id]||(d[s[y].user_id]=[]),d[s[y].user_id].push(s[y].runnerId));for(T in h=p(p({},t),r),E={},g={},w=[],O={},R={},S={},o){for(N=0,I=0;I<o[T].length;I++)A=o[T][I],N+=parseInt(h[A]||0),O[T]=O[T]||[],O[T].push(l({type:"user"},A,h[A])),n.body.eventtype,n.body.eventtype;E[T]=N,R[T]=b[T],S[T]=_[T],w.push(T)}for(P in d){for(U=0,D=0;D<d[P].length;D++)M=d[P][D],U+=parseInt(h[M]||0),O[P]=O[P]||[],O[P].push(l({type:"system"},M,h[M]));g[P]=U}if(C=[],L=[],j=[],B=[],x=[],q=[],W=[],0==w.length){e.n=5;break}return e.n=3,v.getPartChain(w);case 3:return q=e.v,e.n=4,v.getBalance(w);case 4:W=e.v;case 5:F=0,(J=Object.entries(E).reduce(function(e,n){var t=i(n,2),r=t[0],a=t[1];return parseInt(e[1])>parseInt(a)?e:[r,a]},["",0]))[1]>0&&(J=J[1]),Ee=c(E);case 6:if((ge=Ee()).done){e.n=16;break}if(V=ge.value,G=0,H=0,Y=0,K="",z="",X=S[V][0],Q=R[V][0]*X,Z=JSON.parse(q[F].chain),E[V]!=J){e.n=11;break}G=Math.abs(X),H=G,K="CR",z=n.body.event_name+"/TOP_BOWLER/WIN/R/"+E[V]+"/Amt/"+X,$=0;case 7:if(!($<Z.length)){e.n=10;break}if(Z[$].id==V){e.n=9;break}return ee=1===$?Z[$].part:Z[$].part-Z[$-1].part,ne=-Math.abs(X)*ee/100,te=ne,re=Z[$].up_line*-G/100,ae=Z[$].down_line*-G/100,ue="DR",ie=n.body.event_name+"/TOP_BOWLER/LOSS/R/"+E[V]+"/Amt/"+X,L.push([Z[$].id,te,re,ae]),se=Math.abs(Q)*ee/100,B.push([Z[$].id,se]),e.n=8,v.getBalance(Z[$].id);case 8:oe=e.v,x.push([Z[$].id,ne,ee,re,ae,ue,Z[$].id,Z[$].id,oe[0].amount,oe[0].amount+ne,u,a,n.body.event_id,ie,0,1]);case 9:$++,e.n=7;break;case 10:e.n=15;break;case 11:G=-Math.abs(X),H=G,K="DR",z=n.body.event_name+"/TOP_BOWLER/LOSS/R/"+E[V]+"/Amt/"+X,ce=0;case 12:if(!(ce<Z.length)){e.n=15;break}if(Z[ce].id==V){e.n=14;break}return de=1===ce?Z[ce].part:Z[ce].part-Z[ce-1].part,pe=Math.abs(X)*de/100,le=pe,fe=Z[ce].up_line*G/100,_e=Z[ce].down_line*G/100,be="CR",ye=n.body.event_name+"/TOP_BOWLER/WIN/R/"+E[V]+"/Amt/"+X,j.push([Z[ce].id,le,fe,_e]),ve=Math.abs(Q)*de/100,B.push([Z[ce].id,ve]),e.n=13,v.getBalance(Z[ce].id);case 13:me=e.v,x.push([Z[ce].id,pe,de,fe,_e,be,Z[ce].id,Z[ce].id,me[0].amount,me[0].amount+pe,u,a,n.body.event_id,ye,0,1]);case 14:ce++,e.n=12;break;case 15:C.push([V,G,H,Y]),B.push([V,Math.abs(Q)]),x.push([V,G,-100,H,Y,K,V,V,W[F].amount,W[F].amount+G,u,a,n.body.event_id,z,0,1]),F++,e.n=6;break;case 16:return O=JSON.stringify(O),(he=[]).push([n.body.event_id,n.body.user_id,JSON.stringify(h),JSON.stringify(t),JSON.stringify(r),"TOP_BOWLER","10","RUN","0"]),e.n=17,v.getResultsEvents(n.body.event_id);case 17:return null!=(ke=e.v)[0].results&&ke[0].results,x.push([n.body.user_id,0,0,0,0,0,n.body.user_id,n.body.user_id,0,0,u,a,n.body.event_id,n.body.event_name+"/RESULT RUNS SCORE UPDATED",0,0]),e.n=18,v.updateResult(he);case 18:if(e.v,0==C.length){e.n=20;break}return e.n=19,v.updateBalanceClient(C);case 19:e.v;case 20:if(0==L.length){e.n=22;break}return e.n=21,v.updateBalance(L);case 21:e.v;case 22:if(0==j.length){e.n=24;break}return e.n=23,v.updateBalance(j);case 23:e.v;case 24:if(0==x.length){e.n=26;break}return e.n=25,v.addAccountEntry(x);case 25:e.v;case 26:if(!(w.length>0)){e.n=29;break}return e.n=27,v.updateExp(B);case 27:return e.v,e.n=28,v.updateExpRunner(n.body.event_id,a);case 28:e.v;case 29:e.n=31;break;case 30:throw e.p=30,e.v;case 31:return e.a(2)}},e,null,[[0,30]])}));return function(n,t,r,a,u){return e.apply(this,arguments)}}(),P=function(){var e=y(f().m(function e(n,t,r,a,u){var s,o,d,_,b,y,h,E,g,w,O,R,S,T,N,I,A,P,U,D,M,C,L,j,B,x,q,W,F,J,V,G,H,Y,K,z,X,Q,Z,$,ee,ne,te,re,ae,ue,ie,se,oe,ce,de,pe,le,fe,_e,be,ye,ve,me,he,ke,Ee,ge,we;return f().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,m.getProfile(k(n).email);case 1:return e.v,e.n=2,v.getPlayedUser(n.body.event_id,u);case 2:for(s=e.v,o={},d={},_={},b={},y=0;y<s.length;y++)"user"==s[y].type&&(o[s[y].user_id]||(o[s[y].user_id]=[]),o[s[y].user_id].push(s[y].runnerId),_[s[y].user_id]||(_[s[y].user_id]=[]),_[s[y].user_id].push(s[y].amount),b[s[y].user_id]||(b[s[y].user_id]=[]),b[s[y].user_id].push(s[y].exp)),"system"==s[y].type&&(d[s[y].user_id]||(d[s[y].user_id]=[]),d[s[y].user_id].push(s[y].runnerId));for(T in h=p(p({},t),r),E={},g={},w=[],O={},R={},S={},o){for(N=0,I=0;I<o[T].length;I++)A=o[T][I],N+=parseInt(h[A]||0),O[T]=O[T]||[],O[T].push(l({type:"user"},A,h[A])),n.body.eventtype,n.body.eventtype;E[T]=N,R[T]=b[T],S[T]=_[T],w.push(T)}for(P in d){for(U=0,D=0;D<d[P].length;D++)M=d[P][D],U+=parseInt(h[M]||0),O[P]=O[P]||[],O[P].push(l({type:"system"},M,h[M]));g[P]=U}if(C=[],L=[],j=[],B=[],x=[],q=[],W=[],0==w.length){e.n=5;break}return e.n=3,v.getPartChain(w);case 3:return q=e.v,e.n=4,v.getBalance(w);case 4:W=e.v;case 5:F=0,(J=Object.entries(E).reduce(function(e,n){var t=i(n,2),r=t[0],a=t[1];return parseInt(e[1])>parseInt(a)?e:[r,a]},["",0]))[1]>0&&(J=J[1]),ge=c(E);case 6:if((we=ge()).done){e.n=16;break}if(V=we.value,G=0,H=0,Y=0,K="",z="",X=S[V][0],Q=R[V][0]*X,Z=JSON.parse(q[F].chain),E[V]!=J){e.n=11;break}G=-Math.abs(X),H=G,K="DR",z=n.body.event_name+"/TOP_BOWLER/WIN/REVOKED/R/"+E[V]+"/Amt/"+X,$=0;case 7:if(!($<Z.length)){e.n=10;break}if(Z[$].id==V){e.n=9;break}return ee=1===$?Z[$].part:Z[$].part-Z[$-1].part,ne=Math.abs(X)*ee/100,te=ne,re=Z[$].up_line*-G/100,ae=Z[$].down_line*-G/100,ue="CR",ie=n.body.event_name+"/TOP_BOWLER/LOSS/REVOKED/R/"+E[V]+"/Amt/"+X,L.push([Z[$].id,te,re,ae]),se=Math.abs(Q)*ee/100,B.push([Z[$].id,-se]),e.n=8,v.getBalance(Z[$].id);case 8:oe=e.v,x.push([Z[$].id,ne,ee,re,ae,ue,Z[$].id,Z[$].id,oe[0].amount,oe[0].amount+ne,u,a,n.body.event_id,ie,0,1]);case 9:$++,e.n=7;break;case 10:e.n=15;break;case 11:G=Math.abs(X),H=G,K="CR",z=n.body.event_name+"/TOP_BOWLER/LOSS/REVOKED/R/"+E[V]+"/Amt/"+X,ce=0;case 12:if(!(ce<Z.length)){e.n=15;break}if(Z[ce].id==V){e.n=14;break}return de=1===ce?Z[ce].part:Z[ce].part-Z[ce-1].part,pe=-Math.abs(X)*de/100,le=pe,fe=Z[ce].up_line*G/100,_e=Z[ce].down_line*G/100,be="CR",ye=n.body.event_name+"/TOP_BOWLER/WIN/REVOKED/R/"+E[V]+"/Amt/"+X,j.push([Z[ce].id,le,fe,_e]),ve=Math.abs(Q)*de/100,B.push([Z[ce].id,-ve]),e.n=13,v.getBalance(Z[ce].id);case 13:me=e.v,x.push([Z[ce].id,pe,de,fe,_e,be,Z[ce].id,Z[ce].id,me[0].amount,me[0].amount+pe,u,a,n.body.event_id,ye,0,1]);case 14:ce++,e.n=12;break;case 15:C.push([V,G,H,Y]),B.push([V,Math.abs(Q)]),x.push([V,G,-100,H,Y,K,V,V,W[F].amount,W[F].amount+G,u,a,n.body.event_id,z,0,1]),F++,e.n=6;break;case 16:return O=JSON.stringify(O),(he=[]).push([n.body.event_id,n.body.user_id,JSON.stringify(h),JSON.stringify(t),JSON.stringify(r),"TOP_BOWLER","10","RUN","1"]),ke="",e.n=17,v.getResultsEvents(n.body.event_id);case 17:return Ee=e.v,ke=null!=Ee[0].results?Ee[0].results+",TOP_BOWLER":"TOP_BOWLER",x.push([n.body.user_id,0,0,0,0,0,n.body.user_id,n.body.user_id,0,0,u,a,n.body.event_id,n.body.event_name+"/RESULT RUNS SCORE UPDATED",0,0]),e.n=18,v.updateResult(he);case 18:return e.v,e.n=19,v.updateEvent(n.body.event_id,ke);case 19:if(ke=e.v,0==C.length){e.n=21;break}return e.n=20,v.updateBalanceClient(C);case 20:e.v;case 21:if(0==L.length){e.n=23;break}return e.n=22,v.updateBalance(L);case 22:e.v;case 23:if(0==j.length){e.n=25;break}return e.n=24,v.updateBalance(j);case 24:e.v;case 25:if(0==x.length){e.n=27;break}return e.n=26,v.addAccountEntry(x);case 26:e.v;case 27:if(!(w.length>0)){e.n=30;break}return e.n=28,v.updateExp(B);case 28:return e.v,e.n=29,v.updateExpRunner(n.body.event_id,a);case 29:e.v;case 30:e.n=32;break;case 31:throw e.p=31,e.v;case 32:return e.a(2)}},e,null,[[0,31]])}));return function(n,t,r,a,u){return e.apply(this,arguments)}}(),U=function(){var e=y(f().m(function e(n,t,r,a,u){var i,s,o,d,_,b,y,h,E,g,w,O,R,S,T,N,I,A,P,U,D,M,C,L,j,B,x,q,W,F,J,V,G,H,Y,K,z,X,Q,Z,$,ee,ne,te,re,ae,ue,ie,se,oe,ce,de,pe,le,fe,_e,be,ye,ve,me,he,ke,Ee,ge,we,Oe,Re,Se,Te,Ne,Ie,Ae,Pe,Ue,De,Me,Ce,Le;return f().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,m.getProfile(k(n).email);case 1:return e.v,e.n=2,v.getPlayedUser(n.body.event_id,u);case 2:for(i=e.v,s={},o={},d={},_={},b={},y=[],h=0;h<i.length;h++)"user"==i[h].type&&(s[i[h].user_id]||(s[i[h].user_id]=[]),s[i[h].user_id].push(i[h].runnerId),d[i[h].user_id]||(d[i[h].user_id]=[]),d[i[h].user_id].push(i[h].amount),_[i[h].user_id]||(_[i[h].user_id]=[]),_[i[h].user_id].push(i[h].exp),b[i[h].user_id]||(b[i[h].user_id]=[]),b[i[h].user_id].push({runnerId:i[h].runnerId,user_id:i[h].user_id,odd_even:i[h].odd_even,runner_name:i[h].runner_name,runs:null}),y.push(i[h].user_id)),"system"==i[h].type&&(o[i[h].user_id]||(o[i[h].user_id]=[]),o[i[h].user_id].push(i[h].runnerId));if(E=p(p({},t),r),g={},w=[],O=[],R=[],S=[],T=[],N=[],I=[],A=[],P=[],y=y.filter(function(e,n,t){return t.indexOf(e)===n}),0==y.length){e.n=5;break}return e.n=3,v.getPartChain(y);case 3:return A=e.v,e.n=4,v.getBalance(y);case 4:P=e.v;case 5:U=0,Ce=c(s);case 6:if((Le=Ce()).done){e.n=32;break}D=Le.value,M=0;case 7:if(!(M<s[D].length)){e.n=31;break}C=0,L=0,j=0,B="",x="",q=d[D][0],W=_[D][0],F=JSON.parse(A[U].chain),J=s[D][M],V=0;case 8:if(!(V<b[D].length)){e.n=29;break}if(G=b[D][V].runner_name,H=b[D][V].odd_even,b[D][V].runnerId!=J){e.n=28;break}if("odd"!=H){e.n=18;break}if(E[J]%2!=0){e.n=13;break}C=-Math.abs(q),L=C,B="DR",x=n.body.event_name+"/ODD_EVEN/"+G+"/"+H+"/LOSS/ "+E[J]+"/"+q,Y=0;case 9:if(!(Y<F.length)){e.n=12;break}if(F[Y].id==D){e.n=11;break}return K=1===Y?F[Y].part:F[Y].part-F[Y-1].part,z=Math.abs(K)/100,X=z*=q,Q=F[Y].up_line*C/100,Z=F[Y].down_line*C/100,$="CR",ee=n.body.event_name+"/ODD_EVEN/"+G+"/"+H+"/WIN/ "+E[J]+"/"+q,S.push([F[Y].id,X,Q,Z]),ne=Math.abs(W)*K/100,T.push([F[Y].id,ne]),e.n=10,v.getBalance(F[Y].id);case 10:te=e.v,N.push([F[Y].id,z,K,Q,Z,$,F[Y].id,F[Y].id,te[0].amount,te[0].amount+z,u,a,n.body.event_id,ee,0,1]);case 11:Y++,e.n=9;break;case 12:e.n=17;break;case 13:L=C=q,B="CR",x=n.body.event_name+"/ODD_EVEN/"+G+"/"+H+"/WIN/ "+E[J]+"/"+q,re=0;case 14:if(!(re<F.length)){e.n=17;break}if(F[re].id==D){e.n=16;break}return ae=1===re?F[re].part:F[re].part-F[re-1].part,ue=-Math.abs(q)*ae/100,ie=ue,se=F[re].up_line*-C/100,oe=F[re].down_line*-C/100,ce="DR",de=n.body.event_name+"/ODD_EVEN/"+G+"/"+H+"/LOSS/ "+E[J]+"/"+q,R.push([F[re].id,ie,se,oe]),pe=Math.abs(W)*ae/100,T.push([F[re].id,pe]),e.n=15,v.getBalance(F[re].id);case 15:le=e.v,N.push([F[re].id,ue,ae,se,oe,ce,F[re].id,F[re].id,le[0].amount,le[0].amount+ue,u,a,n.body.event_id,de,0,1]);case 16:re++,e.n=14;break;case 17:e.n=27;break;case 18:if(E[J]%2!=0){e.n=23;break}L=C=q,B="CR",x=n.body.event_name+"/ODD_EVEN/"+G+"/"+H+"/WIN/ "+E[J]+"/"+q,fe=0;case 19:if(!(fe<F.length)){e.n=22;break}if(F[fe].id==D){e.n=21;break}return _e=1===fe?F[fe].part:F[fe].part-F[fe-1].part,be=-Math.abs(q)*_e/100,ye=be,ve=F[fe].up_line*C/100,me=F[fe].down_line*C/100,he="DR",ke=n.body.event_name+"/ODD_EVEN/"+G+"/"+H+"/WIN/ "+E[J]+"/"+q,S.push([F[fe].id,ye,ve,me]),Ee=Math.abs(W)*_e/100,T.push([F[fe].id,Ee]),e.n=20,v.getBalance(F[fe].id);case 20:ge=e.v,N.push([F[fe].id,be,_e,ve,me,he,F[fe].id,F[fe].id,ge[0].amount,ge[0].amount+be,u,a,n.body.event_id,ke,0,1]);case 21:fe++,e.n=19;break;case 22:e.n=27;break;case 23:C=-Math.abs(q),L=C,B="DR",x=n.body.event_name+"/ODD_EVEN/"+G+"/"+H+"/LOSS/ "+E[J]+"/"+q,we=0;case 24:if(!(we<F.length)){e.n=27;break}if(F[we].id==D){e.n=26;break}return Oe=1===we?F[we].part:F[we].part-F[we-1].part,Re=Math.abs(q)*Oe/100,Se=Re,Te=F[we].up_line*C/100,Ne=F[we].down_line*C/100,Ie="CR",Ae=n.body.event_name+"/ODD_EVEN/"+G+"/"+H+"/WIN/ "+E[J]+"/"+q,S.push([F[we].id,Se,Te,Ne]),Pe=Math.abs(W)*Oe/100,T.push([F[we].id,Pe]),e.n=25,v.getBalance(F[we].id);case 25:Ue=e.v,N.push([F[we].id,Re,Oe,Te,Ne,Ie,F[we].id,F[we].id,Ue[0].amount,Ue[0].amount+Re,u,a,n.body.event_id,Ae,0,1]);case 26:we++,e.n=24;break;case 27:b[D][V].runs=parseInt(E[J]||null);case 28:V++,e.n=8;break;case 29:w.push(J),g[D]=g[D]||[],g[D].push(l({type:"user"},J,E[J])),O.push([D,C,L,j]),T.push([D,Math.abs(W)]),N.push([D,C,-100,L,j,B,D,D,P[M].amount,P[M].amount+C,u,a,n.body.event_id,x,0,0]);case 30:M++,e.n=7;break;case 31:U++,e.n=6;break;case 32:return g=JSON.stringify(g),I.push([n.body.event_id,n.body.user_id,JSON.stringify(E),JSON.stringify(t),JSON.stringify(r),"ODD_EVEN","3","RUN","0"]),De="",e.n=33,v.getResultsEvents(n.body.event_id);case 33:return Me=e.v,De=null!=Me[0].results?Me[0].results+",ODD_EVEN":"ODD_EVEN",N.push([n.body.user_id,0,0,0,0,0,n.body.user_id,n.body.user_id,0,0,u,a,n.body.event_id,n.body.event_name+"/RESULT RUNS SCORE UPDATED",0,0]),e.n=34,v.updateResult(I);case 34:return e.v,e.n=35,v.updateEvent(n.body.event_id,De);case 35:if(De=e.v,0==O.length){e.n=37;break}return e.n=36,v.updateBalanceClient(O);case 36:e.v;case 37:if(0==R.length){e.n=39;break}return e.n=38,v.updateBalance(R);case 38:e.v;case 39:if(0==S.length){e.n=41;break}return e.n=40,v.updateBalance(S);case 40:e.v;case 41:if(0==N.length){e.n=43;break}return e.n=42,v.addAccountEntry(N);case 42:e.v;case 43:if(!(y.length>0)){e.n=46;break}return e.n=44,v.updateExp(T);case 44:return e.v,e.n=45,v.updateExpRunner(n.body.event_id,a);case 45:e.v;case 46:e.n=48;break;case 47:throw e.p=47,e.v;case 48:return e.a(2)}},e,null,[[0,47]])}));return function(n,t,r,a,u){return e.apply(this,arguments)}}(),D=function(){var e=y(f().m(function e(n,t,r,a,u){var i,s,o,d,_,b,y,h,E,g,w,O,R,S,T,N,I,A,P,U,D,M,C,L,j,B,x,q,W,F,J,V,G,H,Y,K,z,X,Q,Z,$,ee,ne,te,re,ae,ue,ie,se,oe,ce,de,pe,le,fe,_e,be,ye,ve,me,he,ke,Ee;return f().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,m.getProfile(k(n).email);case 1:return e.v,e.n=2,v.getPlayedUser(n.body.event_id,u);case 2:for(i=e.v,s={},o={},d={},_={},b=0;b<i.length;b++)"user"==i[b].type&&(s[i[b].user_id]||(s[i[b].user_id]=[]),s[i[b].user_id].push(i[b].runnerId),d[i[b].user_id]||(d[i[b].user_id]=[]),d[i[b].user_id].push(i[b].amount),_[i[b].user_id]||(_[i[b].user_id]=[]),_[i[b].user_id].push(i[b].exp)),"system"==i[b].type&&(o[i[b].user_id]||(o[i[b].user_id]=[]),o[i[b].user_id].push(i[b].runnerId));for(S in y=p(p({},t),r),h={},E={},g=[],w={},O={},R={},s){for(T=0,N=0;N<s[S].length;N++)I=s[S][N],T+=parseInt(y[I]||0),w[S]=w[S]||[],w[S].push(l({type:"user"},I,y[I])),n.body.eventtype,n.body.eventtype;h[S]=T,O[S]=_[S],R[S]=d[S],g.push(S)}for(A in o){for(P=0,U=0;U<o[A].length;U++)D=o[A][U],P+=parseInt(y[D]||0),w[A]=w[A]||[],w[A].push(l({type:"system"},D,y[D]));E[A]=P}if(M=[],C=[],L=[],j=[],B=[],x=[],q=[],0==g.length){e.n=5;break}return e.n=3,v.getPartChain(g);case 3:return x=e.v,e.n=4,v.getBalance(g);case 4:q=e.v;case 5:W=0,ke=c(h);case 6:if((Ee=ke()).done){e.n=16;break}if(F=Ee.value,J=0,V=0,G=0,H="",Y="",K=R[F][0],z=O[F][0]*K,X=JSON.parse(x[W].chain),!(h[F]>E[F])){e.n=11;break}J=-Math.abs(h[F])*K,V=J,H="DR",Y=n.body.event_name+"/ODD_EVEN/RUN/WIN/REVOKED "+h[F]+" vs "+E[F]+"/"+K,Q=0;case 7:if(!(Q<X.length)){e.n=10;break}if(X[Q].id==F){e.n=9;break}return Z=1===Q?X[Q].part:X[Q].part-X[Q-1].part,$=Math.abs(h[F])*Z/100,ee=$*=K,ne=X[Q].up_line*-J/100,te=X[Q].down_line*-J/100,re="CR",ae=n.body.event_name+"/ODD_EVEN/RUN/LOSS/REVOKED "+E[F]+" vs "+h[F]+"/"+K,C.push([X[Q].id,ee,ne,te]),ue=Math.abs(z)*Z/100,j.push([X[Q].id,-ue]),e.n=8,v.getBalance(X[Q].id);case 8:ie=e.v,B.push([X[Q].id,$,Z,ne,te,re,X[Q].id,X[Q].id,ie[0].amount,ie[0].amount+$,u,a,n.body.event_id,ae,0,1]);case 9:Q++,e.n=7;break;case 10:e.n=15;break;case 11:J=Math.abs(E[F])*K,V=J,H="CR",Y=n.body.event_name+"/ODD_EVEN/RUN/LOSS/REVOKED "+h[F]+" vs "+E[F]+"/"+K,se=0;case 12:if(!(se<X.length)){e.n=15;break}if(X[se].id==F){e.n=14;break}return oe=1===se?X[se].part:X[se].part-X[se-1].part,ce=-Math.abs(E[F])*oe/100,de=ce*=K,pe=X[se].up_line*J/100,le=X[se].down_line*J/100,fe="DR",_e=n.body.event_name+"/ODD_EVEN/RUN/WIN/REVOKED "+E[F]+" vs "+h[F]+"/"+K,L.push([X[se].id,de,pe,le]),be=Math.abs(z)*oe/100,j.push([X[se].id,-be]),e.n=13,v.getBalance(X[se].id);case 13:ye=e.v,B.push([X[se].id,ce,oe,pe,le,fe,X[se].id,X[se].id,ye[0].amount,ye[0].amount+ce,u,a,n.body.event_id,_e,0,1]);case 14:se++,e.n=12;break;case 15:M.push([F,J,V,G]),j.push([F,-Math.abs(z)]),B.push([F,J,-100,V,G,H,F,F,q[W].amount,q[W].amount+J,u,a,n.body.event_id,Y,0,1]),W++,e.n=6;break;case 16:return w=JSON.stringify(w),(ve=[]).push([n.body.event_id,n.body.user_id,JSON.stringify(y),JSON.stringify(t),JSON.stringify(r),"ODD_EVEN","3","RUN",1]),me="",e.n=17,v.getResultsEvents(n.body.event_id);case 17:return he=e.v,me=null!=he[0].results?he[0].results+",ODD_EVEN":"ODD_EVEN",B.push([n.body.user_id,0,0,0,0,0,n.body.user_id,n.body.user_id,0,0,u,a,n.body.event_id,n.body.event_name+"/RESULT RUNS SCORE UPDATED",0,1]),e.n=18,v.updateResult(ve);case 18:return e.v,e.n=19,v.updateEvent(n.body.event_id,me);case 19:if(me=e.v,0==M.length){e.n=21;break}return e.n=20,v.updateBalanceClient(M);case 20:e.v;case 21:if(0==C.length){e.n=23;break}return e.n=22,v.updateBalance(C);case 22:e.v;case 23:if(0==L.length){e.n=25;break}return e.n=24,v.updateBalance(L);case 24:e.v;case 25:if(0==B.length){e.n=27;break}return e.n=26,v.addAccountEntry(B);case 26:e.v;case 27:if(!(g.length>0)){e.n=30;break}return e.n=28,v.updateExp(j);case 28:return e.v,e.n=29,v.updateExpRunner(n.body.event_id,a);case 29:e.v;case 30:e.n=32;break;case 31:throw e.p=31,e.v;case 32:return e.a(2)}},e,null,[[0,31]])}));return function(n,t,r,a,u){return e.apply(this,arguments)}}(),M=function(){var e=y(f().m(function e(n,t,r,a,u){var i,s,o,d,p,l,_,b,y,h,E,g,w,O,R,S,T,N,I,A,P,U,D,M,C,L,j,B,x,q,W,F,J,V,G,H,Y,K,z,X,Q,Z,$,ee,ne,te,re,ae,ue,ie,se,oe,ce,de,pe,le,fe,_e,be,ye,ve,me;return f().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,m.getProfile(k(n).email);case 1:return e.v,e.n=2,v.getPlayedUser(n.body.event_id,u);case 2:for(i=e.v,s={},o={},d={},p={},l={},_={4:"1ST_INNING_KHADO",5:"1ST_INNING_TOTAL_SCORE"}[a]||!1,b=0;b<i.length;b++)"user"==i[b].type&&(s[i[b].user_id]||(s[i[b].user_id]=[]),s[i[b].user_id].push(i[b].runnerId),d[i[b].user_id]||(d[i[b].user_id]=[]),d[i[b].user_id].push(i[b].amount),p[i[b].user_id]||(p[i[b].user_id]=[]),p[i[b].user_id].push(i[b].exp),l[i[b].user_id]||(l[i[b].user_id]=[]),l[i[b].user_id].push(i[b].run_digit)),"system"==i[b].type&&(o[i[b].user_id]||(o[i[b].user_id]=[]),o[i[b].user_id].push(i[b].runnerId));for(O in y={},h=[],E={},g={},w=0,s){for(R=0;R<s[O].length;R++)S=s[O][R],y[O]=S,rid=S,n.body.eventtype,n.body.eventtype;E[O]=p[O],g[O]=d[O],h.push(O)}if(T=[],N=[],I=[],A=[],P=[],U=[],D=[],0==h.length){e.n=5;break}return e.n=3,v.getPartChain(h);case 3:return U=e.v,e.n=4,v.getBalance(h);case 4:D=e.v;case 5:M=0,ve=c(y);case 6:if((me=ve()).done){e.n=16;break}if(C=me.value,j=0,B=0,x=0,q="",W="",F=g[C][0],J=E[C][0]*F,V=JSON.parse(U[M].chain),G=t[y[C]],H=l[C],w=G,Y=Math.abs(Math.floor(G))%10,null===(L={4:G>H-30&&G<=H,5:H==Y}[a])||void 0===L||!L){e.n=11;break}B=j=F,q="CR",W=n.body.event_name+"/"+_+"/WIN/"+F,K=0;case 7:if(!(K<V.length)){e.n=10;break}if(V[K].id==C){e.n=9;break}return z=1===K?V[K].part:V[K].part-V[K-1].part,X=-z/100,Q=X*=F,Z=V[K].up_line*-j/100,$=V[K].down_line*-j/100,ee="DR",ne=n.body.event_name+"/"+_+"/LOSS/"+F,N.push([V[K].id,Q,Z,$]),te=Math.abs(J)*z/100,A.push([V[K].id,te]),e.n=8,v.getBalance(V[K].id);case 8:re=e.v,P.push([V[K].id,X,z,Z,$,ee,V[K].id,V[K].id,re[0].amount,re[0].amount+X,u,a,n.body.event_id,ne,0,1]);case 9:K++,e.n=7;break;case 10:e.n=15;break;case 11:B=j=-F,q="DR",W=n.body.event_name+"/"+_+"/LOSS/"+F,ae=0;case 12:if(!(ae<V.length)){e.n=15;break}if(V[ae].id==C){e.n=14;break}return ue=1===ae?V[ae].part:V[ae].part-V[ae-1].part,ie=ue/100,se=ie*=F,oe=V[ae].up_line*j/100,ce=V[ae].down_line*j/100,de="CR",pe=n.body.event_name+"/"+_+"/WIN/"+F,I.push([V[ae].id,se,oe,ce]),le=Math.abs(J)*ue/100,A.push([V[ae].id,le]),e.n=13,v.getBalance(V[ae].id);case 13:fe=e.v,P.push([V[ae].id,ie,ue,oe,ce,de,V[ae].id,V[ae].id,fe[0].amount,fe[0].amount+ie,u,a,n.body.event_id,pe,0,1]);case 14:ae++,e.n=12;break;case 15:T.push([C,j,B,x]),A.push([C,Math.abs(J)]),P.push([C,j,-100,B,x,q,C,C,D[M].amount,D[M].amount+j,u,a,n.body.event_id,W,0,1]),M++,e.n=6;break;case 16:return(_e=[]).push([n.body.event_id,n.body.user_id,w,JSON.stringify(t),JSON.stringify(r),_,a,"RUN",0]),be="",e.n=17,v.getResultsEvents(n.body.event_id);case 17:return ye=e.v,be=null!=ye[0].results?ye[0].results+","+_:_,P.push([n.body.user_id,0,0,0,0,0,n.body.user_id,n.body.user_id,0,0,u,a,n.body.event_id,n.body.event_name+"/RESULT RUNS SCORE UPDATED",0,1]),e.n=18,v.updateResult(_e);case 18:return e.v,e.n=19,v.updateEvent(n.body.event_id,be);case 19:if(be=e.v,0==T.length){e.n=21;break}return e.n=20,v.updateBalanceClient(T);case 20:e.v;case 21:if(0==N.length){e.n=23;break}return e.n=22,v.updateBalance(N);case 22:e.v;case 23:if(0==I.length){e.n=25;break}return e.n=24,v.updateBalance(I);case 24:e.v;case 25:if(0==P.length){e.n=27;break}return e.n=26,v.addAccountEntry(P);case 26:e.v;case 27:if(!(h.length>0)){e.n=30;break}return e.n=28,v.updateExp(A);case 28:return e.v,e.n=29,v.updateExpRunner(n.body.event_id,a);case 29:e.v;case 30:e.n=32;break;case 31:throw e.p=31,e.v;case 32:return e.a(2)}},e,null,[[0,31]])}));return function(n,t,r,a,u){return e.apply(this,arguments)}}(),C=function(){var e=y(f().m(function e(n,t,r,a,u){var i,s,o,d,p,l,_,b,y,h,E,g,w,O,R,S,T,N,I,A,P,U,D,M,C,L,j,B,x,q,W,F,J,V,G,H,Y,K,z,X,Q,Z,$,ee,ne,te,re,ae,ue,ie,se,oe,ce,de,pe,le,fe,_e,be,ye,ve,me;return f().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,m.getProfile(k(n).email);case 1:return e.v,e.n=2,v.getPlayedUser(n.body.event_id,u);case 2:for(i=e.v,s={},o={},d={},p={},l={},_={4:"1ST_INNING_KHADO",5:"1ST_INNING_TOTAL_SCORE"}[a]||!1,b=0;b<i.length;b++)"user"==i[b].type&&(s[i[b].user_id]||(s[i[b].user_id]=[]),s[i[b].user_id].push(i[b].runnerId),d[i[b].user_id]||(d[i[b].user_id]=[]),d[i[b].user_id].push(i[b].amount),p[i[b].user_id]||(p[i[b].user_id]=[]),p[i[b].user_id].push(i[b].exp),l[i[b].user_id]||(l[i[b].user_id]=[]),l[i[b].user_id].push(i[b].run_digit)),"system"==i[b].type&&(o[i[b].user_id]||(o[i[b].user_id]=[]),o[i[b].user_id].push(i[b].runnerId));for(O in y={},h=[],E={},g={},w=0,s){for(R=0;R<s[O].length;R++)S=s[O][R],y[O]=S,n.body.eventtype,n.body.eventtype;E[O]=p[O],g[O]=d[O],h.push(O)}if(T=[],N=[],I=[],A=[],P=[],U=[],D=[],0==h.length){e.n=5;break}return e.n=3,v.getPartChain(h);case 3:return U=e.v,e.n=4,v.getBalance(h);case 4:D=e.v;case 5:M=0,ve=c(y);case 6:if((me=ve()).done){e.n=16;break}if(C=me.value,j=0,B=0,x=0,q="",W="",F=g[C][0],J=E[C][0]*F,V=JSON.parse(U[M].chain),G=t[y[C]],H=l[C],w=G,Y=Math.abs(Math.floor(G))%10,null===(L={4:G>H-30&&G<=H,5:H==Y}[a])||void 0===L||!L){e.n=11;break}B=j=-F,q="DR",W=n.body.event_name+"/"+_+"/WIN/REVOKED/"+F,K=0;case 7:if(!(K<V.length)){e.n=10;break}if(V[K].id==C){e.n=9;break}return z=1===K?V[K].part:V[K].part-V[K-1].part,X=z/100,Q=X*=F,Z=V[K].up_line*-j/100,$=V[K].down_line*-j/100,ee="CR",ne=n.body.event_name+"/"+_+"/LOSS/REVOKED/"+F,N.push([V[K].id,Q,Z,$]),te=Math.abs(J)*z/100,A.push([V[K].id,-te]),e.n=8,v.getBalance(V[K].id);case 8:re=e.v,P.push([V[K].id,X,z,Z,$,ee,V[K].id,V[K].id,re[0].amount,re[0].amount+X,u,a,n.body.event_id,ne,0,1]);case 9:K++,e.n=7;break;case 10:e.n=15;break;case 11:B=j=F,q="CR",W=n.body.event_name+"/"+_+"/LOSS/REVOKED/"+F,ae=0;case 12:if(!(ae<V.length)){e.n=15;break}if(V[ae].id==C){e.n=14;break}return ue=1===ae?V[ae].part:V[ae].part-V[ae-1].part,ie=-ue/100,se=ie*=F,oe=V[ae].up_line*j/100,ce=V[ae].down_line*j/100,de="DR",pe=n.body.event_name+"/"+_+"/WIN/REVOKED/"+F,I.push([V[ae].id,se,oe,ce]),le=Math.abs(J)*ue/100,A.push([V[ae].id,-le]),e.n=13,v.getBalance(V[ae].id);case 13:fe=e.v,P.push([V[ae].id,ie,ue,oe,ce,de,V[ae].id,V[ae].id,fe[0].amount,fe[0].amount+ie,u,a,n.body.event_id,pe,0,1]);case 14:ae++,e.n=12;break;case 15:T.push([C,j,B,x]),A.push([C,Math.abs(J)]),P.push([C,j,-100,B,x,q,C,C,D[M].amount,D[M].amount+j,u,a,n.body.event_id,W,0,1]),M++,e.n=6;break;case 16:return(_e=[]).push([n.body.event_id,n.body.user_id,w,JSON.stringify(t),JSON.stringify(r),_,a,"RUN",1]),be="",e.n=17,v.getResultsEvents(n.body.event_id);case 17:return ye=e.v,be=null!=ye[0].results?ye[0].results+","+_:_,P.push([n.body.user_id,0,0,0,0,0,n.body.user_id,n.body.user_id,0,0,u,a,n.body.event_id,n.body.event_name+"/RESULT RUNS SCORE UPDATED",0,1]),e.n=18,v.updateResult(_e);case 18:return e.v,e.n=19,v.updateEvent(n.body.event_id,be);case 19:if(be=e.v,0==T.length){e.n=21;break}return e.n=20,v.updateBalanceClient(T);case 20:e.v;case 21:if(0==N.length){e.n=23;break}return e.n=22,v.updateBalance(N);case 22:e.v;case 23:if(0==I.length){e.n=25;break}return e.n=24,v.updateBalance(I);case 24:e.v;case 25:if(0==P.length){e.n=27;break}return e.n=26,v.addAccountEntry(P);case 26:e.v;case 27:if(!(h.length>0)){e.n=30;break}return e.n=28,v.updateExp(A);case 28:return e.v,e.n=29,v.updateExpRunner(n.body.event_id,a);case 29:e.v;case 30:e.n=32;break;case 31:throw e.p=31,e.v;case 32:return e.a(2)}},e,null,[[0,31]])}));return function(n,t,r,a,u){return e.apply(this,arguments)}}(),L=function(){var e=y(f().m(function e(n,t,r,i,s){var o,d,l,_,b,y,h,E,g,w,O,R,S,T,N,I,A,P,U,D,M,C,L,j,B,x,q,W,F,J,V,G,H,Y,K,z,X,Q,Z,$,ee,ne,te,re,ae,ue,ie,se,oe,ce,de,pe,le,fe,_e,be,ye,ve,me,he,ke,Ee,ge,we,Oe,Re,Se,Te,Ne,Ie,Ae,Pe,Ue,De,Me,Ce,Le,je,Be,xe,qe,We,Fe,Je,Ve,Ge,He,Ye,Ke,ze,Xe;return f().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,m.getProfile(k(n).email);case 1:return e.v,e.n=2,v.getPlayedUser(n.body.event_id,s);case 2:for(o=e.v,d={},l={},_={},b={},y={},h={},E={},g={},w="PAIR_EVENT",O=0;O<o.length;O++)"user"==o[O].type&&(d[o[O].user_id]||(d[o[O].user_id]=[]),d[o[O].user_id].push(o[O].runnerId),_[o[O].user_id]||(_[o[O].user_id]=[]),_[o[O].user_id].push(o[O].amount),b[o[O].user_id]||(b[o[O].user_id]=[]),b[o[O].user_id].push(o[O].exp),E[o[O].runnerId]||(E[o[O].runnerId]=[]),E[o[O].runnerId].includes(o[O].runner_name)||E[o[O].runnerId].push(o[O].runner_name),g[o[O].runnerId]||(g[o[O].runnerId]=[]),g[o[O].runnerId].includes(o[O].team)||g[o[O].runnerId].push(o[O].team),1==o[O].team&&(y[o[O].runnerId]||(y[o[O].runnerId]=[]),y[o[O].runnerId].includes(o[O].runner_name)||y[o[O].runnerId].push(o[O].runner_name)),2==o[O].team&&(h[o[O].runnerId]||(h[o[O].runnerId]=[]),h[o[O].runnerId].includes(o[O].runner_name)||h[o[O].runnerId].push(o[O].runner_name))),"system"==o[O].type&&(l[o[O].user_id]||(l[o[O].user_id]=[]),l[o[O].user_id].push(o[O].runnerId));for(A in R={},S=[],T={},N={},I=0,d){for(R[A]=[],P=0;P<d[A].length;P++)U=d[A][P],R[A].push(U),n.body.eventtype,n.body.eventtype;T[A]=b[A],N[A]=_[A],S.push(A)}if(D=[],M=[],C=[],L=[],j=[],B=[],x=[],0==S.length){e.n=5;break}return e.n=3,v.getPartChain(S);case 3:return B=e.v,e.n=4,v.getBalance(S);case 4:x=e.v;case 5:for(F in q={},W={},y){J=y[F][0],V=J.split("-"),G=0,H=u(V);try{for(H.s();!(Y=H.n()).done;)K=Y.value,z=parseInt(K,10)-1,X=parseInt(t[z])||0,G+=X}catch(e){H.e(e)}finally{H.f()}q[F]=G}for(Q in h){Z=h[Q][0],$=Z.split("-"),ee=0,ne=u($);try{for(ne.s();!(te=ne.n()).done;)re=te.value,ae=parseInt(re,10)-1,ue=parseInt(r[ae])||0,ee+=ue}catch(e){ne.e(e)}finally{ne.f()}W[Q]=ee}ie=Math.max.apply(Math,a(Object.values(q))),Object.keys(q).filter(function(e){return q[e]===ie}),se=Math.max.apply(Math,a(Object.values(W))),Object.keys(W).filter(function(e){return W[e]===se}),oe=p(p({},q),W),ce=Math.max.apply(Math,a(Object.values(oe))),de=Object.keys(oe).filter(function(e){return oe[e]===ce}),pe=n.body.event_name.split("VS"),le=0,ze=c(R);case 6:if((Xe=ze()).done){e.n=19;break}fe=Xe.value,_e=0,be=0,ye=0,ve="",me="",he=N[fe][0],ke=T[fe][0]*he,Ee=JSON.parse(B[le].chain),ge=0;case 7:if(!(ge<R[fe].length)){e.n=18;break}if(we=g[R[fe][ge]]-1,Oe=pe[we],Re=E[R[fe][ge]][0],!de.includes(R[fe][ge].toString())){e.n=12;break}be=_e=he,ve="CR",me=n.body.event_name+"/"+w+"/WIN/"+Oe+"/PAIR["+Re+"]/"+he,Se=0;case 8:if(!(Se<Ee.length)){e.n=11;break}if(Ee[Se].id==fe){e.n=10;break}return Te=1===Se?Ee[Se].part:Ee[Se].part-Ee[Se-1].part,Ne=-Te/100,Ie=Ne*=he,Ae=Ee[Se].up_line*-_e/100,Pe=Ee[Se].down_line*-_e/100,Ue="DR",De=n.body.event_name+"/"+w+"/LOSS/"+Oe+"/PAIR["+Re+"]/"+he,M.push([Ee[Se].id,Ie,Ae,Pe]),Me=Math.abs(ke)*Te/100,L.push([Ee[Se].id,Me]),e.n=9,v.getBalance(Ee[Se].id);case 9:Ce=e.v,j.push([Ee[Se].id,Ne,Te,Ae,Pe,Ue,Ee[Se].id,Ee[Se].id,Ce[0].amount,Ce[0].amount+Ne,s,i,n.body.event_id,De,0,1]);case 10:Se++,e.n=8;break;case 11:e.n=16;break;case 12:be=_e=-he,ve="DR",me=n.body.event_name+"/"+w+"/LOSS/"+Oe+"/PAIR["+Re+"]/"+he,Le=0;case 13:if(!(Le<Ee.length)){e.n=16;break}if(Ee[Le].id==fe){e.n=15;break}return je=1===Le?Ee[Le].part:Ee[Le].part-Ee[Le-1].part,Be=je/100,xe=Be*=he,qe=Ee[Le].up_line*_e/100,We=Ee[Le].down_line*_e/100,Fe="CR",Je=n.body.event_name+"/"+w+"/WIN/"+Oe+"/PAIR["+Re+"]/"+he,C.push([Ee[Le].id,xe,qe,We]),Ve=Math.abs(ke)*je/100,L.push([Ee[Le].id,Ve]),e.n=14,v.getBalance(Ee[Le].id);case 14:Ge=e.v,j.push([Ee[Le].id,Be,je,qe,We,Fe,Ee[Le].id,Ee[Le].id,Ge[0].amount,Ge[0].amount+Be,s,i,n.body.event_id,Je,0,1]);case 15:Le++,e.n=13;break;case 16:D.push([fe,_e,be,ye]),L.push([fe,Math.abs(ke)]),j.push([fe,_e,-100,be,ye,ve,fe,fe,x[le].amount,x[le].amount+_e,s,i,n.body.event_id,me,0,1]);case 17:ge++,e.n=7;break;case 18:le++,e.n=6;break;case 19:return(He=[]).push([n.body.event_id,n.body.user_id,I,JSON.stringify(t),JSON.stringify(r),w,i,"RUN",0]),Ye="",e.n=20,v.getResultsEvents(n.body.event_id);case 20:return Ke=e.v,Ye=null!=Ke[0].results?Ke[0].results+","+w:w,j.push([n.body.user_id,0,0,0,0,0,n.body.user_id,n.body.user_id,0,0,s,i,n.body.event_id,n.body.event_name+"/RESULT RUNS SCORE UPDATED",0,1]),e.n=21,v.updateResult(He);case 21:return e.v,e.n=22,v.updateEvent(n.body.event_id,Ye);case 22:if(Ye=e.v,0==D.length){e.n=24;break}return e.n=23,v.updateBalanceClient(D);case 23:e.v;case 24:if(0==M.length){e.n=26;break}return e.n=25,v.updateBalance(M);case 25:e.v;case 26:if(0==C.length){e.n=28;break}return e.n=27,v.updateBalance(C);case 27:e.v;case 28:if(0==j.length){e.n=30;break}return e.n=29,v.addAccountEntry(j);case 29:e.v;case 30:if(!(S.length>0)){e.n=33;break}return e.n=31,v.updateExp(L);case 31:return e.v,e.n=32,v.updateExpRunner(n.body.event_id,i);case 32:e.v;case 33:e.n=35;break;case 34:throw e.p=34,e.v;case 35:return e.a(2)}},e,null,[[0,34]])}));return function(n,t,r,a,u){return e.apply(this,arguments)}}(),j=function(){var e=y(f().m(function e(n,t,r,i,s){var o,d,l,_,b,y,h,E,g,w,O,R,S,T,N,I,A,P,U,D,M,C,L,j,B,x,q,W,F,J,V,G,H,Y,K,z,X,Q,Z,$,ee,ne,te,re,ae,ue,ie,se,oe,ce,de,pe,le,fe,_e,be,ye,ve,me,he,ke,Ee,ge,we,Oe,Re,Se,Te,Ne,Ie,Ae,Pe,Ue,De,Me,Ce,Le,je,Be,xe,qe,We,Fe,Je,Ve,Ge,He,Ye,Ke,ze,Xe;return f().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,m.getProfile(k(n).email);case 1:return e.v,e.n=2,v.getPlayedUser(n.body.event_id,s);case 2:for(o=e.v,d={},l={},_={},b={},y={},h={},E={},g={},w="PAIR_EVENT",O=0;O<o.length;O++)"user"==o[O].type&&(d[o[O].user_id]||(d[o[O].user_id]=[]),d[o[O].user_id].push(o[O].runnerId),_[o[O].user_id]||(_[o[O].user_id]=[]),_[o[O].user_id].push(o[O].amount),b[o[O].user_id]||(b[o[O].user_id]=[]),b[o[O].user_id].push(o[O].exp),E[o[O].runnerId]||(E[o[O].runnerId]=[]),E[o[O].runnerId].includes(o[O].runner_name)||E[o[O].runnerId].push(o[O].runner_name),g[o[O].runnerId]||(g[o[O].runnerId]=[]),g[o[O].runnerId].includes(o[O].team)||g[o[O].runnerId].push(o[O].team),1==o[O].team&&(y[o[O].runnerId]||(y[o[O].runnerId]=[]),y[o[O].runnerId].includes(o[O].runner_name)||y[o[O].runnerId].push(o[O].runner_name)),2==o[O].team&&(h[o[O].runnerId]||(h[o[O].runnerId]=[]),h[o[O].runnerId].includes(o[O].runner_name)||h[o[O].runnerId].push(o[O].runner_name))),"system"==o[O].type&&(l[o[O].user_id]||(l[o[O].user_id]=[]),l[o[O].user_id].push(o[O].runnerId));for(A in R={},S=[],T={},N={},I=0,d){for(R[A]=[],P=0;P<d[A].length;P++)U=d[A][P],R[A].push(U),n.body.eventtype,n.body.eventtype;T[A]=b[A],N[A]=_[A],S.push(A)}if(D=[],M=[],C=[],L=[],j=[],B=[],x=[],0==S.length){e.n=5;break}return e.n=3,v.getPartChain(S);case 3:return B=e.v,e.n=4,v.getBalance(S);case 4:x=e.v;case 5:for(F in q={},W={},y){J=y[F][0],V=J.split("-"),G=0,H=u(V);try{for(H.s();!(Y=H.n()).done;)K=Y.value,z=parseInt(K,10)-1,X=parseInt(t[z])||0,G+=X}catch(e){H.e(e)}finally{H.f()}q[F]=G}for(Q in h){Z=h[Q][0],$=Z.split("-"),ee=0,ne=u($);try{for(ne.s();!(te=ne.n()).done;)re=te.value,ae=parseInt(re,10)-1,ue=parseInt(r[ae])||0,ee+=ue}catch(e){ne.e(e)}finally{ne.f()}W[Q]=ee}ie=Math.max.apply(Math,a(Object.values(q))),Object.keys(q).filter(function(e){return q[e]===ie}),se=Math.max.apply(Math,a(Object.values(W))),Object.keys(W).filter(function(e){return W[e]===se}),oe=p(p({},q),W),ce=Math.max.apply(Math,a(Object.values(oe))),de=Object.keys(oe).filter(function(e){return oe[e]===ce}),pe=n.body.event_name.split("VS"),le=0,ze=c(R);case 6:if((Xe=ze()).done){e.n=19;break}fe=Xe.value,_e=0,be=0,ye=0,ve="",me="",he=N[fe][0],ke=T[fe][0]*he,Ee=JSON.parse(B[le].chain),ge=0;case 7:if(!(ge<R[fe].length)){e.n=18;break}if(we=g[R[fe][ge]]-1,Oe=pe[we],Re=E[R[fe][ge]][0],!de.includes(R[fe][ge].toString())){e.n=12;break}be=_e=-he,ve="DR",me=n.body.event_name+"/"+w+"/WIN/REVOKED/"+Oe+"/PAIR["+Re+"]/"+he,Se=0;case 8:if(!(Se<Ee.length)){e.n=11;break}if(Ee[Se].id==fe){e.n=10;break}return Te=1===Se?Ee[Se].part:Ee[Se].part-Ee[Se-1].part,Ne=Te/100,Ie=Ne*=he,Ae=Ee[Se].up_line*-_e/100,Pe=Ee[Se].down_line*-_e/100,Ue="CR",De=n.body.event_name+"/"+w+"/LOSS/REVOKED/"+Oe+"/PAIR["+Re+"]/"+he,M.push([Ee[Se].id,Ie,Ae,Pe]),Me=Math.abs(ke)*Te/100,L.push([Ee[Se].id,-Me]),e.n=9,v.getBalance(Ee[Se].id);case 9:Ce=e.v,j.push([Ee[Se].id,Ne,Te,Ae,Pe,Ue,Ee[Se].id,Ee[Se].id,Ce[0].amount,Ce[0].amount+Ne,s,i,n.body.event_id,De,0,1]);case 10:Se++,e.n=8;break;case 11:e.n=16;break;case 12:be=_e=he,ve="CR",me=n.body.event_name+"/"+w+"/LOSS/REVOKED/"+Oe+"/PAIR["+Re+"]/"+he,Le=0;case 13:if(!(Le<Ee.length)){e.n=16;break}if(Ee[Le].id==fe){e.n=15;break}return je=1===Le?Ee[Le].part:Ee[Le].part-Ee[Le-1].part,Be=-je/100,xe=Be*=he,qe=Ee[Le].up_line*_e/100,We=Ee[Le].down_line*_e/100,Fe="DR",Je=n.body.event_name+"/"+w+"/WIN/REVOKED/"+Oe+"/PAIR["+Re+"]/"+he,C.push([Ee[Le].id,xe,qe,We]),Ve=Math.abs(ke)*je/100,L.push([Ee[Le].id,-Ve]),e.n=14,v.getBalance(Ee[Le].id);case 14:Ge=e.v,j.push([Ee[Le].id,Be,je,qe,We,Fe,Ee[Le].id,Ee[Le].id,Ge[0].amount,Ge[0].amount+Be,s,i,n.body.event_id,Je,0,1]);case 15:Le++,e.n=13;break;case 16:D.push([fe,_e,be,ye]),L.push([fe,Math.abs(ke)]),j.push([fe,_e,-100,be,ye,ve,fe,fe,x[le].amount,x[le].amount+_e,s,i,n.body.event_id,me,0,1]);case 17:ge++,e.n=7;break;case 18:le++,e.n=6;break;case 19:return(He=[]).push([n.body.event_id,n.body.user_id,I,JSON.stringify(t),JSON.stringify(r),w,i,"RUN",1]),Ye="",e.n=20,v.getResultsEvents(n.body.event_id);case 20:return Ke=e.v,Ye=null!=Ke[0].results?Ke[0].results+","+w:w,j.push([n.body.user_id,0,0,0,0,0,n.body.user_id,n.body.user_id,0,0,s,i,n.body.event_id,n.body.event_name+"/RESULT RUNS SCORE UPDATED",0,1]),e.n=21,v.updateResult(He);case 21:return e.v,e.n=22,v.updateEvent(n.body.event_id,Ye);case 22:if(Ye=e.v,0==D.length){e.n=24;break}return e.n=23,v.updateBalanceClient(D);case 23:e.v;case 24:if(0==M.length){e.n=26;break}return e.n=25,v.updateBalance(M);case 25:e.v;case 26:if(0==C.length){e.n=28;break}return e.n=27,v.updateBalance(C);case 27:e.v;case 28:if(0==j.length){e.n=30;break}return e.n=29,v.addAccountEntry(j);case 29:e.v;case 30:if(!(S.length>0)){e.n=33;break}return e.n=31,v.updateExp(L);case 31:return e.v,e.n=32,v.updateExpRunner(n.body.event_id,i);case 32:e.v;case 33:e.n=35;break;case 34:throw e.p=34,e.v;case 35:return e.a(2)}},e,null,[[0,34]])}));return function(n,t,r,a,u){return e.apply(this,arguments)}}(),B=function(){var e=y(f().m(function e(n,t,r,a,u){var i,s,o,d,_,b,y,h,E,g,w,O,R,S,T,N,I,A,P,U,D,M,C,L,j,B,x,q,W,F,J,V,G,H,Y,K,z,X,Q,Z,$,ee,ne,te,re,ae,ue,ie,se,oe,ce,de,pe,le,fe,_e,be,ye,ve,me,he,ke,Ee;return f().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,m.getProfile(k(n).email);case 1:return e.v,e.n=2,v.getPlayedUser(n.body.event_id,u);case 2:for(i=e.v,s={},o={},d={},_={},b=0;b<i.length;b++)"user"==i[b].type&&(s[i[b].user_id]||(s[i[b].user_id]=[]),s[i[b].user_id].push(i[b].runnerId),d[i[b].user_id]||(d[i[b].user_id]=[]),d[i[b].user_id].push(i[b].amount),_[i[b].user_id]||(_[i[b].user_id]=[]),_[i[b].user_id].push(i[b].exp)),"system"==i[b].type&&(o[i[b].user_id]||(o[i[b].user_id]=[]),o[i[b].user_id].push(i[b].runnerId));for(S in y=p(p({},t),r),h={},E={},g=[],w={},O={},R={},s){for(T=0,N=0;N<s[S].length;N++)I=s[S][N],T+=parseInt(y[I]||0),w[S]=w[S]||[],w[S].push(l({type:"user"},I,y[I])),n.body.eventtype,n.body.eventtype;h[S]=T,O[S]=_[S],R[S]=d[S],g.push(S)}for(A in o){for(P=0,U=0;U<o[A].length;U++)D=o[A][U],P+=parseInt(y[D]||0),w[A]=w[A]||[],w[A].push(l({type:"system"},D,y[D]));E[A]=P}if(M=[],C=[],L=[],j=[],B=[],x=[],q=[],0==g.length){e.n=5;break}return e.n=3,v.getPartChain(g);case 3:return x=e.v,e.n=4,v.getBalance(g);case 4:q=e.v;case 5:W=0,ke=c(h);case 6:if((Ee=ke()).done){e.n=16;break}if(F=Ee.value,J=0,V=0,G=0,H="",Y="",K=R[F][0],z=O[F][0]*K,X=JSON.parse(x[W].chain),!(h[F]>E[F])){e.n=11;break}J=Math.abs(h[F])*K,V=J,H="CR",Y=n.body.event_name+"/NO_CUT/WICKET/WIN/ "+h[F]+" vs "+E[F]+"/"+K,Q=0;case 7:if(!(Q<X.length)){e.n=10;break}if(X[Q].id==F){e.n=9;break}return Z=1===Q?X[Q].part:X[Q].part-X[Q-1].part,$=-Math.abs(h[F])*Z/100,ee=$*=K,ne=X[Q].up_line*-J/100,te=X[Q].down_line*-J/100,re="DR",ae=n.body.event_name+"/NO_CUT/WICKET/LOSS/ "+E[F]+" vs "+h[F]+"/"+K,C.push([X[Q].id,ee,ne,te]),ue=Math.abs(z)*Z/100,j.push([X[Q].id,ue]),e.n=8,v.getBalance(X[Q].id);case 8:ie=e.v,B.push([X[Q].id,$,Z,ne,te,re,X[Q].id,X[Q].id,ie[0].amount,ie[0].amount+$,u,a,n.body.event_id,ae,0,1]);case 9:Q++,e.n=7;break;case 10:e.n=15;break;case 11:J=-Math.abs(E[F])*K,V=J,H="DR",Y=n.body.event_name+"/NO_CUT/WICKET/LOSS/ "+h[F]+" vs "+E[F]+"/"+K,se=0;case 12:if(!(se<X.length)){e.n=15;break}if(X[se].id==F){e.n=14;break}return oe=1===se?X[se].part:X[se].part-X[se-1].part,ce=Math.abs(E[F])*oe/100,de=ce*=K,pe=X[se].up_line*J/100,le=X[se].down_line*J/100,fe="CR",_e=n.body.event_name+"/NO_CUT/WICKET/WIN/ "+E[F]+" vs "+h[F]+"/"+K,L.push([X[se].id,de,pe,le]),be=Math.abs(z)*oe/100,j.push([X[se].id,be]),e.n=13,v.getBalance(X[se].id);case 13:ye=e.v,B.push([X[se].id,ce,oe,pe,le,fe,X[se].id,X[se].id,ye[0].amount,ye[0].amount+ce,u,a,n.body.event_id,_e,0,1]);case 14:se++,e.n=12;break;case 15:M.push([F,J,V,G]),j.push([F,Math.abs(z)]),B.push([F,J,-100,V,G,H,F,F,q[W].amount,q[W].amount+J,u,a,n.body.event_id,Y,0,1]),W++,e.n=6;break;case 16:return w=JSON.stringify(w),(ve=[]).push([n.body.event_id,n.body.user_id,JSON.stringify(y),JSON.stringify(t),JSON.stringify(r),"NO_CUT","1","WICKET","0"]),me="",e.n=17,v.getResultsEvents(n.body.event_id);case 17:return he=e.v,me=null!=he[0].results?he[0].results+",NO_CUT":"NO_CUT",B.push([n.body.user_id,0,0,0,0,0,n.body.user_id,n.body.user_id,0,0,u,a,n.body.event_id,n.body.event_name+"/RESULT RUNS SCORE UPDATED",0,0]),e.n=18,v.updateResult(ve);case 18:return e.v,e.n=19,v.updateEvent(n.body.event_id,me);case 19:if(me=e.v,0==M.length){e.n=21;break}return e.n=20,v.updateBalanceClient(M);case 20:e.v;case 21:if(0==C.length){e.n=23;break}return e.n=22,v.updateBalance(C);case 22:e.v;case 23:if(0==L.length){e.n=25;break}return e.n=24,v.updateBalance(L);case 24:e.v;case 25:if(0==B.length){e.n=27;break}return e.n=26,v.addAccountEntry(B);case 26:e.v;case 27:if(!(g.length>0)){e.n=30;break}return e.n=28,v.updateExp(j);case 28:return e.v,e.n=29,v.updateExpRunner(n.body.event_id,a);case 29:e.v;case 30:e.n=32;break;case 31:throw e.p=31,e.v;case 32:return e.a(2)}},e,null,[[0,31]])}));return function(n,t,r,a,u){return e.apply(this,arguments)}}(),x=function(){var e=y(f().m(function e(n,t,r,a,u){var i,s,o,d,_,b,y,h,E,g,w,O,R,S,T,N,I,A,P,U,D,M,C,L,j,B,x,q,W,F,J,V,G,H,Y,K,z,X,Q,Z,$,ee,ne,te,re,ae,ue,ie,se,oe,ce,de,pe,le,fe,_e,be,ye,ve,me,he,ke,Ee;return f().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,m.getProfile(k(n).email);case 1:return e.v,e.n=2,v.getPlayedUser(n.body.event_id,u);case 2:for(i=e.v,s={},o={},d={},_={},b=0;b<i.length;b++)"user"==i[b].type&&(s[i[b].user_id]||(s[i[b].user_id]=[]),s[i[b].user_id].push(i[b].runnerId),d[i[b].user_id]||(d[i[b].user_id]=[]),d[i[b].user_id].push(i[b].amount),_[i[b].user_id]||(_[i[b].user_id]=[]),_[i[b].user_id].push(i[b].exp)),"system"==i[b].type&&(o[i[b].user_id]||(o[i[b].user_id]=[]),o[i[b].user_id].push(i[b].runnerId));for(S in y=p(p({},t),r),h={},E={},g=[],w={},O={},R={},s){for(T=0,N=0;N<s[S].length;N++)I=s[S][N],T+=parseInt(y[I]||0),w[S]=w[S]||[],w[S].push(l({type:"user"},I,y[I])),n.body.eventtype,n.body.eventtype;h[S]=T,O[S]=_[S],R[S]=d[S],g.push(S)}for(A in o){for(P=0,U=0;U<o[A].length;U++)D=o[A][U],P+=parseInt(y[D]||0),w[A]=w[A]||[],w[A].push(l({type:"system"},D,y[D]));E[A]=P}if(M=[],C=[],L=[],j=[],B=[],x=[],q=[],0==g.length){e.n=5;break}return e.n=3,v.getPartChain(g);case 3:return x=e.v,e.n=4,v.getBalance(g);case 4:q=e.v;case 5:W=0,ke=c(h);case 6:if((Ee=ke()).done){e.n=16;break}if(F=Ee.value,J=0,V=0,G=0,H="",Y="",K=R[F][0],z=O[F][0]*K,X=JSON.parse(x[W].chain),!(h[F]>E[F])){e.n=11;break}J=-Math.abs(h[F])*K,V=J,H="DR",Y=n.body.event_name+"/NO_CUT/WICKET/WIN/REVOKED/"+h[F]+" vs "+E[F]+"/"+K,Q=0;case 7:if(!(Q<X.length)){e.n=10;break}if(X[Q].id==F){e.n=9;break}return Z=1===Q?X[Q].part:X[Q].part-X[Q-1].part,$=Math.abs(h[F])*Z/100,ee=$*=K,ne=X[Q].up_line*-J/100,te=X[Q].down_line*-J/100,re="CR",ae=n.body.event_name+"/NO_CUT/WICKET/LOSS/REVOKED/"+E[F]+" vs "+h[F]+"/"+K,C.push([X[Q].id,ee,ne,te]),ue=Math.abs(z)*Z/100,j.push([X[Q].id,-ue]),e.n=8,v.getBalance(X[Q].id);case 8:ie=e.v,B.push([X[Q].id,$,Z,ne,te,re,X[Q].id,X[Q].id,ie[0].amount,ie[0].amount+$,u,a,n.body.event_id,ae,0,1]);case 9:Q++,e.n=7;break;case 10:e.n=15;break;case 11:J=Math.abs(E[F])*K,V=J,H="CR",Y=n.body.event_name+"/NO_CUT/WICKET/LOSS/REVOKED/"+h[F]+" vs "+E[F]+"/"+K,se=0;case 12:if(!(se<X.length)){e.n=15;break}if(X[se].id==F){e.n=14;break}return oe=1===se?X[se].part:X[se].part-X[se-1].part,ce=-Math.abs(E[F])*oe/100,de=ce*=K,pe=X[se].up_line*J/100,le=X[se].down_line*J/100,fe="DR",_e=n.body.event_name+"/NO_CUT/WICKET/WIN/REVOKED/"+E[F]+" vs "+h[F]+"/"+K,L.push([X[se].id,de,pe,le]),be=Math.abs(z)*oe/100,j.push([X[se].id,-be]),e.n=13,v.getBalance(X[se].id);case 13:ye=e.v,B.push([X[se].id,ce,oe,pe,le,fe,X[se].id,X[se].id,ye[0].amount,ye[0].amount+ce,u,a,n.body.event_id,_e,0,1]);case 14:se++,e.n=12;break;case 15:M.push([F,J,V,G]),j.push([F,-Math.abs(z)]),B.push([F,J,-100,V,G,H,F,F,q[W].amount,q[W].amount+J,u,a,n.body.event_id,Y,0,1]),W++,e.n=6;break;case 16:return w=JSON.stringify(w),(ve=[]).push([n.body.event_id,n.body.user_id,JSON.stringify(y),JSON.stringify(t),JSON.stringify(r),"NO_CUT","1","WICKET",1]),me="",e.n=17,v.getResultsEvents(n.body.event_id);case 17:return he=e.v,me=null!=he[0].results?he[0].results+",NO_CUT":"NO_CUT",B.push([n.body.user_id,0,0,0,0,0,n.body.user_id,n.body.user_id,0,0,u,a,n.body.event_id,n.body.event_name+"/RESULT RUNS SCORE UPDATED",0,1]),e.n=18,v.updateResult(ve);case 18:return e.v,e.n=19,v.updateEvent(n.body.event_id,me);case 19:if(me=e.v,0==M.length){e.n=21;break}return e.n=20,v.updateBalanceClient(M);case 20:e.v;case 21:if(0==C.length){e.n=23;break}return e.n=22,v.updateBalance(C);case 22:e.v;case 23:if(0==L.length){e.n=25;break}return e.n=24,v.updateBalance(L);case 24:e.v;case 25:if(0==B.length){e.n=27;break}return e.n=26,v.addAccountEntry(B);case 26:e.v;case 27:if(!(g.length>0)){e.n=30;break}return e.n=28,v.updateExp(j);case 28:return e.v,e.n=29,v.updateExpRunner(n.body.event_id,a);case 29:e.v;case 30:e.n=32;break;case 31:throw e.p=31,e.v;case 32:return e.a(2)}},e,null,[[0,31]])}));return function(n,t,r,a,u){return e.apply(this,arguments)}}(),q=function(){var e=y(f().m(function e(n,t,r,a,u){var i,s,o,d,_,b,y,m,h,k,E,g,w,O,R,S,T,N,I,A,P,U,D,M,C,L,j,B,x,q,W,F,J,V,G,H,Y,K,z,X,Q,Z,$,ee,ne,te,re,ae,ue,ie,se,oe,ce,de,pe,le,fe,_e,be,ye,ve,me,he,ke,Ee;return f().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,v.getPlayedUser(n.body.event_id,u);case 1:for(i=e.v,s={},o={},d={},_={},b=0;b<i.length;b++)"user"==i[b].type&&(s[i[b].user_id]||(s[i[b].user_id]=[]),s[i[b].user_id].push(i[b].runnerId),d[i[b].user_id]||(d[i[b].user_id]=[]),d[i[b].user_id].push(i[b].amount),_[i[b].user_id]||(_[i[b].user_id]=[]),_[i[b].user_id].push(i[b].exp)),"system"==i[b].type&&(o[i[b].user_id]||(o[i[b].user_id]=[]),o[i[b].user_id].push(i[b].runnerId));for(O in y=p(p({},t),r),m={},h={},k=[],E={},g={},w={},s){for(R=0,S=0;S<s[O].length;S++)T=s[O][S],R+=parseInt(y[T]||0),E[O]=E[O]||[],E[O].push(l({type:"user"},T,y[T])),n.body.eventtype,n.body.eventtype;m[O]=R,g[O]=_[O],w[O]=d[O],k.push(O)}for(N in o){for(I=0,A=0;A<o[N].length;A++)P=o[N][A],I+=parseInt(y[P]||0),E[N]=E[N]||[],E[N].push(l({type:"system"},P,y[P]));h[N]=I}if(U=[],D=[],M=[],C=[],L=[],j=[],B=[],0==k.length){e.n=4;break}return e.n=2,v.getPartChain(k);case 2:return j=e.v,e.n=3,v.getBalance(k);case 3:B=e.v;case 4:x=0,ke=c(m);case 5:if((Ee=ke()).done){e.n=15;break}if(q=Ee.value,W=0,F=0,J=0,V="",G="",H=w[q][0],Y=g[q][0]*H,K=JSON.parse(j[x].chain),!(m[q]>h[q])){e.n=10;break}z=Math.abs(m[q])-Math.abs(h[q]),F=W=z*H,V="CR",G=n.body.event_name+"/CUT/WICKET/WIN/"+W+"/"+m[q]+" vs "+h[q]+"/"+H,X=0;case 6:if(!(X<K.length)){e.n=9;break}if(K[X].id==q){e.n=8;break}return Q=1===X?K[X].part:K[X].part-K[X-1].part,Z=-Math.abs(W)*Q/100,$=Z,ee=K[X].up_line*-W/100,ne=K[X].down_line*-W/100,te="DR",re=n.body.event_name+"/CUT/WICKET/LOSS/"+Z+"/",h[q],m[q],D.push([K[X].id,$,ee,ne]),ae=Math.abs(Y)*Q/100,C.push([K[X].id,ae]),e.n=7,v.getBalance(K[X].id);case 7:ue=e.v,L.push([K[X].id,Z,Q,ee,ne,te,K[X].id,K[X].id,ue[0].amount,ue[0].amount+Z,u,a,n.body.event_id,re,0,1]);case 8:X++,e.n=6;break;case 9:e.n=14;break;case 10:ie=Math.abs(h[q])-Math.abs(m[q]),F=W=-(W=ie*H),V="DR",G=n.body.event_name+"/CUT/WICKET/LOSS/"+W+"/"+m[q]+" vs "+h[q]+"/"+H,se=0;case 11:if(!(se<K.length)){e.n=14;break}if(K[se].id==q){e.n=13;break}return oe=1===se?K[se].part:K[se].part-K[se-1].part,ce=Math.abs(W)*oe/100,de=ce,pe=K[se].up_line*W/100,le=K[se].down_line*W/100,fe="CR",_e=n.body.event_name+"/CUT/WICKET/WIN/"+ce+"/"+h[q]+" vs "+m[q]+"/"+H,M.push([K[se].id,de,pe,le]),be=Math.abs(Y)*oe/100,C.push([K[se].id,be]),e.n=12,v.getBalance(K[se].id);case 12:ye=e.v,L.push([K[se].id,ce,oe,pe,le,fe,K[se].id,K[se].id,ye[0].amount,ye[0].amount+ce,u,a,n.body.event_id,_e,0,1]);case 13:se++,e.n=11;break;case 14:U.push([q,W,F,J]),C.push([q,Math.abs(Y)]),L.push([q,W,-100,F,J,V,q,q,B[x].amount,B[x].amount+W,u,a,n.body.event_id,G,0,1]),x++,e.n=5;break;case 15:return E=JSON.stringify(E),(ve=[]).push([n.body.event_id,n.body.user_id,JSON.stringify(y),JSON.stringify(t),JSON.stringify(r),"CUT","2","WICKET","0"]),me="",e.n=16,v.getResultsEvents(n.body.event_id);case 16:return he=e.v,me=null!=he[0].results?he[0].results+",CUT":"CUT",L.push([n.body.user_id,0,0,0,0,0,n.body.user_id,n.body.user_id,0,0,u,a,n.body.event_id,n.body.event_name+"/RESULT RUNS SCORE UPDATED",0,1]),e.n=17,v.updateResult(ve);case 17:return e.v,e.n=18,v.updateEvent(n.body.event_id,me);case 18:if(me=e.v,0==U.length){e.n=20;break}return e.n=19,v.updateBalanceClient(U);case 19:e.v;case 20:if(0==D.length){e.n=22;break}return e.n=21,v.updateBalance(D);case 21:e.v;case 22:if(0==M.length){e.n=24;break}return e.n=23,v.updateBalance(M);case 23:e.v;case 24:if(0==L.length){e.n=26;break}return e.n=25,v.addAccountEntry(L);case 25:e.v;case 26:if(!(k.length>0)){e.n=29;break}return e.n=27,v.updateExp(C);case 27:return e.v,e.n=28,v.updateExpRunner(n.body.event_id,a);case 28:e.v;case 29:e.n=31;break;case 30:throw e.p=30,e.v;case 31:return e.a(2)}},e,null,[[0,30]])}));return function(n,t,r,a,u){return e.apply(this,arguments)}}(),W=function(){var e=y(f().m(function e(n,t,r,a,u){var i,s,o,d,_,b,y,m,h,k,E,g,w,O,R,S,T,N,I,A,P,U,D,M,C,L,j,B,x,q,W,F,J,V,G,H,Y,K,z,X,Q,Z,$,ee,ne,te,re,ae,ue,ie,se,oe,ce,de,pe,le,fe,_e,be,ye,ve,me,he,ke,Ee;return f().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,v.getPlayedUser(n.body.event_id,u);case 1:for(i=e.v,s={},o={},d={},_={},b=0;b<i.length;b++)"user"==i[b].type&&(s[i[b].user_id]||(s[i[b].user_id]=[]),s[i[b].user_id].push(i[b].runnerId),d[i[b].user_id]||(d[i[b].user_id]=[]),d[i[b].user_id].push(i[b].amount),_[i[b].user_id]||(_[i[b].user_id]=[]),_[i[b].user_id].push(i[b].exp)),"system"==i[b].type&&(o[i[b].user_id]||(o[i[b].user_id]=[]),o[i[b].user_id].push(i[b].runnerId));for(O in y=p(p({},t),r),m={},h={},k=[],E={},g={},w={},s){for(R=0,S=0;S<s[O].length;S++)T=s[O][S],R+=parseInt(y[T]||0),E[O]=E[O]||[],E[O].push(l({type:"user"},T,y[T])),n.body.eventtype,n.body.eventtype;m[O]=R,g[O]=_[O],w[O]=d[O],k.push(O)}for(N in o){for(I=0,A=0;A<o[N].length;A++)P=o[N][A],I+=parseInt(y[P]||0),E[N]=E[N]||[],E[N].push(l({type:"system"},P,y[P]));h[N]=I}if(U=[],D=[],M=[],C=[],L=[],j=[],B=[],0==k.length){e.n=4;break}return e.n=2,v.getPartChain(k);case 2:return j=e.v,e.n=3,v.getBalance(k);case 3:B=e.v;case 4:x=0,ke=c(m);case 5:if((Ee=ke()).done){e.n=15;break}if(q=Ee.value,W=0,F=0,J=0,V="",G="",H=w[q][0],Y=g[q][0]*H,K=JSON.parse(j[x].chain),!(m[q]>h[q])){e.n=10;break}z=Math.abs(m[q])-Math.abs(h[q]),W=-(W=z*H),F=W,V="DR",G=n.body.event_name+"/CUT/WICKET/WIN/REVOKED/"+W+"/"+m[q]+" vs "+h[q]+"/"+H,X=0;case 6:if(!(X<K.length)){e.n=9;break}if(K[X].id==q){e.n=8;break}return Q=1===X?K[X].part:K[X].part-K[X-1].part,Z=Math.abs(W)*Q/100,$=Z,ee=K[X].up_line*-W/100,ne=K[X].down_line*-W/100,te="CR",re=n.body.event_name+"/CUT/WICKET/LOSS/REVOKED/"+Z+"/",h[q],m[q],D.push([K[X].id,$,ee,ne]),ae=Math.abs(Y)*Q/100,C.push([K[X].id,-ae]),e.n=7,v.getBalance(K[X].id);case 7:ue=e.v,L.push([K[X].id,Z,Q,ee,ne,te,K[X].id,K[X].id,ue[0].amount,ue[0].amount+Z,u,a,n.body.event_id,re,0,1]);case 8:X++,e.n=6;break;case 9:e.n=14;break;case 10:ie=Math.abs(h[q])-Math.abs(m[q]),F=W=ie*H,V="CR",G=n.body.event_name+"/CUT/WICKET/LOSS/REVOKED/"+W+"/"+m[q]+" vs "+h[q]+"/"+H,se=0;case 11:if(!(se<K.length)){e.n=14;break}if(K[se].id==q){e.n=13;break}return oe=1===se?K[se].part:K[se].part-K[se-1].part,ce=-Math.abs(W)*oe/100,de=ce,pe=K[se].up_line*W/100,le=K[se].down_line*W/100,fe="DR",_e=n.body.event_name+"/CUT/WICKET/WIN/REVOKED/"+ce+"/"+h[q]+" vs "+m[q]+"/"+H,M.push([K[se].id,de,pe,le]),be=Math.abs(Y)*oe/100,C.push([K[se].id,-be]),e.n=12,v.getBalance(K[se].id);case 12:ye=e.v,L.push([K[se].id,ce,oe,pe,le,fe,K[se].id,K[se].id,ye[0].amount,ye[0].amount+ce,u,a,n.body.event_id,_e,0,1]);case 13:se++,e.n=11;break;case 14:U.push([q,W,F,J]),C.push([q,-Math.abs(Y)]),L.push([q,W,-100,F,J,V,q,q,B[x].amount,B[x].amount+W,u,a,n.body.event_id,G,0,1]),x++,e.n=5;break;case 15:return E=JSON.stringify(E),(ve=[]).push([n.body.event_id,n.body.user_id,JSON.stringify(y),JSON.stringify(t),JSON.stringify(r),"CUT","2","WICKET",1]),me="",e.n=16,v.getResultsEvents(n.body.event_id);case 16:return he=e.v,me=null!=he[0].results?he[0].results+",CUT":"CUT",L.push([n.body.user_id,0,0,0,0,0,n.body.user_id,n.body.user_id,0,0,u,a,n.body.event_id,n.body.event_name+"/RESULT RUNS SCORE UPDATED",0,1]),e.n=17,v.updateResult(ve);case 17:return e.v,e.n=18,v.updateEvent(n.body.event_id,me);case 18:if(me=e.v,0==U.length){e.n=20;break}return e.n=19,v.updateBalanceClient(U);case 19:e.v;case 20:if(0==D.length){e.n=22;break}return e.n=21,v.updateBalance(D);case 21:e.v;case 22:if(0==M.length){e.n=24;break}return e.n=23,v.updateBalance(M);case 23:e.v;case 24:if(0==L.length){e.n=26;break}return e.n=25,v.addAccountEntry(L);case 25:e.v;case 26:if(!(k.length>0)){e.n=29;break}return e.n=27,v.updateExp(C);case 27:return e.v,e.n=28,v.updateExpRunner(n.body.event_id,a);case 28:e.v;case 29:e.n=31;break;case 30:throw e.p=30,e.v;case 31:return e.a(2)}},e,null,[[0,30]])}));return function(n,t,r,a,u){return e.apply(this,arguments)}}(),F=function(){var e=y(f().m(function e(n,t,r){var a,u,i,s,o,c,d,p,l,_,b,y,h,g,w,O,R,S,T,N,I,A,P;return f().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1,2,3,4,5].includes(k(n).role)){e.n=1;break}throw new E("Un Authorise.");case 1:if(n.body.event_id){e.n=2;break}throw new E("Event Id Required");case 2:return e.n=3,m.getProfile(k(n).email);case 3:return a=e.v,n.body.user_id=a[0].id,e.n=4,v.getResults(n.body.event_id);case 4:if(u=e.v,i=[],s=[],o=[],c=[],d=[],p=[],l=[],_=[],b=[],y=[],h=[],g=[],w=[],O=[],R=[],S=[],T=[],N=[],I=[],u.length>0)for(A=0;A<u.length;A++)"TOSS"==u[A].result_type&&"TOSS"==u[A].market_name&&(T=u[A].result),"RUN"==u[A].result_type&&"1ST_INNING_KHADO"==u[A].market_name&&(N=JSON.parse(u[A].t1),N=Object.keys(N).map(function(e){return[e,N[e]]})),"RUN"==u[A].result_type&&"1ST_INNING_TOTAL_SCORE"==u[A].market_name&&(I=JSON.parse(u[A].t1),I=Object.keys(I).map(function(e){return[e,I[e]]})),"RUN"==u[A].result_type&&"PAIR_EVENT"==u[A].market_name&&(h=JSON.parse(u[A].t1),h=Object.keys(h).map(function(e){return[e,h[e]]}),g=JSON.parse(u[A].t2),g=Object.keys(g).map(function(e){return[e,g[e]]})),"RUN"==u[A].result_type&&"NO_CUT"==u[A].market_name&&(i=JSON.parse(u[A].t1),i=Object.keys(i).map(function(e){return[e,i[e]]}),s=JSON.parse(u[A].t2),s=Object.keys(s).map(function(e){return[e,s[e]]})),"RUN"==u[A].result_type&&"CUT"==u[A].market_name&&(o=JSON.parse(u[A].t1),o=Object.keys(o).map(function(e){return[e,o[e]]}),c=JSON.parse(u[A].t2),c=Object.keys(c).map(function(e){return[e,c[e]]})),"RUN"==u[A].result_type&&"TOP_BATTER"==u[A].market_name&&(d=JSON.parse(u[A].t1),d=Object.keys(d).map(function(e){return[e,d[e]]}),p=JSON.parse(u[A].t2),p=Object.keys(p).map(function(e){return[e,p[e]]})),"RUN"==u[A].result_type&&"TOP_BOWLER"==u[A].market_name&&(l=JSON.parse(u[A].t1),l=Object.keys(l).map(function(e){return[e,l[e]]}),_=JSON.parse(u[A].t2),_=Object.keys(_).map(function(e){return[e,_[e]]})),"RUN"==u[A].result_type&&"ODD_EVEN"==u[A].market_name&&(b=JSON.parse(u[A].t1),b=Object.keys(b).map(function(e){return[e,b[e]]}),y=JSON.parse(u[A].t2),y=Object.keys(y).map(function(e){return[e,y[e]]})),"WICKET"==u[A].result_type&&"NO_CUT"==u[A].market_name&&(w=JSON.parse(u[A].t1),w=Object.keys(w).map(function(e){return[e,w[e]]}),O=JSON.parse(u[A].t2),O=Object.keys(O).map(function(e){return[e,O[e]]})),"WICKET"==u[A].result_type&&"CUT"==u[A].market_name&&(R=JSON.parse(u[A].t1),R=Object.keys(R).map(function(e){return[e,R[e]]}),S=JSON.parse(u[A].t2),S=Object.keys(S).map(function(e){return[e,S[e]]}));t.status(200).json({success:!0,data:u,runs_team1_nocut:i,runs_team2_nocut:s,runs_team1_cut:o,runs_team2_cut:c,wickets_team1_nocut:w,wickets_team2_nocut:O,wickets_team1_cut:R,wickets_team2_cut:S,result_toss:T,result_1st_inning_khado:N,result_1st_inning_total_score:I,runs_team1_top:d,runs_team2_top:p,runs_team1_top_bowler:l,runs_team2_top_bowler:_,runs_team1_odd_even:b,runs_team2_odd_even:y,runs_team1_pairEvent:h,runs_team2_pairEvent:g,message:"Result retrived"}),e.n=6;break;case 5:e.p=5,P=e.v,r(P);case 6:return e.a(2)}},e,null,[[0,5]])}));return function(n,t,r){return e.apply(this,arguments)}}(),J=function(){var e=y(f().m(function e(n,t,r){return f().w(function(e){for(;;)if(0===e.n)return e.a(2)},e)}));return function(n,t,r){return e.apply(this,arguments)}}(),V=function(){var e=y(f().m(function e(n,t,r){var a,u,i,s,o,c,d;return f().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1].includes(k(n).role)){e.n=1;break}throw new E("Un Authorise.");case 1:if(n.body.event_id){e.n=2;break}throw new E("Event Id Required");case 2:if(n.body.eventtype){e.n=3;break}throw new E("Event Type Required");case 3:if(n.body.team){e.n=4;break}throw new E("Team Selection Required");case 4:if(n.body.event_name){e.n=5;break}throw new E("Event Name Required");case 5:if(n.body.type){e.n=6;break}throw new E("Result Type Required");case 6:if(n.body.mType){e.n=7;break}throw new E("Market Type Required");case 7:if(n.body.revoke){e.n=8;break}throw new E("Revoke Type Required");case 8:if(n.body.t1){e.n=9;break}throw new E("Team-1 Required");case 9:if(n.body.t2){e.n=10;break}throw new E("Team-2 Required");case 10:return e.n=11,m.getProfile(k(n).email);case 11:return(a=e.v)[0].parent_id,a[0].id,n.body.user_id=a[0].id,n.body.parent_id=a[0].parent_id,n.body.event_name,u=n.body.team,e.n=12,h.getMarkets(n.body.event_id);case 12:for(i=e.v,s="",o=0,c=0;c<i.length;c++)"TOSS"==i[c].market_name&&(s=i[c].id,o=i[c].main_market_id);if("toss"!=n.body.type){e.n=17;break}if("no"!=n.body.revoke){e.n=15;break}if("TOSS"!=n.body.mType){e.n=14;break}return e.n=13,G(n,u,o,s,n.body.t1,n.body.t2);case 13:e.v;case 14:e.n=17;break;case 15:if("TOSS"!=n.body.mType){e.n=17;break}return e.n=16,H(n,u,o,s,n.body.t1,n.body.t2);case 16:e.v;case 17:t.status(200).json({success:!0,data:n.body,message:"Result Updated: TOSS"}),e.n=19;break;case 18:e.p=18,d=e.v,r(d);case 19:return e.a(2)}},e,null,[[0,18]])}));return function(n,t,r){return e.apply(this,arguments)}}(),G=function(){var e=y(f().m(function e(n,t,r,a,u,i){var s,o,d,p,l,_,b,y,h,E,g,w,O,R,S,T,N,I,A,P,U,D,M,C,L,j,B,x,q,W,F,J,V,G,H,Y,K,z,X,Q,Z,$,ee,ne,te,re,ae,ue,ie,se,oe,ce,de,pe,le,fe,_e,be,ye;return f().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,m.getProfile(k(n).email);case 1:return e.v,e.n=2,v.getPlayedUser(n.body.event_id,a);case 2:for(s=e.v,o={},d={},p={},l={},_=0;_<s.length;_++)"user"==s[_].type&&(o[s[_].user_id]||(o[s[_].user_id]=[]),o[s[_].user_id].push(s[_].runnerId),p[s[_].user_id]||(p[s[_].user_id]=[]),p[s[_].user_id].push(s[_].amount),l[s[_].user_id]||(l[s[_].user_id]=[]),l[s[_].user_id].push(s[_].exp)),"system"==s[_].type&&(d[s[_].user_id]||(d[s[_].user_id]=[]),d[s[_].user_id].push(s[_].runnerId));for(w in b={},y={},h=[],E={},g={},o){for(O=0;O<o[w].length;O++)R=o[w][O],b[w]=R,n.body.eventtype,n.body.eventtype;E[w]=l[w],g[w]=p[w],h.push(w)}for(S in d)for(T=0;T<d[S].length;T++)N=d[S][T],y[S]=N;if(I=[],A=[],P=[],U=[],D=[],M=[],C=[],0==h.length){e.n=5;break}return e.n=3,v.getPartChain(h);case 3:return M=e.v,e.n=4,v.getBalance(h);case 4:C=e.v;case 5:L=0,be=c(b);case 6:if((ye=be()).done){e.n=16;break}if(j=ye.value,B=0,x=0,q=0,W="",F="",J=g[j][0],V=E[j][0]*J,G=JSON.parse(M[L].chain),b[j]!=t){e.n=11;break}x=B=J,W="CR",F=n.body.event_name+"/TOSS/WIN/ "+J,H=0;case 7:if(!(H<G.length)){e.n=10;break}if(G[H].id==j){e.n=9;break}return Y=1===H?G[H].part:G[H].part-G[H-1].part,K=-Y/100,z=K*=J,X=G[H].up_line*-B/100,Q=G[H].down_line*-B/100,Z="DR",$=n.body.event_name+"/TOSS/LOSS/ "+J,A.push([G[H].id,z,X,Q]),ee=Math.abs(V)*Y/100,U.push([G[H].id,ee]),e.n=8,v.getBalance(G[H].id);case 8:ne=e.v,D.push([G[H].id,K,Y,X,Q,Z,G[H].id,G[H].id,ne[0].amount,ne[0].amount+K,a,r,n.body.event_id,$,0,1]);case 9:H++,e.n=7;break;case 10:e.n=15;break;case 11:x=B=-J,W="DR",F=n.body.event_name+"/TOSS/LOSS/ "+J,te=0;case 12:if(!(te<G.length)){e.n=15;break}if(G[te].id==j){e.n=14;break}return re=1===te?G[te].part:G[te].part-G[te-1].part,ae=re/100,ue=ae*=J,ie=G[te].up_line*B/100,se=G[te].down_line*B/100,oe="CR",ce=n.body.event_name+"/TOSS/WIN/ "+J,P.push([G[te].id,ue,ie,se]),de=Math.abs(V)*re/100,U.push([G[te].id,de]),e.n=13,v.getBalance(G[te].id);case 13:pe=e.v,D.push([G[te].id,ae,re,ie,se,oe,G[te].id,G[te].id,pe[0].amount,pe[0].amount+ae,a,r,n.body.event_id,ce,0,1]);case 14:te++,e.n=12;break;case 15:I.push([j,B,x,q]),U.push([j,Math.abs(V)]),D.push([j,B,-100,x,q,W,j,j,C[L].amount,C[L].amount+B,a,r,n.body.event_id,F,0,1]),L++,e.n=6;break;case 16:return(le=[]).push([n.body.event_id,n.body.user_id,t,JSON.stringify(u),JSON.stringify(i),"TOSS","11","TOSS",0]),fe="",e.n=17,v.getResultsEvents(n.body.event_id);case 17:return _e=e.v,fe=null!=_e[0].results?_e[0].results+",NO_CUT":"NO_CUT",D.push([n.body.user_id,0,0,0,0,0,n.body.user_id,n.body.user_id,0,0,a,r,n.body.event_id,n.body.event_name+"/RESULT RUNS SCORE UPDATED",0,1]),e.n=18,v.updateResult(le);case 18:return e.v,e.n=19,v.updateEvent(n.body.event_id,fe);case 19:if(fe=e.v,0==I.length){e.n=21;break}return e.n=20,v.updateBalanceClient(I);case 20:e.v;case 21:if(0==A.length){e.n=23;break}return e.n=22,v.updateBalance(A);case 22:e.v;case 23:if(0==P.length){e.n=25;break}return e.n=24,v.updateBalance(P);case 24:e.v;case 25:if(0==D.length){e.n=27;break}return e.n=26,v.addAccountEntry(D);case 26:e.v;case 27:if(!(h.length>0)){e.n=30;break}return e.n=28,v.updateExp(U);case 28:return e.v,e.n=29,v.updateExpRunner(n.body.event_id,r);case 29:e.v;case 30:e.n=32;break;case 31:throw e.p=31,e.v;case 32:return e.a(2)}},e,null,[[0,31]])}));return function(n,t,r,a,u,i){return e.apply(this,arguments)}}(),H=function(){var e=y(f().m(function e(n,t,r,a,u,i){var s,o,d,p,l,_,b,y,h,E,g,w,O,R,S,T,N,I,A,P,U,D,M,C,L,j,B,x,q,W,F,J,V,G,H,Y,K,z,X,Q,Z,$,ee,ne,te,re,ae,ue,ie,se,oe,ce,de,pe,le,fe,_e,be,ye;return f().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,m.getProfile(k(n).email);case 1:return e.v,e.n=2,v.getPlayedUser(n.body.event_id,a);case 2:for(s=e.v,o={},d={},p={},l={},_=0;_<s.length;_++)"user"==s[_].type&&(o[s[_].user_id]||(o[s[_].user_id]=[]),o[s[_].user_id].push(s[_].runnerId),p[s[_].user_id]||(p[s[_].user_id]=[]),p[s[_].user_id].push(s[_].amount),l[s[_].user_id]||(l[s[_].user_id]=[]),l[s[_].user_id].push(s[_].exp)),"system"==s[_].type&&(d[s[_].user_id]||(d[s[_].user_id]=[]),d[s[_].user_id].push(s[_].runnerId));for(w in b={},y={},h=[],E={},g={},o){for(O=0;O<o[w].length;O++)R=o[w][O],b[w]=R,n.body.eventtype,n.body.eventtype;E[w]=l[w],g[w]=p[w],h.push(w)}for(S in d)for(T=0;T<d[S].length;T++)N=d[S][T],y[S]=N;if(I=[],A=[],P=[],U=[],D=[],M=[],C=[],0==h.length){e.n=5;break}return e.n=3,v.getPartChain(h);case 3:return M=e.v,e.n=4,v.getBalance(h);case 4:C=e.v;case 5:L=0,be=c(b);case 6:if((ye=be()).done){e.n=16;break}if(j=ye.value,B=0,x=0,q=0,W="",F="",J=g[j][0],V=E[j][0]*J,G=JSON.parse(M[L].chain),b[j]!=t){e.n=11;break}B=-Math.abs(J),x=B,W="DR",F=n.body.event_name+"/TOSS/WIN/REVOKED/"+J,H=0;case 7:if(!(H<G.length)){e.n=10;break}if(G[H].id==j){e.n=9;break}return Y=1===H?G[H].part:G[H].part-G[H-1].part,K=Y/100,K=Math.abs(K*J),z=K,X=G[H].up_line*-B/100,Q=G[H].down_line*-B/100,Z="CR",$=n.body.event_name+"/TOSS/LOSS/REVOKED/"+J,A.push([G[H].id,z,X,Q]),ee=Math.abs(V)*Y/100,U.push([G[H].id,-ee]),e.n=8,v.getBalance(G[H].id);case 8:ne=e.v,D.push([G[H].id,K,Y,X,Q,Z,G[H].id,G[H].id,ne[0].amount,ne[0].amount+K,a,r,n.body.event_id,$,0,1]);case 9:H++,e.n=7;break;case 10:e.n=15;break;case 11:x=B=J,W="CR",F=n.body.event_name+"/TOSS/LOSS/REVOKED/"+J,te=0;case 12:if(!(te<G.length)){e.n=15;break}if(G[te].id==j){e.n=14;break}return re=1===te?G[te].part:G[te].part-G[te-1].part,ae=re/100,ae=-Math.abs(ae*J),ue=ae,ie=G[te].up_line*B/100,se=G[te].down_line*B/100,oe="DR",ce=n.body.event_name+"/TOSS/WIN/REVOKED/"+J,P.push([G[te].id,ue,ie,se]),de=Math.abs(V)*re/100,U.push([G[te].id,-de]),e.n=13,v.getBalance(G[te].id);case 13:pe=e.v,D.push([G[te].id,ae,re,ie,se,oe,G[te].id,G[te].id,pe[0].amount,pe[0].amount+ae,a,r,n.body.event_id,ce,0,1]);case 14:te++,e.n=12;break;case 15:I.push([j,B,x,q]),U.push([j,-Math.abs(V)]),D.push([j,B,-100,x,q,W,j,j,C[L].amount,C[L].amount+B,a,r,n.body.event_id,F,0,1]),L++,e.n=6;break;case 16:return(le=[]).push([n.body.event_id,n.body.user_id,t,JSON.stringify(u),JSON.stringify(i),"TOSS","11","TOSS",1]),fe="",e.n=17,v.getResultsEvents(n.body.event_id);case 17:return _e=e.v,fe=null!=_e[0].results?_e[0].results+",NO_CUT":"NO_CUT",D.push([n.body.user_id,0,0,0,0,0,n.body.user_id,n.body.user_id,0,0,a,r,n.body.event_id,n.body.event_name+"/RESULT RUNS SCORE UPDATED",0,1]),e.n=18,v.updateResult(le);case 18:return e.v,e.n=19,v.updateEvent(n.body.event_id,fe);case 19:if(fe=e.v,0==I.length){e.n=21;break}return e.n=20,v.updateBalanceClient(I);case 20:e.v;case 21:if(0==A.length){e.n=23;break}return e.n=22,v.updateBalance(A);case 22:e.v;case 23:if(0==P.length){e.n=25;break}return e.n=24,v.updateBalance(P);case 24:e.v;case 25:if(0==D.length){e.n=27;break}return e.n=26,v.addAccountEntry(D);case 26:e.v;case 27:if(!(h.length>0)){e.n=30;break}return e.n=28,v.updateExp(U);case 28:return e.v,e.n=29,v.updateExpRunner(n.body.event_id,r);case 29:e.v;case 30:e.n=32;break;case 31:throw e.p=31,e.v;case 32:return e.a(2)}},e,null,[[0,31]])}));return function(n,t,r,a,u,i){return e.apply(this,arguments)}}(),Y=function(){var e=y(f().m(function e(n,t,r){var a,u,i;return f().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1,2,3,4,5,6].includes(k(n).role)){e.n=1;break}throw new E("Un Authorise.");case 1:return e.n=2,m.getProfile(k(n).email);case 2:return a=e.v,n.body.user_id=a[0].id,n.body.parent_id=a[0].parent_id,e.n=3,v.getBalance(n.body.user_id);case 3:u=e.v,t.status(200).json({success:!0,data:u,message:"Balance retrived"}),e.n=5;break;case 4:e.p=4,i=e.v,r(i);case 5:return e.a(2)}},e,null,[[0,4]])}));return function(n,t,r){return e.apply(this,arguments)}}(),K=function(){var e=y(f().m(function e(n,t,r){var a,u,i;return f().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1,2,3,4,5,6].includes(k(n).role)){e.n=1;break}throw new E("Un Authorise.");case 1:if(n.body.event_id){e.n=2;break}throw new E("Event Id Required");case 2:return e.n=3,m.getProfile(k(n).email);case 3:return a=e.v,n.body.user_id=a[0].id,n.body.parent_id=a[0].parent_id,e.n=4,v.getBalance(n.body.user_id);case 4:u=e.v,t.status(200).json({success:!0,data:u,message:"Balance retrived"}),e.n=6;break;case 5:e.p=5,i=e.v,r(i);case 6:return e.a(2)}},e,null,[[0,5]])}));return function(n,t,r){return e.apply(this,arguments)}}();e.exports={getEventRunners:g,updateRuns:w,getBalance:Y,resultVerify:K,getResults:F,updateWickets:J,noCutCalc:O,updateToss:V}},644:e=>{"use strict";e.exports=require("debug")},655:(e,n,t)=>{function r(){var e,n,t="function"==typeof Symbol?Symbol:{},u=t.iterator||"@@iterator",i=t.toStringTag||"@@toStringTag";function s(t,r,u,i){var s=r&&r.prototype instanceof c?r:c,d=Object.create(s.prototype);return a(d,"_invoke",function(t,r,a){var u,i,s,c=0,d=a||[],p=!1,l={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(n,t){return u=n,i=0,s=e,l.n=t,o}};function f(t,r){for(i=t,s=r,n=0;!p&&c&&!a&&n<d.length;n++){var a,u=d[n],f=l.p,_=u[2];t>3?(a=_===r)&&(s=u[(i=u[4])?5:(i=3,3)],u[4]=u[5]=e):u[0]<=f&&((a=t<2&&f<u[1])?(i=0,l.v=r,l.n=u[1]):f<_&&(a=t<3||u[0]>r||r>_)&&(u[4]=t,u[5]=r,l.n=_,i=0))}if(a||t>1)return o;throw p=!0,r}return function(a,d,_){if(c>1)throw TypeError("Generator is already running");for(p&&1===d&&f(d,_),i=d,s=_;(n=i<2?e:s)||!p;){u||(i?i<3?(i>1&&(l.n=-1),f(i,s)):l.n=s:l.v=s);try{if(c=2,u){if(i||(a="next"),n=u[a]){if(!(n=n.call(u,s)))throw TypeError("iterator result is not an object");if(!n.done)return n;s=n.value,i<2&&(i=0)}else 1===i&&(n=u.return)&&n.call(u),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);u=e}else if((n=(p=l.n<0)?s:t.call(r,l))!==o)break}catch(n){u=e,i=1,s=n}finally{c=1}}return{value:n,done:p}}}(t,u,i),!0),d}var o={};function c(){}function d(){}function p(){}n=Object.getPrototypeOf;var l=[][u]?n(n([][u]())):(a(n={},u,function(){return this}),n),f=p.prototype=c.prototype=Object.create(l);function _(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,a(e,i,"GeneratorFunction")),e.prototype=Object.create(f),e}return d.prototype=p,a(f,"constructor",p),a(p,"constructor",d),d.displayName="GeneratorFunction",a(p,i,"GeneratorFunction"),a(f),a(f,i,"Generator"),a(f,u,function(){return this}),a(f,"toString",function(){return"[object Generator]"}),(r=function(){return{w:s,m:_}})()}function a(e,n,t,r){var u=Object.defineProperty;try{u({},"",{})}catch(e){u=0}a=function(e,n,t,r){if(n)u?u(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t;else{var i=function(n,t){a(e,n,function(e){return this._invoke(n,t,e)})};i("next",0),i("throw",1),i("return",2)}},a(e,n,t,r)}function u(e,n,t,r,a,u,i){try{var s=e[u](i),o=s.value}catch(e){return void t(e)}s.done?n(o):Promise.resolve(o).then(r,a)}function i(e){return function(){var n=this,t=arguments;return new Promise(function(r,a){var i=e.apply(n,t);function s(e){u(i,r,a,s,o,"next",e)}function o(e){u(i,r,a,s,o,"throw",e)}s(void 0)})}}var s=t(697),o=(t(229),function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT a.id AS runnerId, a.name, a.sequence, a.team, a.market_id, b.market_name, b.main_market_id, b.runner_count FROM tbl_runners a LEFT JOIN tbl_markets b ON a.market_id = b.id WHERE b.event_id=? ORDER BY a.id asc",[n]))},e)}));return function(n){return e.apply(this,arguments)}}()),c=function(){var e=i(r().m(function e(n,t){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT id, event_id, market_id, name, team, sequence FROM tbl_runners WHERE event_id=? AND market_id IN (?) ORDER BY team, sequence asc",[n,mkIds]))},e)}));return function(n,t){return e.apply(this,arguments)}}(),d=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT event_id, market_id, event_name, opendate, type, runnerName1, runnerName2, status FROM tbl_events WHERE event_id=? ORDER BY id desc",[n]))},e)}));return function(n){return e.apply(this,arguments)}}(),p=function(){var e=i(r().m(function e(n,t){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT event_id, market_id, runnerId, user_id, type, exp, amount, runner_name, team, odd_even, run_digit FROM tbl_runners_users WHERE event_id=? AND market_id=? AND status = 'SELECTED' ORDER BY user_id",[n,t]))},e)}));return function(n,t){return e.apply(this,arguments)}}(),l=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT uid, amount, pl, up_line, down_line FROM tbl_balance WHERE uid IN (?) ORDER BY uid",[n]))},e)}));return function(n){return e.apply(this,arguments)}}(),f=function(){var e=i(r().m(function e(n){var t,a;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t=n,s.query(t),e.a(2,!0);case 1:e.p=1,a=e.v,next(a);case 2:return e.a(2)}},e,null,[[0,1]])}));return function(n){return e.apply(this,arguments)}}(),_=function(){var e=i(r().m(function e(n){var t;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.a(2,s.query("INSERT INTO tbl_balance (uid,pl,up_line,down_line) VALUES ? ON DUPLICATE KEY UPDATE pl = pl + VALUES(pl), up_line = up_line + VALUES(up_line), down_line = down_line + VALUES(down_line)",[n]));case 1:e.p=1,t=e.v,next(t);case 2:return e.a(2)}},e,null,[[0,1]])}));return function(n){return e.apply(this,arguments)}}(),b=function(){var e=i(r().m(function e(n){var t;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.a(2,s.query("INSERT INTO tbl_balance (uid,amount,up_line,down_line) VALUES ? ON DUPLICATE KEY UPDATE amount = amount + VALUES(amount), up_line = up_line + VALUES(up_line), down_line = down_line + VALUES(down_line)",[n]));case 1:e.p=1,t=e.v,next(t);case 2:return e.a(2)}},e,null,[[0,1]])}));return function(n){return e.apply(this,arguments)}}(),y=function(){var e=i(r().m(function e(n){var t;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.a(2,s.query("INSERT INTO tbl_balance (uid, exposer) VALUES ? ON DUPLICATE KEY UPDATE exposer = exposer - VALUES(exposer)",[n]));case 1:e.p=1,t=e.v,next(t);case 2:return e.a(2)}},e,null,[[0,1]])}));return function(n){return e.apply(this,arguments)}}(),v=function(){var e=i(r().m(function e(n,t){var a;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.a(2,s.query("UPDATE `tbl_runners_users` SET result = '1' where event_id = ? AND main_market_id = ?",[n,t]));case 1:e.p=1,a=e.v,next(a);case 2:return e.a(2)}},e,null,[[0,1]])}));return function(n,t){return e.apply(this,arguments)}}(),m=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("INSERT INTO tbl_ac_stat (uid, amount, part, up_line, down_line, type, u_from, u_to, previous_bal, new_bal, market_id, main_market_id, event_id, remark, deleted, revoked) VALUES ?",[n]))},e)}));return function(n){return e.apply(this,arguments)}}(),h=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("WITH RECURSIVE parent_cte (id, parent_id, u_role) AS ( SELECT id, parent_id, name FROM users WHERE id = ? UNION ALL SELECT t.id, t.parent_id, t.u_role FROM users t JOIN parent_cte pc ON pc.parent_id = t.id ) SELECT parent_cte.id, parent_cte.parent_id,tbl_partnership.part,tbl_partnership.visible FROM parent_cte LEFT JOIN tbl_partnership ON tbl_partnership.child_id = parent_cte.id WHERE 1 AND tbl_partnership.play_mode = 4",[n]))},e)}));return function(n){return e.apply(this,arguments)}}(),k=function(){var e=i(r().m(function e(n,t){var a;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.a(2,s.query("INSERT INTO tbl_part_chain (uid,chain) VALUES (?,?) ON DUPLICATE KEY UPDATE uid = VALUES(uid), chain = VALUES(chain)",[n,t]));case 1:e.p=1,a=e.v,next(a);case 2:return e.a(2)}},e,null,[[0,1]])}));return function(n,t){return e.apply(this,arguments)}}(),E=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT uid, chain FROM tbl_part_chain WHERE uid IN (?) ORDER BY uid",[n]))},e)}));return function(n){return e.apply(this,arguments)}}(),g=function(){var e=i(r().m(function e(n){var t;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.a(2,s.query("INSERT INTO tbl_results (event_id, uid, result, t1, t2, market_name, main_market_id, result_type, revoked) VALUES ? ON DUPLICATE KEY UPDATE event_id = VALUES(event_id), uid = VALUES(uid), result = VALUES(result), t1 = VALUES(t1), t2 = VALUES(t2), market_name = VALUES(market_name), main_market_id = VALUES(main_market_id), result_type = VALUES(result_type), revoked = VALUES(revoked)",[n]));case 1:e.p=1,t=e.v,next(t);case 2:return e.a(2)}},e,null,[[0,1]])}));return function(n){return e.apply(this,arguments)}}(),w=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT event_id, uid, result, t1, t2, market_name, main_market_id, result_type, revoked, updated_at FROM tbl_results WHERE event_id = ? AND revoked = 0 ORDER BY id DESC",[n]))},e)}));return function(n){return e.apply(this,arguments)}}(),O=function(){var e=i(r().m(function e(n,t){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("UPDATE `tbl_events` SET results = ? where event_id = ?",[t,n]))},e)}));return function(n,t){return e.apply(this,arguments)}}(),R=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT event_id, results FROM tbl_events WHERE event_id = ? LIMIT 1",[n]))},e)}));return function(n){return e.apply(this,arguments)}}();e.exports={getEventRunners:o,getPlayers:c,resultRuns:d,getPlayedUser:p,getBalance:l,updateQuery:f,updateBalance:_,updateBalanceClient:b,addAccountEntry:m,getPartnerships:h,updatePartChain:k,getPartChain:E,updateResult:g,getResults:w,updateExp:y,updateExpRunner:v,updateEvent:O,getResultsEvents:R}},692:e=>{"use strict";e.exports=require("https")},693:e=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function t(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function r(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}function u(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function i(e,t,r){return t=p(t),function(e,t){if(t&&("object"==n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,r||[],p(e).constructor):t.apply(e,r))}function s(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&d(e,n)}function o(e){var n="function"==typeof Map?new Map:void 0;return o=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(n){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return function(e,n,t){if(c())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,n);var a=new(e.bind.apply(e,r));return t&&d(a,t.prototype),a}(e,arguments,p(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),d(t,e)},o(e)}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(c=function(){return!!e})()}function d(e,n){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},d(e,n)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var l=function(e){function n(e){var t;return u(this,n),(t=i(this,n,[e])).name="InputError",t.statusCode=400,Error.captureStackTrace(t,n),t}return s(n,e),r(n)}(o(Error)),f=function(e){function n(e){var t;return u(this,n),(t=i(this,n,[e])).name="AuthError",t.statusCode=403,Error.captureStackTrace(t,n),t}return s(n,e),r(n)}(o(Error));e.exports={InputError:l,AuthError:f}},697:(e,n,t)=>{function r(){var e,n,t="function"==typeof Symbol?Symbol:{},u=t.iterator||"@@iterator",i=t.toStringTag||"@@toStringTag";function s(t,r,u,i){var s=r&&r.prototype instanceof c?r:c,d=Object.create(s.prototype);return a(d,"_invoke",function(t,r,a){var u,i,s,c=0,d=a||[],p=!1,l={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(n,t){return u=n,i=0,s=e,l.n=t,o}};function f(t,r){for(i=t,s=r,n=0;!p&&c&&!a&&n<d.length;n++){var a,u=d[n],f=l.p,_=u[2];t>3?(a=_===r)&&(s=u[(i=u[4])?5:(i=3,3)],u[4]=u[5]=e):u[0]<=f&&((a=t<2&&f<u[1])?(i=0,l.v=r,l.n=u[1]):f<_&&(a=t<3||u[0]>r||r>_)&&(u[4]=t,u[5]=r,l.n=_,i=0))}if(a||t>1)return o;throw p=!0,r}return function(a,d,_){if(c>1)throw TypeError("Generator is already running");for(p&&1===d&&f(d,_),i=d,s=_;(n=i<2?e:s)||!p;){u||(i?i<3?(i>1&&(l.n=-1),f(i,s)):l.n=s:l.v=s);try{if(c=2,u){if(i||(a="next"),n=u[a]){if(!(n=n.call(u,s)))throw TypeError("iterator result is not an object");if(!n.done)return n;s=n.value,i<2&&(i=0)}else 1===i&&(n=u.return)&&n.call(u),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);u=e}else if((n=(p=l.n<0)?s:t.call(r,l))!==o)break}catch(n){u=e,i=1,s=n}finally{c=1}}return{value:n,done:p}}}(t,u,i),!0),d}var o={};function c(){}function d(){}function p(){}n=Object.getPrototypeOf;var l=[][u]?n(n([][u]())):(a(n={},u,function(){return this}),n),f=p.prototype=c.prototype=Object.create(l);function _(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,a(e,i,"GeneratorFunction")),e.prototype=Object.create(f),e}return d.prototype=p,a(f,"constructor",p),a(p,"constructor",d),d.displayName="GeneratorFunction",a(p,i,"GeneratorFunction"),a(f),a(f,i,"Generator"),a(f,u,function(){return this}),a(f,"toString",function(){return"[object Generator]"}),(r=function(){return{w:s,m:_}})()}function a(e,n,t,r){var u=Object.defineProperty;try{u({},"",{})}catch(e){u=0}a=function(e,n,t,r){if(n)u?u(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t;else{var i=function(n,t){a(e,n,function(e){return this._invoke(n,t,e)})};i("next",0),i("throw",1),i("return",2)}},a(e,n,t,r)}function u(e,n,t,r,a,u,i){try{var s=e[u](i),o=s.value}catch(e){return void t(e)}s.done?n(o):Promise.resolve(o).then(r,a)}t(818).config();var i=t(874),s=t(460),o=i.createPool({connectionLimit:10,host:process.env.MYSQL_HOST,user:process.env.MYSQL_USER,password:process.env.MYSQL_PASSWORD,database:process.env.MYSQL_DATBASE});o.getConnection(function(){var e,n=(e=r().m(function e(n,t){return r().w(function(e){for(;;)if(0===e.n)return n&&("PROTOCOL_CONNECTION_LOST"===n.code&&console.error("Database connection was closed."),"ER_CON_COUNT_ERROR"===n.code&&console.error("Database has too many connections."),"ECONNREFUSED"===n.code&&console.error("Database connection was refused.")),t&&t.release(),e.a(2)},e)}),function(){var n=this,t=arguments;return new Promise(function(r,a){var i=e.apply(n,t);function s(e){u(i,r,a,s,o,"next",e)}function o(e){u(i,r,a,s,o,"throw",e)}s(void 0)})});return function(e,t){return n.apply(this,arguments)}}()),o.query=s.promisify(o.query),e.exports=o},703:e=>{"use strict";e.exports=require("node-cron")},716:e=>{"use strict";e.exports=require("moment")},722:(e,n,t)=>{var r=t(252).Router(),a=t(456).authenticateToken,u=t(416).errorHandlerMiddleware,i=t(20),s=i.addTitle,o=i.getTitle,c=i.updateTitle,d=i.getSetting,p=i.updateSetting,l=(i.uploads,i.list),f=i.delAds,_=i.getImageList,b=i.addImage,y=i.delImg,v=i.getData,m=i.getSlides;r.post("/addTitle",a,s),r.post("/getAllTitle",a,o),r.post("/updateTitle",a,c),r.post("/delAds",a,f),r.get("/getSetting",a,d),r.post("/updateSetting",a,p),r.get("/getImageList",a,_),r.post("/addImage",a,b),r.post("/delImg",a,y),r.post("/list",l),r.post("/getData",v),r.get("/getSlides",m),r.use(u),e.exports=r},808:(e,n,t)=>{function r(){var e,n,t="function"==typeof Symbol?Symbol:{},u=t.iterator||"@@iterator",i=t.toStringTag||"@@toStringTag";function s(t,r,u,i){var s=r&&r.prototype instanceof c?r:c,d=Object.create(s.prototype);return a(d,"_invoke",function(t,r,a){var u,i,s,c=0,d=a||[],p=!1,l={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(n,t){return u=n,i=0,s=e,l.n=t,o}};function f(t,r){for(i=t,s=r,n=0;!p&&c&&!a&&n<d.length;n++){var a,u=d[n],f=l.p,_=u[2];t>3?(a=_===r)&&(s=u[(i=u[4])?5:(i=3,3)],u[4]=u[5]=e):u[0]<=f&&((a=t<2&&f<u[1])?(i=0,l.v=r,l.n=u[1]):f<_&&(a=t<3||u[0]>r||r>_)&&(u[4]=t,u[5]=r,l.n=_,i=0))}if(a||t>1)return o;throw p=!0,r}return function(a,d,_){if(c>1)throw TypeError("Generator is already running");for(p&&1===d&&f(d,_),i=d,s=_;(n=i<2?e:s)||!p;){u||(i?i<3?(i>1&&(l.n=-1),f(i,s)):l.n=s:l.v=s);try{if(c=2,u){if(i||(a="next"),n=u[a]){if(!(n=n.call(u,s)))throw TypeError("iterator result is not an object");if(!n.done)return n;s=n.value,i<2&&(i=0)}else 1===i&&(n=u.return)&&n.call(u),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);u=e}else if((n=(p=l.n<0)?s:t.call(r,l))!==o)break}catch(n){u=e,i=1,s=n}finally{c=1}}return{value:n,done:p}}}(t,u,i),!0),d}var o={};function c(){}function d(){}function p(){}n=Object.getPrototypeOf;var l=[][u]?n(n([][u]())):(a(n={},u,function(){return this}),n),f=p.prototype=c.prototype=Object.create(l);function _(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,a(e,i,"GeneratorFunction")),e.prototype=Object.create(f),e}return d.prototype=p,a(f,"constructor",p),a(p,"constructor",d),d.displayName="GeneratorFunction",a(p,i,"GeneratorFunction"),a(f),a(f,i,"Generator"),a(f,u,function(){return this}),a(f,"toString",function(){return"[object Generator]"}),(r=function(){return{w:s,m:_}})()}function a(e,n,t,r){var u=Object.defineProperty;try{u({},"",{})}catch(e){u=0}a=function(e,n,t,r){if(n)u?u(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t;else{var i=function(n,t){a(e,n,function(e){return this._invoke(n,t,e)})};i("next",0),i("throw",1),i("return",2)}},a(e,n,t,r)}function u(e,n,t,r,a,u,i){try{var s=e[u](i),o=s.value}catch(e){return void t(e)}s.done?n(o):Promise.resolve(o).then(r,a)}function i(e){return function(){var n=this,t=arguments;return new Promise(function(r,a){var i=e.apply(n,t);function s(e){u(i,r,a,s,o,"next",e)}function o(e){u(i,r,a,s,o,"throw",e)}s(void 0)})}}var s=t(111),o=t(263),c=t(299),d=(t(655),t(229),t(456).parseJwt),p=t(693).InputError,l=(t(511),t(128),t(692),t(236).Console,t(252).json,function(){var e=i(r().m(function e(n,t,a){var u,i,o,l;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1].includes(d(n).role)){e.n=1;break}throw new p("Un Authorise.");case 1:return e.n=2,c.getProfile(d(n).email);case 2:return u=e.v,i=u[0].parent_id,3!==u[0].u_role&&(i=u[0].parent_id),e.n=3,s.getEventsAll(i);case 3:o=e.v,t.status(200).json({success:!0,data:o}),e.n=5;break;case 4:e.p=4,l=e.v,a(l);case 5:return e.a(2)}},e,null,[[0,4]])}));return function(n,t,r){return e.apply(this,arguments)}}()),f=function(){var e=i(r().m(function e(n,t,a){var u,i,l,f,b,y,v,m,h,k,E,g,w,O,R,S,T;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1].includes(d(n).role)){e.n=1;break}throw new p("Un Authorise.");case 1:if(n.body.event_name){e.n=2;break}throw new p("Event Name Required");case 2:if(n.body.team1){e.n=3;break}throw new p("Event Team - 1 name Required");case 3:if(n.body.team2){e.n=4;break}throw new p("Event Team - 2 name Required");case 4:if(!(n.body.event_name.length<2||n.body.event_name.length>150)){e.n=5;break}throw new p("Name Between 2 to 150 char");case 5:return n.body.event_id=n.body.event_id?n.body.event_id:Math.floor(Date.now()/1e3),n.body.market_id="1."+n.body.event_id,e.n=6,c.getProfile(d(n).email);case 6:return u=e.v,n.body.parent_id=u[0].parent_id,n.body.runnerName1=n.body.runners[0].runnerName?n.body.runners[0].runnerName:"F",n.body.runnerName2=n.body.runners[1].runnerName?n.body.runners[1].runnerName:"S",e.n=7,s.addEvent(n.body);case 7:return i=e.v,e.n=8,s.getDefaultMarkets();case 8:l=e.v,f=0;case 9:if(!(f<l.length)){e.n=47;break}return n.body.market_name=l[f].name,n.body.main_market_id=l[f].id,n.body.runner_count=l[f].runner_count,e.n=10,s.addMarket(n.body);case 10:if(i=e.v,n.body.market_id=i.insertId,b=l[f].runner_count,"BATTER"!=l[f].runner_type||1!=l[f].status){e.n=18;break}y=1;case 11:if(!(y<=parseInt(b))){e.n=14;break}return n.body.name=n.body.runnerName1+"-"+y,n.body.team=1,n.body.seq=y,e.n=12,o.addPlayer(n.body);case 12:i=e.v;case 13:y++,e.n=11;break;case 14:v=1;case 15:if(!(v<=parseInt(b))){e.n=18;break}return n.body.name=n.body.runnerName2+"-"+v,n.body.team=2,n.body.seq=v,e.n=16,o.addPlayer(n.body);case 16:i=e.v;case 17:v++,e.n=15;break;case 18:if("BOWLER"!=l[f].runner_type||1!=l[f].status){e.n=26;break}m=1;case 19:if(!(m<=parseInt(b))){e.n=22;break}return n.body.name=n.body.runnerName1+"-"+m,n.body.team=1,n.body.seq=m,e.n=20,o.addPlayer(n.body);case 20:i=e.v;case 21:m++,e.n=19;break;case 22:h=1;case 23:if(!(h<=parseInt(b))){e.n=26;break}return n.body.name=n.body.runnerName2+"-"+h,n.body.team=2,n.body.seq=h,e.n=24,o.addPlayer(n.body);case 24:i=e.v;case 25:h++,e.n=23;break;case 26:if("TEAM"!=l[f].runner_type||1!=l[f].status){e.n=29;break}return n.body.name=n.body.team1,n.body.team=1,n.body.seq=1,e.n=27,o.addPlayer(n.body);case 27:return i=e.v,n.body.name=n.body.team2,n.body.team=2,n.body.seq=2,e.n=28,o.addPlayer(n.body);case 28:i=e.v;case 29:if("ALL"!=l[f].runner_type||1!=l[f].status){e.n=37;break}k=1;case 30:if(!(k<=parseInt(b))){e.n=33;break}return n.body.name=n.body.runnerName1+"-"+k,n.body.team=1,n.body.seq=k,e.n=31,o.addPlayer(n.body);case 31:i=e.v;case 32:k++,e.n=30;break;case 33:E=1;case 34:if(!(E<=parseInt(b))){e.n=37;break}return n.body.name=n.body.runnerName2+"-"+E,n.body.team=2,n.body.seq=E,e.n=35,o.addPlayer(n.body);case 35:i=e.v;case 36:E++,e.n=34;break;case 37:if("NONE"!=l[f].runner_type||1!=l[f].status||9!=n.body.main_market_id){e.n=46;break}for(g=[],w=[],O=1;O<=parseInt(b);++O)w.push(O);return e.n=38,_(w);case 38:g=e.v,R=0;case 39:if(!(R<g.length)){e.n=42;break}return n.body.name=g[R][0]+"-"+g[R][1],n.body.team=1,n.body.seq=R,e.n=40,o.addPlayer(n.body);case 40:i=e.v;case 41:R++,e.n=39;break;case 42:S=0;case 43:if(!(S<g.length)){e.n=46;break}return n.body.name=g[S][0]+"-"+g[S][1],n.body.team=2,n.body.seq=S,e.n=44,o.addPlayer(n.body);case 44:i=e.v;case 45:S++,e.n=43;break;case 46:f++,e.n=9;break;case 47:t.status(200).json({success:!!i.insertId,data:[],message:i.insertId?"Event Created":"Faild Create Event"}),e.n=49;break;case 48:e.p=48,T=e.v,a(T);case 49:return e.a(2)}},e,null,[[0,48]])}));return function(n,t,r){return e.apply(this,arguments)}}(),_=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)switch(e.n){case 0:if(Array.isArray(n)){e.n=1;break}throw new TypeError("First argument must be an array");case 1:if(!(n.length<3)){e.n=2;break}return e.a(2,[n]);case 2:return e.a(2,n.reduce(function(e,t,r){return e.concat(n.slice(r+1).map(function(e){return[t,e]}))},[]))}},e)}));return function(n){return e.apply(this,arguments)}}(),b=function(){var e=i(r().m(function e(n,t,a){var u,i,o;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1].includes(d(n).role)){e.n=1;break}throw new p("Un Authorise.");case 1:if(n.body.event_id){e.n=2;break}throw new p("Event Id Required");case 2:if(n.body.event_name){e.n=3;break}throw new p("Event Name Required");case 3:return e.n=4,c.getProfile(d(n).email);case 4:return u=e.v,n.body.parent_id=u[0].parent_id,e.n=5,s.updateEvent(n.body);case 5:i=e.v,t.status(200).json({success:!!i.affectedRows,data:[],message:i.affectedRows?"Event Updated":"Failed Update Event"}),e.n=7;break;case 6:e.p=6,o=e.v,a(o);case 7:return e.a(2)}},e,null,[[0,6]])}));return function(n,t,r){return e.apply(this,arguments)}}(),y=function(){var e=i(r().m(function e(n,t,a){var u,i,o,l;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1].includes(d(n).role)){e.n=1;break}throw new p("Un Authorise.");case 1:return e.n=2,c.getProfile(d(n).email);case 2:return u=e.v,i=u[0].id,3!==u[0].u_role&&(i=u[0].parent_id),e.n=3,s.delEvent(n.body.event_id,i);case 3:return o=e.v,e.n=4,s.delMarkets(n.body.event_id);case 4:return e.v,e.n=5,s.delRunners(n.body.event_id);case 5:return e.v,e.n=6,s.delRunnersUsers(n.body.event_id);case 6:e.v,t.status(200).json({success:!0,data:o}),e.n=8;break;case 7:e.p=7,l=e.v,a(l);case 8:return e.a(2)}},e,null,[[0,7]])}));return function(n,t,r){return e.apply(this,arguments)}}(),v=function(){var e=i(r().m(function e(n,t,a){var u,i;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1,2,3,4].includes(d(n).role)){e.n=1;break}throw new p("Un Authorise.");case 1:return e.n=2,c.getProfile(d(n).email);case 2:return e.v,e.n=3,s.getDefaultMarketsAll();case 3:u=e.v,t.status(200).json({success:!0,data:u}),e.n=5;break;case 4:e.p=4,i=e.v,a(i);case 5:return e.a(2)}},e,null,[[0,4]])}));return function(n,t,r){return e.apply(this,arguments)}}(),m=function(){var e=i(r().m(function e(n,t,a){var u,i;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1,2].includes(d(n).role)){e.n=1;break}throw new p("Un Authorise.");case 1:if(n.body.name){e.n=2;break}throw new p("Market Name Required");case 2:return e.n=3,c.getProfile(d(n).email);case 3:return e.v,e.n=4,s.createMarket(n.body);case 4:u=e.v,t.status(200).json({success:!!u.insertId,data:[],message:u.insertId?"Market Created":"Faild Market Event"}),e.n=6;break;case 5:e.p=5,i=e.v,a(i);case 6:return e.a(2)}},e,null,[[0,5]])}));return function(n,t,r){return e.apply(this,arguments)}}(),h=function(){var e=i(r().m(function e(n,t,a){var u,i;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1].includes(d(n).role)){e.n=1;break}throw new p("Un Authorise.");case 1:if(n.body.id){e.n=2;break}throw new p("Market Id Required");case 2:return e.n=3,s.delMarket(n.body.id);case 3:u=e.v,t.status(200).json({success:!0,data:u}),e.n=5;break;case 4:e.p=4,i=e.v,a(i);case 5:return e.a(2)}},e,null,[[0,4]])}));return function(n,t,r){return e.apply(this,arguments)}}(),k=function(){var e=i(r().m(function e(n,t,a){var u,i,l;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1,2,3,4].includes(d(n).role)){e.n=1;break}throw new p("Un Authorise.");case 1:return e.n=2,c.getProfile(d(n).email);case 2:if(u=e.v,i=[],1!=u[0].u_role){e.n=4;break}return e.n=3,s.lockEvent(n.body);case 3:i=e.v;case 4:return n.body.bet_lock=null==n.body.bet_lock?0:n.body.bet_lock,n.body.status=null==n.body.status?1:n.body.status,n.body.user_id=u[0].id,n.body.admin_id=u[0].parent_id,e.n=5,o.lockEventInnerType(n.body);case 5:i=e.v,t.status(200).json({success:!0,data:[],message:i.changedRows?"Updated":"UnChanged"}),e.n=7;break;case 6:e.p=6,l=e.v,a(l);case 7:return e.a(2)}},e,null,[[0,6]])}));return function(n,t,r){return e.apply(this,arguments)}}(),E=function(){var e=i(r().m(function e(n,t,a){var u,i;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1].includes(d(n).role)){e.n=1;break}throw new p("Un Authorise.");case 1:return e.n=2,c.getProfile(d(n).email);case 2:return e.v,e.n=3,s.lockMarket(n.body);case 3:u=e.v,t.status(200).json({success:!0,data:[],message:u.changedRows?"Updated":"UnChanged"}),e.n=5;break;case 4:e.p=4,i=e.v,a(i);case 5:return e.a(2)}},e,null,[[0,4]])}));return function(n,t,r){return e.apply(this,arguments)}}();e.exports={getEventsAll:l,addEvent:f,uniquePairs:_,updateEvent:b,delEvent:y,lockEvent:k,lockMarket:E,getDefaultMarkets:v,createMarket:m,delMarket:h}},818:e=>{"use strict";e.exports=require("dotenv")},829:e=>{"use strict";e.exports=require("jsonwebtoken")},850:(e,n,t)=>{var r=t(252).Router(),a=t(456).authenticateToken,u=t(416).errorHandlerMiddleware,i=t(420),s=i.addUser,o=i.modUser,c=i.changeStatus,d=i.getProfile,p=i.getProf,l=i.Login,f=i.getPartyCodes,_=i.getUsers,b=i.acGen,y=i.setTally,v=i.getBalance,m=i.resetPassword,h=i.removeOperator,k=i.updateChips,E=i.updatePart,g=i.updateMarketType,w=i.setPl,O=i.getButtons,R=i.setButtons,S=i.changePassword,T=i.logout;r.post("/profile",a,d),r.post("/prof",a,p),r.post("/login",l),r.post("/logout",T),r.post("/adduser",a,s),r.post("/getusers",a,_),r.post("/pcodes",a,f),r.post("/acgen",a,b),r.post("/tally",a,y),r.post("/moduser",a,o),r.post("/changeStatus",a,c),r.post("/getBal",a,v),r.post("/resetpassword",a,m),r.post("/removeoperator",a,h),r.post("/updatechips",a,k),r.post("/updatepart",a,E),r.post("/updatemarkettype",a,g),r.post("/plset",a,w),r.post("/getbuttons",a,O),r.post("/setbuttons",a,R),r.post("/changepassword",a,S),r.use(u),e.exports=r},874:e=>{"use strict";e.exports=require("mysql")},896:e=>{"use strict";e.exports=require("fs")},898:e=>{"use strict";e.exports=require("cookie-parser")},928:e=>{"use strict";e.exports=require("path")},955:(e,n,t)=>{function r(){var e,n,t="function"==typeof Symbol?Symbol:{},u=t.iterator||"@@iterator",i=t.toStringTag||"@@toStringTag";function s(t,r,u,i){var s=r&&r.prototype instanceof c?r:c,d=Object.create(s.prototype);return a(d,"_invoke",function(t,r,a){var u,i,s,c=0,d=a||[],p=!1,l={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(n,t){return u=n,i=0,s=e,l.n=t,o}};function f(t,r){for(i=t,s=r,n=0;!p&&c&&!a&&n<d.length;n++){var a,u=d[n],f=l.p,_=u[2];t>3?(a=_===r)&&(s=u[(i=u[4])?5:(i=3,3)],u[4]=u[5]=e):u[0]<=f&&((a=t<2&&f<u[1])?(i=0,l.v=r,l.n=u[1]):f<_&&(a=t<3||u[0]>r||r>_)&&(u[4]=t,u[5]=r,l.n=_,i=0))}if(a||t>1)return o;throw p=!0,r}return function(a,d,_){if(c>1)throw TypeError("Generator is already running");for(p&&1===d&&f(d,_),i=d,s=_;(n=i<2?e:s)||!p;){u||(i?i<3?(i>1&&(l.n=-1),f(i,s)):l.n=s:l.v=s);try{if(c=2,u){if(i||(a="next"),n=u[a]){if(!(n=n.call(u,s)))throw TypeError("iterator result is not an object");if(!n.done)return n;s=n.value,i<2&&(i=0)}else 1===i&&(n=u.return)&&n.call(u),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);u=e}else if((n=(p=l.n<0)?s:t.call(r,l))!==o)break}catch(n){u=e,i=1,s=n}finally{c=1}}return{value:n,done:p}}}(t,u,i),!0),d}var o={};function c(){}function d(){}function p(){}n=Object.getPrototypeOf;var l=[][u]?n(n([][u]())):(a(n={},u,function(){return this}),n),f=p.prototype=c.prototype=Object.create(l);function _(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,a(e,i,"GeneratorFunction")),e.prototype=Object.create(f),e}return d.prototype=p,a(f,"constructor",p),a(p,"constructor",d),d.displayName="GeneratorFunction",a(p,i,"GeneratorFunction"),a(f),a(f,i,"Generator"),a(f,u,function(){return this}),a(f,"toString",function(){return"[object Generator]"}),(r=function(){return{w:s,m:_}})()}function a(e,n,t,r){var u=Object.defineProperty;try{u({},"",{})}catch(e){u=0}a=function(e,n,t,r){if(n)u?u(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t;else{var i=function(n,t){a(e,n,function(e){return this._invoke(n,t,e)})};i("next",0),i("throw",1),i("return",2)}},a(e,n,t,r)}function u(e,n,t,r,a,u,i){try{var s=e[u](i),o=s.value}catch(e){return void t(e)}s.done?n(o):Promise.resolve(o).then(r,a)}function i(e){return function(){var n=this,t=arguments;return new Promise(function(r,a){var i=e.apply(n,t);function s(e){u(i,r,a,s,o,"next",e)}function o(e){u(i,r,a,s,o,"throw",e)}s(void 0)})}}var s=t(376),o=t(577),c=t(850),d=t(326),p=t(230),l=t(22),f=t(398),_=t(722),b=t(252).Router(),y=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)switch(e.n){case 0:b.use("/user",c),b.use("/event",d),b.use("/setting",p),b.use("/result",l),b.use("/account",f),b.use("/ads",_),b.use("/",function(){var e=i(r().m(function e(n,t){return r().w(function(e){for(;;)switch(e.n){case 0:t.status(200).json({data:{timestamp:(new Date).toISOString(),v:"1.0.0"},message:"Score API v1.0.0",error:null});case 1:return e.a(2)}},e)}));return function(n,t){return e.apply(this,arguments)}}()),n.use(s()),n.use(o()),n.use("/api/v1",b);case 1:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}();e.exports={routerV1:y}},967:(e,n,t)=>{function r(){var e,n,t="function"==typeof Symbol?Symbol:{},u=t.iterator||"@@iterator",i=t.toStringTag||"@@toStringTag";function s(t,r,u,i){var s=r&&r.prototype instanceof c?r:c,d=Object.create(s.prototype);return a(d,"_invoke",function(t,r,a){var u,i,s,c=0,d=a||[],p=!1,l={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(n,t){return u=n,i=0,s=e,l.n=t,o}};function f(t,r){for(i=t,s=r,n=0;!p&&c&&!a&&n<d.length;n++){var a,u=d[n],f=l.p,_=u[2];t>3?(a=_===r)&&(s=u[(i=u[4])?5:(i=3,3)],u[4]=u[5]=e):u[0]<=f&&((a=t<2&&f<u[1])?(i=0,l.v=r,l.n=u[1]):f<_&&(a=t<3||u[0]>r||r>_)&&(u[4]=t,u[5]=r,l.n=_,i=0))}if(a||t>1)return o;throw p=!0,r}return function(a,d,_){if(c>1)throw TypeError("Generator is already running");for(p&&1===d&&f(d,_),i=d,s=_;(n=i<2?e:s)||!p;){u||(i?i<3?(i>1&&(l.n=-1),f(i,s)):l.n=s:l.v=s);try{if(c=2,u){if(i||(a="next"),n=u[a]){if(!(n=n.call(u,s)))throw TypeError("iterator result is not an object");if(!n.done)return n;s=n.value,i<2&&(i=0)}else 1===i&&(n=u.return)&&n.call(u),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);u=e}else if((n=(p=l.n<0)?s:t.call(r,l))!==o)break}catch(n){u=e,i=1,s=n}finally{c=1}}return{value:n,done:p}}}(t,u,i),!0),d}var o={};function c(){}function d(){}function p(){}n=Object.getPrototypeOf;var l=[][u]?n(n([][u]())):(a(n={},u,function(){return this}),n),f=p.prototype=c.prototype=Object.create(l);function _(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,a(e,i,"GeneratorFunction")),e.prototype=Object.create(f),e}return d.prototype=p,a(f,"constructor",p),a(p,"constructor",d),d.displayName="GeneratorFunction",a(p,i,"GeneratorFunction"),a(f),a(f,i,"Generator"),a(f,u,function(){return this}),a(f,"toString",function(){return"[object Generator]"}),(r=function(){return{w:s,m:_}})()}function a(e,n,t,r){var u=Object.defineProperty;try{u({},"",{})}catch(e){u=0}a=function(e,n,t,r){if(n)u?u(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t;else{var i=function(n,t){a(e,n,function(e){return this._invoke(n,t,e)})};i("next",0),i("throw",1),i("return",2)}},a(e,n,t,r)}function u(e,n,t,r,a,u,i){try{var s=e[u](i),o=s.value}catch(e){return void t(e)}s.done?n(o):Promise.resolve(o).then(r,a)}function i(e){return function(){var n=this,t=arguments;return new Promise(function(r,a){var i=e.apply(n,t);function s(e){u(i,r,a,s,o,"next",e)}function o(e){u(i,r,a,s,o,"throw",e)}s(void 0)})}}var s=t(697),o=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT name,email,password,u_role FROM users WHERE email = ? LIMIT 1",[n]))},e)}));return function(n){return e.apply(this,arguments)}}(),c=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return console.log(n),e.a(2,s.query("INSERT INTO `tbl_title`(`title`, `ext_link`, `whatsapp`, `telegram`, `last_updated`) VALUES (?,?,?,?,?) ON DUPLICATE KEY UPDATE last_updated = VALUES(tbl_title.last_updated)",[n.title,n.link,n.whatsapp,n.telegram,n.last_updated]))},e)}));return function(n){return e.apply(this,arguments)}}(),d=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("UPDATE `tbl_title` SET title = ? , contents = ? , ext_link = ? , whatsapp = ? , telegram = ? where id = ?",[n.title,n.contents,n.link,n.whatsapp,n.telegram,n.id]))},e)}));return function(n){return e.apply(this,arguments)}}(),p=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("UPDATE tbl_title SET img = ? WHERE id = ?",[n.img,n.id]))},e)}));return function(n){return e.apply(this,arguments)}}(),l=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("UPDATE tbl_setting SET logo_url = ? WHERE id = 1",[n.img]))},e)}));return function(n){return e.apply(this,arguments)}}(),f=function(){var e=i(r().m(function e(){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT * FROM tbl_title ORDER BY `tbl_title`.`id` DESC",[]))},e)}));return function(){return e.apply(this,arguments)}}(),_=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("DELETE FROM `tbl_title` where id = ?",[n]))},e)}));return function(n){return e.apply(this,arguments)}}(),b=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("UPDATE `tbl_setting` SET title = ? , whatsapp = ? , telegram = ? where id = 1",[n.title,n.whatsapp,n.telegram]))},e)}));return function(n){return e.apply(this,arguments)}}(),y=function(){var e=i(r().m(function e(){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT title, whatsapp, telegram, logo_url FROM tbl_setting WHERE id = 1 LIMIT 1",[]))},e)}));return function(){return e.apply(this,arguments)}}(),v=function(){var e=i(r().m(function e(){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT * FROM tbl_slider ORDER BY `tbl_slider`.`id` ASC",[]))},e)}));return function(){return e.apply(this,arguments)}}(),m=function(){var e=i(r().m(function e(){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT * FROM tbl_slider ORDER BY `tbl_slider`.`id` ASC",[]))},e)}));return function(){return e.apply(this,arguments)}}(),h=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("INSERT INTO `tbl_slider`(`image_url`, `last_updated`) VALUES (?,?) ON DUPLICATE KEY UPDATE last_updated = VALUES(tbl_slider.last_updated)",[n.image_url,n.last_updated]))},e)}));return function(n){return e.apply(this,arguments)}}(),k=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("SELECT * FROM tbl_slider where id = ?",[n]))},e)}));return function(n){return e.apply(this,arguments)}}(),E=function(){var e=i(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,s.query("DELETE FROM `tbl_slider` where id = ?",[n]))},e)}));return function(n){return e.apply(this,arguments)}}();e.exports={Login:o,addTitle:c,updateTitle:d,updateImage:p,updateLogo:l,getTitle:f,delAds:_,getSetting:y,updateSetting:b,getImageList:m,addImage:h,delImg:E,getImageById:k,getSlides:v}},968:(e,n,t)=>{function r(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return a(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?a(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function u(){var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",a=t.toStringTag||"@@toStringTag";function s(t,r,a,u){var s=r&&r.prototype instanceof c?r:c,d=Object.create(s.prototype);return i(d,"_invoke",function(t,r,a){var u,i,s,c=0,d=a||[],p=!1,l={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(n,t){return u=n,i=0,s=e,l.n=t,o}};function f(t,r){for(i=t,s=r,n=0;!p&&c&&!a&&n<d.length;n++){var a,u=d[n],f=l.p,_=u[2];t>3?(a=_===r)&&(s=u[(i=u[4])?5:(i=3,3)],u[4]=u[5]=e):u[0]<=f&&((a=t<2&&f<u[1])?(i=0,l.v=r,l.n=u[1]):f<_&&(a=t<3||u[0]>r||r>_)&&(u[4]=t,u[5]=r,l.n=_,i=0))}if(a||t>1)return o;throw p=!0,r}return function(a,d,_){if(c>1)throw TypeError("Generator is already running");for(p&&1===d&&f(d,_),i=d,s=_;(n=i<2?e:s)||!p;){u||(i?i<3?(i>1&&(l.n=-1),f(i,s)):l.n=s:l.v=s);try{if(c=2,u){if(i||(a="next"),n=u[a]){if(!(n=n.call(u,s)))throw TypeError("iterator result is not an object");if(!n.done)return n;s=n.value,i<2&&(i=0)}else 1===i&&(n=u.return)&&n.call(u),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);u=e}else if((n=(p=l.n<0)?s:t.call(r,l))!==o)break}catch(n){u=e,i=1,s=n}finally{c=1}}return{value:n,done:p}}}(t,a,u),!0),d}var o={};function c(){}function d(){}function p(){}n=Object.getPrototypeOf;var l=[][r]?n(n([][r]())):(i(n={},r,function(){return this}),n),f=p.prototype=c.prototype=Object.create(l);function _(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return d.prototype=p,i(f,"constructor",p),i(p,"constructor",d),d.displayName="GeneratorFunction",i(p,a,"GeneratorFunction"),i(f),i(f,a,"Generator"),i(f,r,function(){return this}),i(f,"toString",function(){return"[object Generator]"}),(u=function(){return{w:s,m:_}})()}function i(e,n,t,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}i=function(e,n,t,r){if(n)a?a(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t;else{var u=function(n,t){i(e,n,function(e){return this._invoke(n,t,e)})};u("next",0),u("throw",1),u("return",2)}},i(e,n,t,r)}function s(e,n,t,r,a,u,i){try{var s=e[u](i),o=s.value}catch(e){return void t(e)}s.done?n(o):Promise.resolve(o).then(r,a)}function o(e){return function(){var n=this,t=arguments;return new Promise(function(r,a){var u=e.apply(n,t);function i(e){s(u,r,a,i,o,"next",e)}function o(e){s(u,r,a,i,o,"throw",e)}i(void 0)})}}var c=t(183),d=t(299),p=t(456).parseJwt,l=t(693).InputError,f=function(){var e=o(u().m(function e(n,t,r){var a,i,s,o;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,(a=n.body).user_id=n.body.uid?n.body.uid:p(n).id,e.n=1,d.loginWId(a.user_id);case 1:return i=e.v,n.body.type&&"all"===n.body.type&&(a.role=i[0].u_role),e.n=2,c.getAccountStatement(a);case 2:s=e.v,t.status(200).json({success:!0,data:s}),e.n=4;break;case 3:e.p=3,o=e.v,r(o);case 4:return e.a(2)}},e,null,[[0,3]])}));return function(n,t,r){return e.apply(this,arguments)}}(),_=function(){var e=o(u().m(function e(n,t,r){var a,i,s,o,f,_;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[1,2,3,4,5,6].includes(p(n).role)){e.n=1;break}throw new l("Un Authorise.");case 1:return e.n=2,d.getProfile(p(n).email);case 2:return a=e.v,i=a[0].id,(s=n.body).user_id=i,s.mode_id=4,e.n=3,c.getPl(s);case 3:return o=e.v,e.n=4,c.grandPL(s);case 4:f=e.v,t.status(200).json({success:!0,data:o,gt:f.length>0?Number(f[0].gt):0}),e.n=6;break;case 5:e.p=5,_=e.v,r(_);case 6:return e.a(2)}},e,null,[[0,5]])}));return function(n,t,r){return e.apply(this,arguments)}}(),b=function(){var e=o(u().m(function e(n,t,r){var a,i,s;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,(a=n.body).user_id=n.body.uid?n.body.uid:p(n).id,e.n=1,c.getAcSum(a);case 1:i=e.v,t.status(200).json({success:!0,data:i}),e.n=3;break;case 2:e.p=2,s=e.v,r(s);case 3:return e.a(2)}},e,null,[[0,2]])}));return function(n,t,r){return e.apply(this,arguments)}}(),y=function(){var e=o(u().m(function e(n,t,r){var a,i,s,o,f,_;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,[2,3,4].includes(p(n).role)){e.n=1;break}throw new l("Try After SomeTime");case 1:return e.n=2,d.getProfile(n.body.from);case 2:return a=e.v,e.n=3,d.getProfile(n.body.to);case 3:return i=e.v,e.n=4,d.getProfile(p(n).id);case 4:if(s=e.v,n.body.from){e.n=5;break}throw new l("From is Required");case 5:if(n.body.to){e.n=6;break}throw new l("To is Required");case 6:if(n.body.amount){e.n=7;break}throw new l("Amount is Required");case 7:if(!(n.body.amount<0||n.body.amount>9e7)){e.n=8;break}throw new l("Enter Valid Amount");case 8:return f=[],(o=[]).push([a[0].id,n.body.amount,-1*n.body.amount,0,0,0,0,0],[i[0].id,-1*n.body.amount,n.body.amount,0,0,0,0,0]),f.push([a[0].id,n.body.amount,4===a[0].u_role?-1*n.body.amount:n.body.amount,"CR",a[0].id,i[0].id,s[0].id,0,n.body.amount,-1,0,0,0,n.body.remark+"/Settlement/"+n.body.from+"/"+n.body.to+"/"+n.body.amount,0,1],[i[0].id,-1*n.body.amount,4!==i[0].u_role?-1*n.body.amount:n.body.amount,"DR",i[0].id,a[0].id,s[0].id,0,n.body.amount,-1,0,0,0,n.body.remark+"/Settlement/"+n.body.to+"/"+n.body.from+"/"+-1*n.body.amount,0,1]),e.n=9,d.addBalance(o);case 9:return e.n=10,c.addAccountEntry(f);case 10:t.status(200).json({success:!0,data:[],message:"Settement Done"}),e.n=12;break;case 11:e.p=11,_=e.v,r(_);case 12:return e.a(2)}},e,null,[[0,11]])}));return function(n,t,r){return e.apply(this,arguments)}}(),v=function(){var e=o(u().m(function e(n,t,a){var i,s,o,l,f;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,(i=n.body).user_id=n.body.uid?n.body.uid:p(n).id,e.n=1,d.loginWId(i.user_id);case 1:return s=e.v,i.parent_id=s[0].parent_id,e.n=2,c.getEventGenChild(i);case 2:return o=e.v,e.n=3,c.getEventGenSelf(i);case 3:l=e.v,t.status(200).json({success:!0,data:[].concat(r(o),r(l))}),e.n=5;break;case 4:e.p=4,f=e.v,a(f);case 5:return e.a(2)}},e,null,[[0,4]])}));return function(n,t,r){return e.apply(this,arguments)}}();e.exports={getAccountStatement:f,doSettement:y,getEventGen:v,getPl:_,getAcSum:b}}},n={};function t(r){var a=n[r];if(void 0!==a)return a.exports;var u=n[r]={exports:{}};return e[r](u,u.exports,t),u.exports}t.c=n,t(t.s=241)})();
//# sourceMappingURL=server.js.map